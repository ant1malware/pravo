import{v as u,j as e,C as j}from"./index-CkI-Uld4.js";import{u as N,L as l,r as f}from"./react-vendor-DTkXckhQ.js";import{A as b,S as g}from"./icons-DET5c9ig.js";function $(){const{id:c}=N(),s=u.find(i=>i.id===c);if(!s)return e.jsxs("div",{className:"p-4",children:["Не найдено. ",e.jsx(l,{to:"/",className:"text-blue-600 underline",children:"На главную"})]});const n=f.useMemo(()=>z(s.text||""),[s==null?void 0:s.text]);return e.jsxs("div",{className:"min-h-screen text-zinc-900 dark:text-zinc-100",children:[e.jsx("header",{className:"sticky top-0 z-20 border-b border-zinc-200 bg-white/80 backdrop-blur dark:border-zinc-800 dark:bg-zinc-900/70",children:e.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between gap-3 px-4 py-3",children:[e.jsxs(l,{to:"/",className:"flex items-center gap-1 text-sm hover:underline",children:[e.jsx(b,{className:"h-4 w-4"})," Назад"]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),e.jsx("h1",{className:"text-lg font-bold leading-tight",children:s.title})]}),e.jsx(j,{})]}),e.jsx("div",{className:"text-xs text-zinc-500",children:s.updated?`Обновлено: ${s.updated}`:""})]})}),e.jsxs("main",{className:"mx-auto grid max-w-6xl grid-cols-1 gap-5 px-4 py-5 md:grid-cols-[260px,1fr]",children:[e.jsx("aside",{className:"hidden md:block",children:e.jsxs("div",{className:"sticky top-16 rounded-2xl border border-zinc-200 bg-white/70 p-3 text-sm dark:border-zinc-800 dark:bg-zinc-900/50",children:[e.jsx("div",{className:"mb-2 text-xs font-semibold text-zinc-600 dark:text-zinc-400",children:"Оглавление"}),n.toc.length?e.jsx("ul",{className:"space-y-1",children:n.toc.map(i=>e.jsx("li",{children:e.jsx("a",{className:"underline decoration-dotted hover:no-underline",href:`#${i.id}`,children:i.text})},i.id))}):e.jsx("div",{className:"text-xs text-zinc-500",children:"Заголовки не найдены."})]})}),e.jsxs("section",{children:[e.jsxs("nav",{className:"mb-3 text-xs text-zinc-500",children:[e.jsx(l,{to:"/",className:"underline decoration-dotted hover:no-underline",children:"Главная"}),e.jsx("span",{className:"mx-1",children:"/"}),e.jsx("span",{children:"ВУ"}),e.jsx("span",{className:"mx-1",children:"/"}),e.jsx("span",{className:"text-zinc-700 dark:text-zinc-300",children:s.title})]}),e.jsx("div",{className:"reading",children:e.jsx("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4 dark:border-zinc-800 dark:bg-zinc-900",children:e.jsx("div",{className:"vu prose prose-zinc max-w-none text-sm leading-relaxed dark:prose-invert",children:n.nodes})})})]})]})]})}function v(c){return c.toLowerCase().replace(/[^\p{L}\p{N}\s-]/gu,"").trim().replace(/\s+/g,"-").slice(0,80)}function z(c){const s=c.replace(/\r\n?/g,`
`).split(`
`),n=[],i=[];let a=0;const o=/^\s*(Глава|Раздел)\s+(\d+[\.:)]?)\s*(.*)$/i,m=/^\s*(\d+(?:\.\d+)+)\.?\s+(.*)$/,h=/^\s*(\d+)\.\s+(.*)$/;for(const p of s){const r=p.trim();if(!r){n.push(e.jsx("div",{className:"h-3"},a++));continue}let t=r.match(o);if(t){const d=`${t[1]} ${t[2]}${t[3]?" — "+t[3]:""}`,x=v(d);i.push({id:x,text:d}),n.push(e.jsx("h2",{id:x,children:d},a++));continue}if(t=r.match(m)||r.match(h),t){n.push(e.jsxs("p",{className:"flex",children:[e.jsx("span",{className:"num",children:t[1]}),e.jsx("span",{children:t[2]})]},a++));continue}n.push(e.jsx("p",{children:r},a++))}return{nodes:n,toc:i}}export{$ as default};
