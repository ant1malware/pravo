import{j as t}from"./index-Dc2yicJU.js";import{R as l,L as p}from"./react-vendor-DTkXckhQ.js";import{g as m}from"./authRemote-D9Q-aZvG.js";import{listSections as x,createSection as f,listTopics as u,createTopic as h}from"./forumRemote-D5s3MT8n.js";import"./icons-GyIOUIPt.js";const y=[{title:"Объявления",description:"Новости, релизы, TL;DR, дорожная карта",icon:"📢",topics:[{title:"Добро пожаловать!",content:"Этот раздел для важных объявлений: релизы, TL;DR и планы."},{title:"Дорожная карта",content:"Обрисовываем ближайшие цели и приоритеты."}]},{title:"Правила и FAQ",description:"Правила поведения и ответы на часто задаваемые вопросы",icon:"📜",topics:[{title:"Правила форума",content:"Будьте вежливы. Не нарушайте закон. Уважайте собеседников."},{title:"FAQ: как начать",content:"Регистрация, вход, роли и базовые возможности форума."},{title:"Как задавать вопросы",content:"Покажите, что уже пробовали; давайте код, скриншоты, ссылки."}]},{title:"Общий",description:"Обсуждения по любым темам",icon:"💬",topics:[{title:"Привет! Представьтесь",content:"Пара слов о себе — чем занимаетесь и почему вы здесь."},{title:"Идеи и предложения",content:"Что улучшить в форуме и продукте? Делитесь мыслями."}]},{title:"Вопросы и помощь",description:"Q&A, лучшие ответы, помощь друг другу",icon:"❓",topics:[{title:"Как получить помощь эффективно",content:"Описываем контекст, ожидаемое и фактическое поведение; приложите логи."}]},{title:"Гайды",description:"Пошаговые инструкции, туториалы и полезные материалы",icon:"📚",topics:[{title:"Как оформить гайд",content:"Структура: цель, шаги, примеры, ссылки, итог."}]},{title:"Шоукейс",description:"Демонстрация проектов и результатов",icon:"🚀",topics:[{title:"Покажите ваш проект",content:"Скриншоты, краткое описание, технологии и ссылка."}]},{title:"Оффтоп",description:"Неформальные темы и разговоры",icon:"🎲",topics:[{title:"Кофе-брейк",content:"Музыка, фильмы, оффтоп — без политики и холиваров."}]},{title:"Workshop",description:"Проекты сообщества: цели, прогресс, ревью",icon:"🛠️",topics:[{title:"[WIP] Стартую проект",content:`# Проект: Название

## Цели
- ...

## Технологии
- ...

## Прогресс
- [ ] Шаг 1
- [ ] Шаг 2

## Ссылка
- https://example.com`}]}];async function S(){const o=await x();let a=0,r=0;for(const c of y){let e=(o||[]).find(i=>(i.title||"").toLowerCase()===c.title.toLowerCase());if(!e)try{e=await f({title:c.title,description:c.description,icon:c.icon}),a++}catch{}if(e)try{const i=await u(e.id),d=new Set((i||[]).map(n=>(n.title||"").toLowerCase()));for(const n of c.topics)if(!d.has(n.title.toLowerCase()))try{await h({sectionId:e.id,title:n.title,content:n.content}),r++}catch{}}catch{}}return{createdSections:a,createdTopics:r}}function v(){const[o,a]=l.useState(null),[r,c]=l.useState(()=>{try{return localStorage.getItem("seed:done")==="1"}catch{return!1}}),[e,i]=l.useState("");l.useEffect(()=>{(async()=>{try{a(await m())}catch{}})()},[]);const d=!!o&&o.role==="developer";async function n(){try{i("Seeding...");const s=await S();i(`Sections: +${s.createdSections}; Topics: +${s.createdTopics}`);try{localStorage.setItem("seed:done","1"),c(!0)}catch{}}catch(s){i((s==null?void 0:s.message)||"Failed")}}return d?t.jsx("main",{className:"min-h-screen",style:{background:"#0d0d12",color:"#f8fafc"},children:t.jsx("div",{className:"mx-auto max-w-3xl px-4 py-12",children:t.jsxs("div",{className:"card p-6",children:[t.jsx("div",{className:"mb-2 text-xs uppercase tracking-[0.28em] text-zinc-400/80",children:"Maintenance"}),t.jsx("h1",{className:"text-xl font-semibold",children:"Forum Seed"}),t.jsx("p",{className:"mt-1 text-sm opacity-80",children:"Creates baseline sections and topics. Safe to re-run; skips existing."}),t.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[r?t.jsx("span",{className:"text-sm opacity-80",children:"Already seeded (seed:done)"}):t.jsx("button",{className:"btn btn-primary",onClick:n,children:"Seed forum"}),t.jsx(p,{to:"/forum",className:"btn",children:"Back to forum"})]}),e&&t.jsx("div",{className:"mt-3 rounded-lg border p-2 text-sm opacity-80",style:{borderColor:"var(--border)"},children:e})]})})}):t.jsx("main",{className:"min-h-screen",style:{background:"#0d0d12",color:"#f8fafc"},children:t.jsx("div",{className:"mx-auto max-w-3xl px-4 py-12",children:t.jsx("div",{className:"card p-6 text-sm text-zinc-300",children:"Only developers can access this page."})})})}export{v as default};
