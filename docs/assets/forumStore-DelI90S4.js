import{c as k}from"./index-BegF4YQh.js";function w(){if(!(typeof window>"u"))return window}function a(t,o){const e=w();if(!e)return o;try{const n=e.localStorage.getItem(t);return n?JSON.parse(n):o}catch{return o}}function s(t,o){const e=w();if(e)try{e.localStorage.setItem(t,JSON.stringify(o))}catch{}}function p(){return new Date().toISOString()}function b(t){return t?t.until?new Date(t.until).getTime()>Date.now():!0:!1}let h=!1;function l(){if(h)return;h=!0,a("forum:initialized",!1)||(x(),s("forum:initialized",!0))}function x(){const t=p(),o={id:crypto.randomUUID(),username:"Pavel",email:"pavel@forum.local",createdAt:t,role:"developer",userNumber:1,posts:3,likes:6,topics:2,profile:{bio:"Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÐµÐ»ÑŒ SKY Ñ„Ð¾Ñ€ÑƒÐ¼Ð°. Ð¡Ð»ÐµÐ¶Ñƒ Ð·Ð° Ð¿Ð¾Ñ€ÑÐ´ÐºÐ¾Ð¼ Ð¸ Ð²Ð´Ð¾Ñ…Ð½Ð¾Ð²Ð»ÑÑŽ ÐºÐ¾Ð¼Ð°Ð½Ð´Ñƒ.",links:{website:"https://sky.local"},accentFrom:"#a855f7",accentTo:"#22d3ee",badges:["Founder","Core"],privacy:{showEmail:!0,showStats:!0}},bans:null,mutes:null},e={id:crypto.randomUUID(),username:"elysia",email:"elysia@forum.local",createdAt:t,role:"moderator",userNumber:2,posts:5,likes:8,topics:1,profile:{bio:"Ð¤Ð°Ð½Ð°Ñ‚ Ñ€ÐµÑ‚Ñ€Ð¾-Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ¾Ð², Ð¼Ð¾Ð´ÐµÑ€Ð¸Ñ€ÑƒÑŽ Ñ€Ð°Ð·Ð´ÐµÐ» Ð´Ð¸Ð·Ð°Ð¹Ð½Ð°.",signature:"Stay liquid",links:{discord:"elysia#2048"},accentFrom:"#f472b6",accentTo:"#c084fc",badges:["Moderator"],privacy:{showEmail:!1,showStats:!0}},bans:null,mutes:null},n={id:crypto.randomUUID(),username:"raptor",email:"raptor@forum.local",createdAt:t,role:"vip",userNumber:3,posts:2,likes:3,topics:1,profile:{bio:"Ð¢ÐµÑÑ‚Ð¸Ñ€ÑƒÑŽ Ð½Ð¾Ð²Ñ‹Ðµ Ð²ÐµÑ€ÑÐ¸Ð¸ SKY. Ð›ÑŽÐ±Ð»ÑŽ Ð´Ð»Ð¸Ð½Ð½Ñ‹Ðµ Ñ‚Ñ€ÐµÐ´Ñ‹.",links:{telegram:"@raptor"},accentFrom:"#38bdf8",accentTo:"#a855f7",badges:["Early"],privacy:{showEmail:!1,showStats:!0}},bans:null,mutes:null};s("forum:accounts",[o,e,n]);const i=[{id:crypto.randomUUID(),title:"SKY Update Log",description:"ÐÐ½Ð¾Ð½ÑÑ‹ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¹, Ð±ÐµÑ‚Ð°-Ñ€ÐµÐ»Ð¸Ð·Ñ‹, Ð¿Ð»Ð°Ð½Ñ‹.",icon:"ðŸ› ",createdAt:t,order:1,moderatorIds:[o.id],topicCount:1,postCount:4},{id:crypto.randomUUID(),title:"Design Lab",description:"UI/UX, ÑÐºÑÐ¿ÐµÑ€Ð¸Ð¼ÐµÐ½Ñ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ ÐºÐ¾Ð½Ñ†ÐµÐ¿Ñ‚Ñ‹, Ñ€ÐµÑ‚Ñ€Ð¾Ñ„ÑƒÑ‚ÑƒÑ€Ð¸Ð·Ð¼.",icon:"ðŸŽ¨",createdAt:t,order:2,moderatorIds:[e.id],topicCount:1,postCount:3},{id:crypto.randomUUID(),title:"Community Lounge",description:"Ð—Ð½Ð°ÐºÐ¾Ð¼ÑÑ‚Ð²Ð°, ÑÐ²Ð¾Ð±Ð¾Ð´Ð½Ñ‹Ðµ Ñ€Ð°Ð·Ð³Ð¾Ð²Ð¾Ñ€Ñ‹, ÑÐ±Ð¾Ñ€ Ñ„Ð¸Ð´Ð±ÑÐºÐ°.",icon:"ðŸª",createdAt:t,order:3,moderatorIds:[e.id,n.id],topicCount:1,postCount:3}];s("forum:sections",i);const r=[{id:crypto.randomUUID(),sectionId:i[0].id,title:"SKY 0.9 Roadmap",authorId:o.id,createdAt:t,updatedAt:t,pinned:!0,locked:!1,movedTo:null,viewCount:124,replyCount:2,lastPostAt:t,lastPostBy:e.id},{id:crypto.randomUUID(),sectionId:i[1].id,title:"Liquid glass Ð¿Ð°Ñ‚Ñ‚ÐµÑ€Ð½Ñ‹",authorId:e.id,createdAt:t,updatedAt:t,pinned:!1,locked:!1,movedTo:null,viewCount:86,replyCount:1,lastPostAt:t,lastPostBy:o.id},{id:crypto.randomUUID(),sectionId:i[2].id,title:"Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ñ„Ð¾Ñ€ÑƒÐ¼ SKY",authorId:n.id,createdAt:t,updatedAt:t,pinned:!0,locked:!1,movedTo:null,viewCount:96,replyCount:2,lastPostAt:t,lastPostBy:o.id}];s("forum:topics",r);const u=[{id:crypto.randomUUID(),topicId:r[0].id,authorId:o.id,content:"Ð”Ñ€ÑƒÐ·ÑŒÑ, ÑÐ¾Ð±Ð¸Ñ€Ð°ÐµÐ¼ Ð¿Ð»Ð°Ð½Ñ‹ Ð½Ð° 0.9: Ð½Ð¾Ð²Ñ‹Ð¹ Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¾Ñ€, Ñ€ÐµÐ¶Ð¸Ð¼ SKY Home, ÑÐ¸ÑÑ‚ÐµÐ¼Ð° Ð´Ð¾ÑÑ‚Ð¸Ð¶ÐµÐ½Ð¸Ð¹.",createdAt:t,likes:[e.id,n.id]},{id:crypto.randomUUID(),topicId:r[0].id,authorId:e.id,content:"ÐŸÑ€Ð¾Ñ‚Ð¾Ñ‚Ð¸Ð¿Ñ‹ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹. ÐÑƒÐ¶Ð½Ñ‹ Ñ‚ÐµÑÑ‚ÐµÑ€Ñ‹ Ð´Ð»Ñ Ñ€ÐµÐ´Ð¸Ð·Ð°Ð¹Ð½Ð° Ð¿Ð°Ð½ÐµÐ»Ð¸ Ð¼Ð¾Ð´ÐµÑ€Ð°Ñ†Ð¸Ð¸.",createdAt:t,likes:[o.id]},{id:crypto.randomUUID(),topicId:r[1].id,authorId:e.id,content:"Ð¡Ð¾Ð±Ð¸Ñ€Ð°ÑŽ ÐºÐ¾Ð»Ð»ÐµÐºÑ†Ð¸ÑŽ ÑÑ„Ñ„ÐµÐºÑ‚Ð¾Ð² Ð´Ð»Ñ ÑÑ‚ÐµÐºÐ»Ð°. Ð”ÐµÐ»Ð¸Ñ‚ÐµÑÑŒ ÑÐºÑ€Ð¸Ð½Ð°Ð¼Ð¸ Ð¸ CSS.",createdAt:t,likes:[n.id]},{id:crypto.randomUUID(),topicId:r[1].id,authorId:o.id,content:"Ð”Ð¾Ð±Ð°Ð²Ð¸Ð» Ñ‚Ð¾ÐºÐµÐ½Ñ‹ Ð´Ð»Ñ Ð°ÐºÑ†ÐµÐ½Ñ‚Ð½Ñ‹Ñ… Ð³Ñ€Ð°Ð´Ð¸ÐµÐ½Ñ‚Ð¾Ð². ÐŸÑ€Ð¾Ð²ÐµÑ€ÑÐ¹Ñ‚Ðµ Ð² index.css.",createdAt:t,likes:[e.id]},{id:crypto.randomUUID(),topicId:r[2].id,authorId:n.id,content:"Ð Ð°ÑÑÐºÐ°Ð¶Ð¸Ñ‚Ðµ Ð¾ ÑÐµÐ±Ðµ! Ð¯ Ð·Ð°Ð½Ð¸Ð¼Ð°ÑŽÑÑŒ QA Ð¸ Ð»ÑŽÐ±Ð»ÑŽ Ñ‚Ñ‘Ð¼Ð½Ñ‹Ðµ Ñ‚ÐµÐ¼Ñ‹.",createdAt:t,likes:[e.id]},{id:crypto.randomUUID(),topicId:r[2].id,authorId:e.id,content:"ÐŸÑ€Ð¸Ð²ÐµÑ‚ Ð²ÑÐµÐ¼! Ð“Ð¾Ñ‚Ð¾Ð² Ð¿Ð¾Ð¼Ð¾Ð³Ð°Ñ‚ÑŒ Ñ Ð¾Ñ„Ð¾Ñ€Ð¼Ð»ÐµÐ½Ð¸ÐµÐ¼ Ð¸ Ð¼Ð¾Ð´ÐµÑ€Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Lounge.",createdAt:t,likes:[n.id]},{id:crypto.randomUUID(),topicId:r[2].id,authorId:o.id,content:"Ð‘ÑƒÐ´ÐµÐ¼ Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ ÐºÐ¾ÑÐ¼Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ð²Ð°Ð¹Ð± Ð¸ ÑƒÐ²Ð°Ð¶ÐµÐ½Ð¸Ðµ Ð´Ñ€ÑƒÐ³ Ðº Ð´Ñ€ÑƒÐ³Ñƒ.",createdAt:t,likes:[n.id,e.id]}];s("forum:posts",u),s("forum:settings",{heroTitle:"SKY Forum",heroSubtitle:"Ð­ÐºÑÐºÐ»ÑŽÐ·Ð¸Ð²Ð½Ð¾Ðµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÑÑ‚Ð²Ð¾ Ð´Ð»Ñ Ñ€Ð°Ð·Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐ¾Ð² Ð¸ Ð¸ÑÑÐ»ÐµÐ´Ð¾Ð²Ð°Ñ‚ÐµÐ»ÐµÐ¹ SKY.",heroMessage:"ÐžÐ±ÑÑƒÐ¶Ð´Ð°ÐµÐ¼ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ, Ð´ÐµÐ»Ð¸Ð¼ÑÑ ÐºÐ¾Ð½Ñ†ÐµÐ¿Ñ‚Ð°Ð¼Ð¸ Ð¸ Ñ‚ÐµÑÑ‚Ð¸Ñ€ÑƒÐµÐ¼ Ð±ÑƒÐ´ÑƒÑ‰ÐµÐµ Ð¸Ð½Ñ‚ÐµÑ€Ñ„ÐµÐ¹ÑÐ¾Ð².",registrationOpen:!0,requireEnglishNick:!0,allowGuestRead:!1}),s("forum:counters",{nextUserNumber:4});const c=[{code:"SKYACCESSCODE000",createdAt:t,createdBy:o.id,note:"Ð”ÐµÐ¼Ð¾ Ð¿Ñ€Ð¸Ð³Ð»Ð°ÑˆÐµÐ½Ð¸Ðµ",usedBy:e.id,usedAt:t},{code:"SKYACCESSCODE001",createdAt:t,createdBy:o.id,note:"Ð—Ð°Ð¿Ð°Ñ Ð´Ð»Ñ Ñ‚ÐµÑÑ‚Ð°",usedBy:null,usedAt:null}];s("forum:invites",c);const I={id:crypto.randomUUID(),createdAt:t,actorId:o.id,action:"seed",targetType:"settings",notes:"Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð´ÐµÐ¼Ð¾-Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ„Ð¾Ñ€ÑƒÐ¼Ð°"};s("forum:logs",[I])}function S(){return l(),a("forum:accounts",[])}function E(t){s("forum:accounts",t)}function g(){return l(),a("forum:sections",[])}function C(t){s("forum:sections",t)}function y(){return l(),a("forum:topics",[])}function D(t){s("forum:topics",t)}function v(){return l(),a("forum:posts",[])}function P(){return l(),a("forum:settings",{heroTitle:"SKY Forum",heroSubtitle:"",heroMessage:"",registrationOpen:!1,requireEnglishNick:!0,allowGuestRead:!1})}function K(){return l(),a("forum:logs",[])}function L(t){s("forum:logs",t)}function U(t){const o=K(),e={id:crypto.randomUUID(),createdAt:p(),...t};o.unshift(e),L(o.slice(0,200))}function F(){const t=k();return t?A(t.userId):null}function A(t){return S().find(o=>o.id===t)||null}function N(t){return S().find(o=>o.username.toLowerCase()===t.toLowerCase())||null}function O(t,o){const e=S(),n=e.findIndex(i=>i.id===t);n!==-1&&(e[n]={...e[n],...o},E(e))}function M(){return g().slice().sort((t,o)=>t.order-o.order)}function q(t){const o=g(),e={id:crypto.randomUUID(),title:t.title,description:t.description,icon:t.icon,createdAt:p(),order:o.length+1,moderatorIds:t.moderatorIds??[],topicCount:0,postCount:0};return o.push(e),C(o),U({actorId:t.actorId,action:"section_create",targetType:"section",targetId:e.id,notes:e.title}),e}function z(t,o,e){const n=g(),i=n.findIndex(r=>r.id===t);i!==-1&&(n[i]={...n[i],...o},C(n),U({actorId:e,action:"section_update",targetType:"section",targetId:t,notes:o.title||o.description}))}function R(t){const o=y();return(t?o.filter(n=>n.sectionId===t):o).slice().sort((n,i)=>n.pinned&&!i.pinned?-1:!n.pinned&&i.pinned?1:new Date(i.lastPostAt).getTime()-new Date(n.lastPostAt).getTime())}function Y(t){return y().find(o=>o.id===t)||null}function _(t,o,e,n){const i=y(),r=i.findIndex(u=>u.id===t);r!==-1&&(i[r]={...i[r],...o,updatedAt:p()},D(i),U({actorId:e,action:"topic_update",targetType:"topic",targetId:t,notes:o.title??void 0}))}function G(t,o,e){const n=y(),i=n.findIndex(c=>c.id===t);if(i===-1)return;const r=n[i],u=g(),f=u.find(c=>c.id===r.sectionId),m=u.find(c=>c.id===o);if(m){if(n[i]={...r,sectionId:o,movedTo:o,updatedAt:p()},D(n),f&&f.id!==m.id){const I=v().filter(d=>d.topicId===r.id).length,T=u.map(d=>d.id===f.id?{...d,topicCount:Math.max(0,d.topicCount-1),postCount:Math.max(0,d.postCount-I)}:d.id===m.id?{...d,topicCount:d.topicCount+1,postCount:d.postCount+I}:d);C(T)}U({actorId:e,action:"topic_move",targetType:"topic",targetId:t,notes:`Ð² Ñ€Ð°Ð·Ð´ÐµÐ» ${o}`})}}function J(t=8){return v().slice().sort((e,n)=>new Date(n.createdAt).getTime()-new Date(e.createdAt).getTime()).slice(0,t).map(e=>({post:e,topic:Y(e.topicId),author:A(e.authorId)}))}function H(){return P()}function Q(t){return t?b(t.mutes||void 0):!1}export{J as a,H as b,q as c,z as d,R as e,N as f,F as g,_ as h,Q as i,M as l,G as m,O as u};
