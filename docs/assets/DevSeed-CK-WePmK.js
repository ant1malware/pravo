import{j as t}from"./index-DudesgnV.js";import{R as d,L as f}from"./react-vendor-DTkXckhQ.js";import{g as u}from"./authRemote-DD-nYhbe.js";import{listSections as p,createSection as h,listTopics as m,createTopic as x,updateTopic as y}from"./forumRemote-D5s3MT8n.js";import"./icons-GyIOUIPt.js";const S=[{title:"����������",description:"�������, ������, TL;DR, �������� �����",icon:"??",topics:[{title:"����� ����������!",content:"���� ������ ��� ������ ����������: ������, TL;DR � �����."},{title:"�������� �����",content:"������������ ��������� ���� � ����������."}]},{title:"������� � FAQ",description:"������� ��������� � ������ �� ����� ���������� �������",icon:"??",topics:[{title:"������� ������",content:"������ �������. �� ��������� �����. �������� ������������."},{title:"FAQ: ��� ������",content:"�����������, ����, ���� � ������� ����������� ������."},{title:"��� �������� �������",content:"��������, ��� ��� ���������; ������� ���, ���������, ������."}]},{title:"�����",description:"���������� �� ����� �����",icon:"??",topics:[{title:"������! �������������",content:"���� ���� � ���� � ��� ����������� � ������ �� �����."},{title:"���� � �����������",content:"��� �������� � ������ � ��������? �������� �������."}]},{title:"������� � ������",description:"Q&A, ������ ������, ������ ���� �����",icon:"?",topics:[{title:"��� �������� ������ ����������",content:"��������� ��������, ��������� � ����������� ���������; ��������� ����."}]},{title:"�����",description:"��������� ����������, ��������� � �������� ���������",icon:"??",topics:[{title:"��� �������� ����",content:"���������: ����, ����, �������, ������, ����."},{title:"����: ���������� �������",content:"��������� �� ��������, ���� ��������, ��� ���������, ���/���������."},{title:"�������� ������",content:"�������� ��������: ������������, ������, ����, �����."}]},{title:"�������",description:"������������ �������� � �����������",icon:"??",topics:[{title:"�������� ��� ������",content:"���������, ������� ��������, ���������� � ������."},{title:"?? ������� �������� ����������",content:"�������� ������ ����� ���������� � �������� ����������."}]},{title:"������",description:"������������ ���� � ���������",icon:"??",topics:[{title:"����-�����",content:"������, ������, ������ � ��� �������� � ���������."}]},{title:"Workshop",description:"������� ����������: ����, ��������, �����",icon:"???",topics:[{title:"[WIP] ������� ������",content:`# ������: ��������

## ����
- ...

## ����������
- ...

## ��������
- [ ] ��� 1
- [ ] ��� 2

## ������
- https://example.com`}]}];async function g(){const a=await p();let r=0,l=0;for(const s of S){let e=(a||[]).find(i=>(i.title||"").toLowerCase()===s.title.toLowerCase());if(!e)try{e=await h({title:s.title,description:s.description,icon:s.icon}),r++}catch{}if(e)try{const i=await m(e.id),n=new Set((i||[]).map(c=>(c.title||"").toLowerCase()));for(const c of s.topics)if(!n.has(c.title.toLowerCase()))try{await x({sectionId:e.id,title:c.title,content:c.content}),l++}catch{}}catch{}}try{const e=(await p()||[]).find(i=>(i.title||"").toLowerCase()==="����������");if(e){let n=(await m(e.id)).find(c=>/vip/i.test(String(c.title||"")));if(n||(n=await x({sectionId:e.id,title:"VIP: ��� ��������",content:`����� �������� VIP ������, �������� ��� � Telegram: https://t.me/pavel

������������ VIP:
- ������� VIP � �������
- ��������� �������� �����
- ����������� ������ � ��������� ��������
- ���������� ��������� ������`})),n&&!n.pinned)try{await y(n.id,{pinned:!0})}catch{}}}catch{}return{createdSections:r,createdTopics:l}}function I(){const[a,r]=d.useState(null),[l,s]=d.useState(()=>{try{return localStorage.getItem("seed:done")==="1"}catch{return!1}}),[e,i]=d.useState("");d.useEffect(()=>{(async()=>{try{r(await u())}catch{}})()},[]);const n=!!a&&a.role==="developer";async function c(){try{i("Seeding...");const o=await g();i(`Sections: +${o.createdSections}; Topics: +${o.createdTopics}`);try{localStorage.setItem("seed:done","1"),s(!0)}catch{}}catch(o){i((o==null?void 0:o.message)||"Failed")}}return n?t.jsx("main",{className:"min-h-screen",style:{background:"#0d0d12",color:"#f8fafc"},children:t.jsx("div",{className:"mx-auto max-w-3xl px-4 py-12",children:t.jsxs("div",{className:"card p-6",children:[t.jsx("div",{className:"mb-2 text-xs uppercase tracking-[0.28em] text-zinc-400/80",children:"Maintenance"}),t.jsx("h1",{className:"text-xl font-semibold",children:"Forum Seed"}),t.jsx("p",{className:"mt-1 text-sm opacity-80",children:"Creates baseline sections and topics. Safe to re-run; skips existing."}),t.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[l?t.jsx("span",{className:"text-sm opacity-80",children:"Already seeded (seed:done)"}):t.jsx("button",{className:"btn btn-primary",onClick:c,children:"Seed forum"}),t.jsx(f,{to:"/forum",className:"btn",children:"Back to forum"})]}),e&&t.jsx("div",{className:"mt-3 rounded-lg border p-2 text-sm opacity-80",style:{borderColor:"var(--border)"},children:e})]})})}):t.jsx("main",{className:"min-h-screen",style:{background:"#0d0d12",color:"#f8fafc"},children:t.jsx("div",{className:"mx-auto max-w-3xl px-4 py-12",children:t.jsx("div",{className:"card p-6 text-sm text-zinc-300",children:"Only developers can access this page."})})})}export{I as default};
