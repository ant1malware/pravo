import{v as p,j as e,C as j}from"./index-CAkmMo7n.js";import{u as N,L as u,r as f}from"./react-vendor-DTkXckhQ.js";import{A as b,S as g}from"./icons-wEjUy8Cq.js";function E(){const{id:c}=N(),s=p.find(i=>i.id===c);if(!s)return e.jsxs("div",{className:"p-4",children:["\u041D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E. ",e.jsx(u,{to:"/",className:"text-blue-600 underline",children:"\u041D\u0430 \u0433\u043B\u0430\u0432\u043D\u0443\u044E"})]});const n=f.useMemo(()=>z(s.text||""),[s==null?void 0:s.text]);return e.jsxs("div",{className:"min-h-screen text-zinc-900 dark:text-zinc-100",children:[e.jsx("header",{className:"sticky top-0 z-20 border-b border-zinc-200 bg-white/80 backdrop-blur dark:border-zinc-800 dark:bg-zinc-900/70",children:e.jsxs("div",{className:"mx-auto flex max-w-6xl items-center justify-between gap-3 px-4 py-3",children:[e.jsxs(u,{to:"/",className:"flex items-center gap-1 text-sm hover:underline",children:[e.jsx(b,{className:"h-4 w-4"})," \u041D\u0430\u0437\u0430\u0434"]}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-5 w-5"}),e.jsx("h1",{className:"text-lg font-bold leading-tight",children:s.title})]}),e.jsx(j,{})]}),e.jsx("div",{className:"text-xs text-zinc-500",children:s.updated?`\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u043E: ${s.updated}`:""})]})}),e.jsxs("main",{className:"mx-auto grid max-w-6xl grid-cols-1 gap-5 px-4 py-5 md:grid-cols-[260px,1fr]",children:[e.jsx("aside",{className:"hidden md:block",children:e.jsxs("div",{className:"sticky top-16 rounded-2xl border border-zinc-200 bg-white/70 p-3 text-sm dark:border-zinc-800 dark:bg-zinc-900/50",children:[e.jsx("div",{className:"mb-2 text-xs font-semibold text-zinc-600 dark:text-zinc-400",children:"\u041E\u0433\u043B\u0430\u0432\u043B\u0435\u043D\u0438\u0435"}),n.toc.length?e.jsx("ul",{className:"space-y-1",children:n.toc.map(i=>e.jsx("li",{children:e.jsx("a",{className:"underline decoration-dotted hover:no-underline",href:`#${i.id}`,children:i.text})},i.id))}):e.jsx("div",{className:"text-xs text-zinc-500",children:"\u0417\u0430\u0433\u043E\u043B\u043E\u0432\u043A\u0438 \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B."})]})}),e.jsxs("section",{children:[e.jsxs("nav",{className:"mb-3 text-xs text-zinc-500",children:[e.jsx(u,{to:"/",className:"underline decoration-dotted hover:no-underline",children:"\u0413\u043B\u0430\u0432\u043D\u0430\u044F"}),e.jsx("span",{className:"mx-1",children:"/"}),e.jsx("span",{children:"\u0412\u0423"}),e.jsx("span",{className:"mx-1",children:"/"}),e.jsx("span",{className:"text-zinc-700 dark:text-zinc-300",children:s.title})]}),e.jsx("div",{className:"reading",children:e.jsx("div",{className:"rounded-2xl border border-zinc-200 bg-white p-4 dark:border-zinc-800 dark:bg-zinc-900",children:e.jsx("div",{className:"vu prose prose-zinc max-w-none text-sm leading-relaxed dark:prose-invert",children:n.nodes})})})]})]})]})}function v(c){return c.toLowerCase().replace(/[^\p{L}\p{N}\s-]/gu,"").trim().replace(/\s+/g,"-").slice(0,80)}function z(c){const s=c.replace(/\r\n?/g,`
`).split(`
`),n=[],i=[];let a=0;const x=/^\s*(Глава|Раздел)\s+(\d+[\.:)]?)\s*(.*)$/i,o=/^\s*(\d+(?:\.\d+)+)\.?\s+(.*)$/,m=/^\s*(\d+)\.\s+(.*)$/;for(const h of s){const r=h.trim();if(!r){n.push(e.jsx("div",{className:"h-3"},a++));continue}let t=r.match(x);if(t){const d=`${t[1]} ${t[2]}${t[3]?" \u2014 "+t[3]:""}`,l=v(d);i.push({id:l,text:d}),n.push(e.jsx("h2",{id:l,children:d},a++));continue}if(t=r.match(o)||r.match(m),t){n.push(e.jsxs("p",{className:"flex",children:[e.jsx("span",{className:"num",children:t[1]}),e.jsx("span",{children:t[2]})]},a++));continue}n.push(e.jsx("p",{children:r},a++))}return{nodes:n,toc:i}}export{E as default};
