import{l as pe,j as e,C as we}from"./index-BW22xFmf.js";import{u as ke,b as ve,e as ye,r as n,L as oe}from"./react-vendor-DTkXckhQ.js";import{F as je,t as Ne}from"./FavStar-C41_KOVN.js";import{d as ze,p as Se}from"./purify.es-DnfDK_hS.js";import{h as Ee}from"./lawSections-zk2ip3TD.js";import{A as Ce,B as Te,r as Le,b as Ie,P as Ae,a as V,k as Re,x as $e,y as Me,z as Fe,D as Pe,G as De,H as Ve}from"./icons-uJbpPyzE.js";const Be=c=>c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),S=(c,l,s)=>Math.min(s,Math.max(l,c)),He=c=>S(c,0,1),ae=(c,l=250)=>{let s;return(...o)=>{clearTimeout(s),s=setTimeout(()=>c(...o),l)}};function ie(c){return(c||"").toLowerCase().replace(/[«»"'\s]+/g," ").trim()}function qe(c,l){let s=c.replace(/\r\n?/g,`
`);return s=s.replace(/^\s*#\s+(.+)\s*\n/,(o,d)=>ie(d)===ie(l)?"":o),s=s.replace(/^(?![#>])\s*(Глава\s+\d+[^\n]*)$/gim,"## $1"),s=s.replace(/^(?![#>])\s*(Раздел\s+\d+[^\n]*)$/gim,"## $1"),s=s.replace(/^(?![#>])\s*((?:Статья|Ст\.?|Ст)\s+\d+(?:\.\d+)?[^\n]*)$/gim,"### $1"),s=s.replace(/^(#{2,6})([^\s#])/gm,"$1 $2"),s=s.replace(/^\s*(\d+)\)\s+/gm,"$1. "),s}function Oe(c){const l=[],s=[];for(const o of c){const d={...o,children:[]};for(;s.length&&s[s.length-1].level>=o.level;)s.pop();s.length?s[s.length-1].children.push(d):l.push(d),s.push(d)}return l}function We(c){const l=new DOMParser().parseFromString(c,"text/html");try{const d="/pravo/";l.querySelectorAll("img").forEach(i=>{const f=(i.getAttribute("src")||"").trim();if(/^(?:\/)?img\//.test(f)){const g=f.replace(/^\/+/,"");i.setAttribute("src",`${d}${g}`)}const x=i.getAttribute("alt")||"";!i.getAttribute("title")&&x&&i.setAttribute("title",x),i.setAttribute("loading","lazy"),i.setAttribute("decoding","async")})}catch{}l.querySelectorAll("a[href]").forEach(d=>{const i=d.getAttribute("href")||"";/^https?:\/\//i.test(i)&&(d.setAttribute("target","_blank"),d.setAttribute("rel","noopener noreferrer"))});const s=Array.from(l.querySelectorAll("h2, h3, h4")),o=[];return s.forEach((d,i)=>{const f=d.textContent||"",x=Ee(f)||`h-${i+1}`;x&&(d.id=x);const g=d.tagName==="H2"?2:d.tagName==="H3"?3:4;o.push({id:x,text:f,level:g})}),{html:l.body.innerHTML,toc:o}}function _e(c,l){if(!l.length)return c;const s=new DOMParser().parseFromString(c,"text/html"),o=new Set(["SCRIPT","STYLE","CODE","PRE","MARK","KBD"]),d=new RegExp(`(${l.map(Be).join("|")})`,"gi"),i=s.createTreeWalker(s.body,NodeFilter.SHOW_TEXT,{acceptNode(x){var k;const g=((k=x.parentElement)==null?void 0:k.tagName)||"";return o.has(g)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),f=[];for(;i.nextNode();){const x=i.currentNode;d.test(x.nodeValue||"")&&f.push(x)}return f.forEach(x=>{const g=x.nodeValue||"",k=s.createDocumentFragment();let m=0;g.replace(d,(v,ce,j)=>{j>m&&k.appendChild(s.createTextNode(g.slice(m,j)));const y=s.createElement("mark");return y.textContent=v,k.appendChild(y),m=j+v.length,v}),m<g.length&&k.appendChild(s.createTextNode(g.slice(m))),x.replaceWith(k)}),s.body.innerHTML}function Je(){var se;const{slug:c}=ke(),l=ve(),s=ye(),o=pe.find(r=>r.slug===c),[d,i]=n.useState(""),[f,x]=n.useState([]),[g,k]=n.useState([]),[m,v]=n.useState(""),[ce,j]=n.useState(!1),[y,_]=n.useState(""),[le,de]=n.useState(0),[E,N]=n.useState(!1),[R,K]=n.useState(!1),[$,M]=n.useState(()=>Number(localStorage.getItem("law.fontScale")||105)),[z,U]=n.useState(()=>localStorage.getItem("law.narrow")==="1"),[F,ue]=n.useState(()=>Number(localStorage.getItem("law.tocWidth")||300)),[X,P]=n.useState({}),[C,Y]=n.useState(""),T=n.useRef(null),Q=n.useRef(null),D=n.useRef(null),L=n.useRef(0),G=n.useRef(null),B=n.useRef(!1),J=n.useRef(0),Z=n.useRef(0);n.useEffect(()=>{if(!o)return;document.title=o.title;const r=qe(o.content,o.title),t=ze.parse(r,{gfm:!0,breaks:!0}),a=Se.sanitize(t,{USE_PROFILES:{html:!0}}),{html:u,toc:h}=We(a);i(u),x(h),k(Oe(h)),_(""),P({})},[c]),n.useEffect(()=>{const t=new URLSearchParams(l.search).get("q")||"";t&&v(t)},[l.search]);const ee=n.useMemo(()=>ae(r=>{const t=new URLSearchParams(l.search);r?t.set("q",r):t.delete("q"),s({pathname:l.pathname,search:t.toString()},{replace:!0})},300),[l.pathname,l.search,s]);n.useEffect(()=>{ee(m)},[m,ee]),n.useEffect(()=>{const r=T.current;if(!r||!o)return;async function a(u){var w,b;const h=u.target;if(!h)return;const p=((w=h.closest)==null?void 0:w.call(h,"a"))||null;if(p&&((b=p.getAttribute("href"))!=null&&b.startsWith("#"))){u.preventDefault();const ne=p.getAttribute("href").slice(1),O=r.querySelector(`#${CSS.escape(ne)}`);if(O){try{O.scrollIntoView({behavior:"smooth",block:"start"})}catch{O.scrollIntoView()}history.replaceState(null,"",`#${ne}`)}}}return r.addEventListener("click",a),()=>r.removeEventListener("click",a)},[d,o,l.pathname]);const I=n.useMemo(()=>{if(!m.trim()||!d)return d;const r=m.toLowerCase().replace(/ё/g,"е").trim().split(/\s+/).filter(Boolean).filter(t=>t.length>=2||/\d/.test(t));return r.length?_e(d,r):d},[m,d]);n.useEffect(()=>{const r=T.current;if(!r||(D.current=r.querySelectorAll("mark"),L.current=0,!m.trim()))return;const t=D.current[0];if(t)try{t.scrollIntoView({behavior:"smooth",block:"center"})}catch{t.scrollIntoView()}},[I,m]);const A=n.useCallback(r=>{const t=D.current;if(!t||t.length===0)return;L.current=(L.current+r+t.length)%t.length;const a=t[L.current];try{a.scrollIntoView({behavior:"smooth",block:"center"})}catch{a.scrollIntoView()}},[]);n.useEffect(()=>{const r=T.current;if(!r)return;const t=r.querySelectorAll("h2[id], h3[id], h4[id]");if(!t.length)return;const a=new IntersectionObserver(u=>{var p;const h=u.filter(w=>w.isIntersecting).sort((w,b)=>w.boundingClientRect.top-b.boundingClientRect.top);(p=h[0])!=null&&p.target&&_(h[0].target.id)},{rootMargin:"0px 0px -70% 0px",threshold:[0,1]});return t.forEach(u=>a.observe(u)),()=>a.disconnect()},[I]),n.useEffect(()=>{const r=ae(a=>{c&&localStorage.setItem(`law.pos.${c}`,String(a))},300),t=()=>{const a=T.current;if(!a)return;const u=a.getBoundingClientRect(),h=window.scrollY||document.documentElement.scrollTop,p=h+u.top,w=a.offsetHeight-window.innerHeight,b=He((h-p)/Math.max(w,1));de(Math.round(b*100)),r(window.scrollY||0)};return t(),window.addEventListener("scroll",t,{passive:!0}),window.addEventListener("resize",t),()=>{window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[I,c]),n.useEffect(()=>{if(!c)return;const r=window.location.hash.slice(1);if(r){const a=document.getElementById(r);a&&setTimeout(()=>{try{a.scrollIntoView({behavior:"instant",block:"start"})}catch{a.scrollIntoView()}},0);return}const t=Number(localStorage.getItem(`law.pos.${c}`)||0);t>0&&window.scrollTo({top:t})},[c,I]),n.useEffect(()=>(document.documentElement.style.overflow=E||R?"hidden":"",()=>void(document.documentElement.style.overflow="")),[E,R]);const H=n.useCallback(()=>{if(window.history.length>1){s(-1);return}const r=l.state;if(r!=null&&r.from){s(r.from);return}s("/")},[s,l.state]);if(n.useEffect(()=>{const r=t=>{var h,p,w;const a=(h=t.target)==null?void 0:h.tagName,u=a==="INPUT"||a==="TEXTAREA"||((p=t.target)==null?void 0:p.isContentEditable);if(!u&&(t.key==="Backspace"||t.altKey&&t.key==="ArrowLeft")){t.preventDefault(),H();return}!u&&t.key==="/"&&(t.preventDefault(),(w=Q.current)==null||w.focus()),t.key==="Escape"&&(R&&K(!1),E&&N(!1),m&&v("")),!u&&(t.key==="Enter"||t.key==="ArrowDown")&&m&&(t.preventDefault(),A(1)),!u&&t.key==="ArrowUp"&&m&&(t.preventDefault(),A(-1)),!u&&(t.key==="["||t.ctrlKey&&t.key==="-")&&(t.preventDefault(),M(b=>S(b-5,90,150))),!u&&(t.key==="]"||t.ctrlKey&&t.key==="=")&&(t.preventDefault(),M(b=>S(b+5,90,150))),!u&&t.key.toLowerCase()==="t"&&N(b=>!b),!u&&t.key.toLowerCase()==="w"&&U(b=>!b),!u&&t.key.toLowerCase()==="f"&&o&&Ne("law",o.slug,{title:o.title,url:`/laws/${o.slug}`})};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[H,A,m,R,E,o]),n.useEffect(()=>{localStorage.setItem("law.fontScale",String($))},[$]),n.useEffect(()=>{localStorage.setItem("law.narrow",z?"1":"0")},[z]),n.useEffect(()=>{localStorage.setItem("law.tocWidth",String(F))},[F]),!o)return e.jsxs("div",{className:"p-4",children:["Закон не найден. ",e.jsx(oe,{to:"/",className:"text-blue-600 underline",children:"На главную"})]});const he=async()=>{await navigator.clipboard.writeText(window.location.href),j(!0),setTimeout(()=>j(!1),1200)},me=()=>window.print(),q=((se=D.current)==null?void 0:se.length)||0,xe=q?L.current+1:0,te=r=>P(t=>({...t,[r]:!t[r]})),ge=()=>P({}),be=()=>{const r={};for(const t of g)r[t.id]=!0;P(r)},fe=(r,t)=>r.toLowerCase().includes(t.toLowerCase().trim()),re=n.useMemo(()=>{if(!C.trim())return g;const r=t=>t.map(a=>{const u=r(a.children);return fe(a.text,C)||u.length?{...a,children:u}:null}).filter(Boolean);return r(g)},[g,C]);return n.useEffect(()=>{if(!y)return;const t=document.getElementById("toc-list")||null||G.current;if(!t)return;const a=t.querySelector(`[data-id="${CSS.escape(y)}"]`);if(!a)return;const u=a.getBoundingClientRect(),h=t.getBoundingClientRect();(u.top<h.top||u.bottom>h.bottom)&&a.scrollIntoView({block:"nearest"})},[y]),n.useEffect(()=>{const r=a=>{if(!B.current)return;const u=a.clientX-J.current,h=S(u+Z.current,240,420);ue(h)},t=()=>B.current=!1;return window.addEventListener("mousemove",r),window.addEventListener("mouseup",t),()=>{window.removeEventListener("mousemove",r),window.removeEventListener("mouseup",t)}},[]),e.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-zinc-50 to-white text-zinc-900 dark:from-zinc-950 dark:to-zinc-900 dark:text-zinc-100",children:[e.jsxs("header",{className:"sticky top-0 z-40 border-b border-white/50 bg-white/70 backdrop-blur-xl dark:border-white/10 dark:bg-zinc-900/60 print:hidden",children:[e.jsxs("div",{className:"relative mx-auto max-w-6xl px-4 py-3",children:[e.jsx("div",{"aria-hidden":!0,className:"pointer-events-none absolute inset-x-10 -top-16 h-24 rounded-[2rem] blur-2xl",style:{background:"linear-gradient(90deg, rgba(14,165,233,.18), rgba(139,92,246,.18))"}}),e.jsxs("div",{className:"relative flex items-center justify-between gap-3",children:[e.jsxs("button",{type:"button",onClick:H,className:"group inline-flex items-center gap-2 rounded-full border border-zinc-200/80 bg-white/70 px-3 py-1.5 text-sm text-zinc-700 shadow-sm backdrop-blur transition hover:shadow-md dark:border-white/10 dark:bg-zinc-900/60 dark:text-zinc-100",title:"Назад",children:[e.jsx("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-gradient-to-br from-sky-500 to-indigo-500 text-white",children:e.jsx(Ce,{className:"h-4 w-4 transition-transform group-hover:-translate-x-0.5"})}),e.jsx("span",{className:"hidden sm:inline",children:"Назад"})]}),e.jsx("div",{className:"flex min-w-0 flex-1 items-center justify-center text-center",children:e.jsxs("div",{className:"flex min-w-0 flex-col items-center",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"inline-flex h-6 w-6 items-center justify-center rounded-xl bg-gradient-to-br from-sky-500 to-indigo-500 text-white shadow-sm",children:e.jsx(Te,{className:"h-4 w-4"})}),e.jsx("h1",{className:"truncate text-base font-bold leading-tight sm:text-lg",children:o.title}),e.jsx(Le,{className:"hidden h-5 w-5 text-indigo-400 sm:block"})]}),e.jsx(we,{})]})}),e.jsxs("div",{className:"hidden items-center gap-2 sm:flex",children:[e.jsx("button",{className:"rounded-xl border border-zinc-200/80 bg-white/70 px-2 py-1 text-xs shadow-sm backdrop-blur hover:shadow-md dark:border-white/10 dark:bg-zinc-900/60",title:"Скопировать ссылку на страницу",onClick:he,children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ie,{className:"h-3.5 w-3.5"})," Ссылка"]})}),e.jsx("button",{className:"rounded-xl border border-zinc-200/80 bg-white/70 px-2 py-1 text-xs shadow-sm backdrop-blur hover:shadow-md dark:border-white/10 dark:bg-zinc-900/60",title:"Печать",onClick:me,children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ae,{className:"h-3.5 w-3.5"})," Печать"]})}),e.jsx(je,{kind:"law",id:o.slug,title:o.title,url:`/laws/${o.slug}`}),o.updated?e.jsxs("span",{className:"rounded-full bg-gradient-to-r from-sky-500/10 to-indigo-500/10 px-2 py-0.5 text-[11px] text-sky-700 ring-1 ring-sky-500/20 dark:text-sky-300",children:["Обновлено: ",o.updated]}):null]}),e.jsxs("div",{className:"flex items-center gap-2 sm:hidden",children:[e.jsx("button",{onClick:()=>K(!0),className:"rounded-xl border border-zinc-200/80 bg-white/70 p-1.5 shadow-sm backdrop-blur dark:border-white/10 dark:bg-zinc-900/60",title:"Поиск",children:e.jsx(V,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>N(!0),className:"rounded-xl border border-zinc-200/80 bg-white/70 p-1.5 shadow-sm backdrop-blur dark:border-white/10 dark:bg-zinc-900/60",title:"Содержание",children:e.jsx(Re,{className:"h-5 w-5"})})]})]})]}),e.jsx("div",{className:"h-0.5 w-full bg-gradient-to-r from-zinc-200 to-zinc-200 dark:from-zinc-800 dark:to-zinc-800",children:e.jsx("div",{className:"h-0.5 transition-[width] duration-150 ease-out",style:{width:`${le}%`,background:"linear-gradient(90deg, #0ea5e9, #8b5cf6)"}})})]}),e.jsx("div",{className:"sticky top-[3.1rem] z-30 hidden border-b border-white/40 bg-white/60 backdrop-blur-xl dark:border-white/10 dark:bg-zinc-900/50 sm:block print:hidden",children:e.jsxs("div",{className:"mx-auto flex max-w-6xl items-center gap-3 px-4 py-2 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($e,{className:"h-3.5 w-3.5 text-zinc-500"}),e.jsx("button",{className:"rounded-lg border border-zinc-200/80 bg-white/70 p-1 hover:shadow-sm dark:border-white/10 dark:bg-zinc-900/60",onClick:()=>M(r=>S(r-5,90,150)),title:"Меньше",children:e.jsx(Me,{className:"h-3.5 w-3.5"})}),e.jsxs("span",{className:"tabular-nums w-12 text-center text-zinc-600 dark:text-zinc-300",children:[$,"%"]}),e.jsx("button",{className:"rounded-lg border border-zinc-200/80 bg-white/70 p-1 hover:shadow-sm dark:border-white/10 dark:bg-zinc-900/60",onClick:()=>M(r=>S(r+5,90,150)),title:"Больше",children:e.jsx(Fe,{className:"h-3.5 w-3.5"})})]}),e.jsx("div",{className:"h-5 w-px bg-zinc-200/70 dark:bg-white/10"}),e.jsxs("button",{className:"inline-flex items-center gap-2 rounded-xl border border-zinc-200/80 bg-white/70 px-2 py-1 hover:shadow-sm dark:border-white/10 dark:bg-zinc-900/60",onClick:()=>U(r=>!r),title:z?"Сделать шире":"Узкая колонка",children:[z?e.jsx(Pe,{className:"h-3.5 w-3.5"}):e.jsx(De,{className:"h-3.5 w-3.5"}),z?"Шире":"Узко"]}),e.jsx("div",{className:"h-5 w-px bg-zinc-200/70 dark:bg-white/10"}),e.jsxs("div",{className:"hidden items-center gap-2 md:flex",children:[e.jsx(V,{className:"h-4 w-4 text-zinc-500"}),e.jsx("input",{ref:Q,className:"w-[420px] rounded-xl border border-zinc-200/80 bg-white/70 px-3 py-1.5 outline-none ring-0 backdrop-blur transition placeholder:text-zinc-400 focus:border-sky-400 focus:ring-2 focus:ring-sky-200 dark:border-white/10 dark:bg-zinc-900/60 dark:focus:border-sky-500/60 dark:focus:ring-sky-500/20",placeholder:"Поиск по тексту (/ — фокус, Enter/↓ — след., ↑ — пред.)",value:m,onChange:r=>v(r.target.value)}),!!m&&e.jsxs(e.Fragment,{children:[e.jsx("button",{className:"rounded-xl border border-zinc-200/80 bg-white/70 px-2 py-1 hover:shadow-sm dark:border-white/10 dark:bg-zinc-900/60",title:"Предыдущее совпадение",onClick:()=>A(-1),children:"↑"}),e.jsx("button",{className:"rounded-xl border border-zinc-200/80 bg-white/70 px-2 py-1 hover:shadow-sm dark:border-white/10 dark:bg-zinc-900/60",title:"Следующее совпадение",onClick:()=>A(1),children:"↓"}),e.jsx("div",{className:"min-w-[90px] text-center text-zinc-500",children:q?`${xe}/${q}`:""}),e.jsx("button",{className:"rounded-xl border border-zinc-200/80 bg-white/70 px-2 py-1 hover:shadow-sm dark:border-white/10 dark:bg-zinc-900/60",title:"Очистить",onClick:()=>v(""),children:"Очистить"})]})]})]})}),e.jsxs("main",{className:"mx-auto grid max-w-6xl grid-cols-1 gap-5 px-4 py-6 md:grid-cols-[var(--tocW),1fr]",style:{"--tocW":`${F}px`},children:[e.jsxs("aside",{className:"relative hidden md:block print:hidden",children:[e.jsx("div",{className:"absolute -right-2 top-0 z-10 hidden h-full w-4 cursor-col-resize md:block",onMouseDown:r=>{B.current=!0,J.current=r.clientX,Z.current=F},title:"Потяни, чтобы изменить ширину"}),e.jsxs("div",{className:"sticky top-[7.6rem] rounded-2xl border border-white/60 bg-white/80 p-3 text-sm shadow-lg shadow-black/5 backdrop-blur-xl ring-1 ring-black/5 dark:border-white/10 dark:bg-zinc-900/60 dark:ring-white/5",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 font-semibold",children:[e.jsx("div",{className:"inline-flex h-5 w-5 items-center justify-center rounded-md bg-gradient-to-br from-sky-500 to-indigo-500 text-white",children:e.jsx(Ve,{className:"h-3.5 w-3.5"})}),"Содержание"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{className:"rounded-lg border border-zinc-200/80 bg-white/70 px-2 py-1 text-xs hover:shadow-sm dark:border-white/10 dark:bg-zinc-900/60",onClick:ge,title:"Развернуть всё",children:"+ всё"}),e.jsx("button",{className:"rounded-lg border border-zinc-200/80 bg-white/70 px-2 py-1 text-xs hover:shadow-sm dark:border-white/10 dark:bg-zinc-900/60",onClick:be,title:"Свернуть всё",children:"− всё"}),null]})]}),e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4 text-zinc-500"}),e.jsx("input",{value:C,onChange:r=>Y(r.target.value),placeholder:"Фильтр по содержанию…",className:"w-full rounded-lg border border-zinc-200/80 bg-white/70 px-2 py-1 text-xs outline-none ring-0 backdrop-blur transition placeholder:text-zinc-400 focus:border-sky-400 focus:ring-2 focus:ring-sky-200 dark:border-white/10 dark:bg-zinc-900/60 dark:focus:border-sky-500/60 dark:focus:ring-sky-500/20"})]}),f.length?e.jsx("div",{ref:G,id:"toc-list",className:"max-h-[60vh] overflow-y-auto pr-1.5",children:e.jsx(W,{nodes:re,activeId:y,collapsed:X,onToggle:r=>te(r),onClick:r=>{const t=document.getElementById(r);if(t){try{t.scrollIntoView({behavior:"smooth",block:"start"})}catch{t.scrollIntoView()}history.replaceState(null,"",`#${r}`)}}})}):e.jsx("div",{className:"text-xs text-zinc-500",children:"Добавьте заголовки (##/###) в Markdown, чтобы появилось оглавление."})]})]}),e.jsxs("section",{children:[e.jsxs("nav",{className:"mb-4 flex flex-wrap items-center gap-1 text-xs text-zinc-500 print:hidden",children:[e.jsx(oe,{to:"/",className:"group inline-flex items-center gap-1 rounded-lg px-1.5 py-0.5 hover:bg-zinc-100 dark:hover:bg-zinc-800/60",children:"Главная"}),e.jsx("span",{className:"text-zinc-400",children:"/"}),e.jsx("span",{className:"rounded-lg px-1.5 py-0.5 text-zinc-600 dark:text-zinc-300",children:"Законы"}),e.jsx("span",{className:"text-zinc-400",children:"/"}),e.jsx("span",{className:"rounded-lg bg-gradient-to-r from-sky-500/10 to-indigo-500/10 px-1.5 py-0.5 text-zinc-700 dark:text-zinc-200",children:o.title})]}),e.jsx("div",{className:`reading ${z?"max-w-[84ch]":"max-w-none"}`,children:e.jsxs("div",{className:"overflow-hidden rounded-3xl border border-white/60 bg-white/80 shadow-xl shadow-black/5 backdrop-blur-xl ring-1 ring-black/5 dark:border-white/10 dark:bg-zinc-900/60 dark:ring-white/5",children:[e.jsx("div",{className:"h-1 w-full",style:{background:"linear-gradient(90deg, #0ea5e9, #8b5cf6)"},"aria-hidden":!0}),e.jsx("div",{className:"law prose prose-zinc max-w-none list-inside px-5 py-5 md:px-7 md:py-7 dark:prose-invert",style:{fontSize:`${$}%`},ref:T,dangerouslySetInnerHTML:{__html:I}})]})})]})]}),E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-end justify-center bg-black/55 backdrop-blur-sm md:hidden",role:"dialog","aria-modal":"true",onClick:r=>{r.target===r.currentTarget&&N(!1)},children:e.jsxs("div",{className:"w-full max-w-md rounded-t-3xl border border-white/10 bg-white/95 p-4 shadow-xl dark:border-white/10 dark:bg-zinc-900/95",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-zinc-700 dark:text-zinc-200",children:"����������"}),e.jsx("button",{onClick:()=>N(!1),className:"rounded-full border border-zinc-200/70 px-3 py-1 text-xs text-zinc-600 hover:bg-zinc-100 dark:border-white/10 dark:text-zinc-300 dark:hover:bg-zinc-800",children:"�������"})]}),e.jsx("div",{className:"mb-3",children:e.jsxs("div",{className:"flex items-center gap-2 rounded-xl border border-zinc-200/80 bg-white/70 px-2 py-1 text-xs shadow-sm dark:border-white/10 dark:bg-zinc-900/60",children:[e.jsx(V,{className:"h-3.5 w-3.5 text-zinc-500 dark:text-zinc-400"}),e.jsx("input",{value:C,onChange:r=>Y(r.target.value),placeholder:"����� �� ����������",className:"w-full bg-transparent outline-none"})]})}),e.jsx("div",{className:"max-h-[60vh] overflow-y-auto pr-1",children:e.jsx(W,{nodes:re,activeId:y,collapsed:X,onToggle:r=>te(r),onClick:r=>{N(!1);const t=document.getElementById(r);if(t){try{t.scrollIntoView({behavior:"smooth",block:"start"})}catch{t.scrollIntoView()}history.replaceState(null,"",`#${r}`)}}})})]})})]})}function W({nodes:c,activeId:l,collapsed:s,onToggle:o,onClick:d}){return e.jsx("ul",{className:"space-y-1",children:c.map(i=>e.jsxs("li",{children:[e.jsxs("div",{className:`flex items-center gap-2 rounded-md px-2 py-1 ${l===i.id?"bg-sky-500/10 text-sky-700 dark:text-sky-300":""}`,children:[i.children.length?e.jsx("button",{onClick:()=>o(i.id),className:"rounded border border-zinc-200/80 px-1 text-[10px] dark:border-white/10",children:s[i.id]?"+":"−"}):e.jsx("span",{className:"w-4"}),e.jsx("a",{href:`#${i.id}`,className:"truncate",onClick:f=>{f.preventDefault(),d(i.id)},"data-id":i.id,title:i.text,children:i.text})]}),!!i.children.length&&!s[i.id]&&e.jsx("div",{className:"ml-4",children:e.jsx(W,{nodes:i.children,activeId:l,collapsed:s,onToggle:o,onClick:d})})]},i.id))})}export{Je as default};
