import{j as e,o as U,b as O,m as I}from"./index-cmJC3FCm.js";import{R as j,L as k}from"./react-vendor-DTkXckhQ.js";import{F as W}from"./ForumSubnav-CTlKiJP_.js";import{l as D,g as M}from"./forumStore-DUt9vuUB.js";import{n as P,a as V,z as q}from"./icons-h3n1fb3S.js";import"./forumRemote-D5s3MT8n.js";function G({posts:t=0,likes:r=0,topics:i=0}){return i*4+t*1+r*2}function K(t){return t>=1e3?{name:"Expert",color:"#22c55e"}:t>=500?{name:"Gold",color:"#eab308"}:t>=250?{name:"Silver",color:"#a1a1aa"}:t>=100?{name:"Bronze",color:"#d97706"}:{name:"Newbie",color:"#8b5cf6"}}function Q({points:t}){const r=K(t);return e.jsxs("span",{className:"inline-flex items-center gap-2 rounded-full border px-3 py-1 text-xs",style:{borderColor:"var(--border)",background:"var(--surface-2)",color:r.color},children:[e.jsx("span",{className:"h-2 w-2 rounded-full",style:{background:r.color}}),r.name," • ",t," pts"]})}const Y=new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"short",year:"numeric"}),H={developer:{label:"�����������",color:"#22d3ee"},admin:{label:"�������������",color:"#e5e7eb"},moderator:{label:"���������",color:"#ef4444"},vip:{label:"Premium",color:"#eab308"},user:{label:"������������",color:"#94a3b8"},newbie:{label:"�������",color:"#22d3ee"}};function h(t){switch(t){case"developer":return"linear-gradient(90deg, #22c55e, #84cc16)";case"admin":return"linear-gradient(90deg, #ffffff, #d1d5db)";case"moderator":return"linear-gradient(90deg, #ef4444, #f43f5e)";case"vip":return"linear-gradient(90deg, #eab308, #facc15)";case"user":return"linear-gradient(90deg, #a855f7, #8b5cf6)";case"newbie":return"linear-gradient(90deg, #4c1d95, #6d28d9)";default:return null}}function S(t){if(!t)return!1;if(!t.until)return!0;const r=new Date(t.until).getTime();return!Number.isNaN(r)&&r>Date.now()}function A(t){const r=t.lastActiveAt;if(!r)return!1;const i=new Date(r).getTime();if(Number.isNaN(i))return!1;const u=5*60*1e3;return i>Date.now()-u}function J({role:t}){const r=H[t]||{label:t,color:"#94a3b8"};return e.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-[0.26em]",style:{color:r.color},children:r.label})}function F({member:t,showPresence:r=!0}){const i=t.profile.accentFrom||"#22d3ee",u=t.profile.accentTo||"#8b5cf6",p=t.username.slice(0,2).toUpperCase(),m=A(t);return e.jsxs("div",{className:"relative h-16 w-16 overflow-hidden rounded-2xl border border-white/10 shadow-[0_20px_45px_-25px_rgba(15,23,42,0.9)]",children:[t.profile.avatarData?e.jsx("img",{src:t.profile.avatarData,alt:t.username,className:"h-full w-full object-cover",loading:"lazy"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center",style:{background:`linear-gradient(135deg, ${i}, ${u})`},children:e.jsx("span",{className:"text-lg font-semibold uppercase tracking-wide text-white/90",children:p})}),r&&e.jsx("span",{title:m?"Online":"Offline",className:`absolute -right-0.5 -bottom-0.5 h-3.5 w-3.5 rounded-full border-2 ${m?"border-emerald-900/60 bg-emerald-400":"border-zinc-900/70 bg-zinc-400/70"}`,children:m&&e.jsx("span",{className:"absolute inset-0 -z-10 animate-ping rounded-full bg-emerald-400/50"})})]})}function z(t){if(typeof t.score=="number")return t.score;const r=t.stats||{},i=typeof r.posts=="number"?r.posts:t.posts,u=typeof r.likes=="number"?r.likes:t.likes,p=typeof r.topics=="number"?r.topics:t.topics;return G({posts:i,likes:u,topics:p})}function X({member:t,highlight:r}){const i=t.stats||{},u=typeof i.posts=="number"?i.posts:t.posts,p=typeof i.topics=="number"?i.topics:t.topics,m=typeof i.likes=="number"?i.likes:t.likes,g=z(t),f=t.profile.accentFrom||"#22d3ee";t.profile.accentTo;const N=t.createdAt?Y.format(new Date(t.createdAt)):"",v=S(t.bans||t.ban),y=A(t);return e.jsxs(k,{to:`/forum/profile/${t.username}`,className:`group relative overflow-hidden rounded-3xl border border-white/10 bg-white/[0.04] p-5 transition-all duration-200 hover:-translate-y-0.5 hover:border-cyan-400/60 hover:bg-white/[0.06] ${r?"border-cyan-400/70 ring-2 ring-cyan-400/30":""}`,children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 opacity-80 transition duration-300 group-hover:opacity-100",style:{background:`linear-gradient(130deg, ${f}22, transparent 55%)`}}),e.jsx("div",{className:"pointer-events-none absolute inset-0 opacity-0 transition duration-300 group-hover:opacity-40",style:{background:"radial-gradient(160% 120% at 0% 0%, rgba(34,211,238,0.18), transparent 60%)"}}),e.jsxs("div",{className:"relative flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(F,{member:t}),e.jsxs("div",{className:"min-w-0 flex-1 space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:`truncate text-lg font-extrabold ${v?"line-through text-black":"text-white"}`,style:v?void 0:(()=>{const a=h(t.role);return a?{backgroundImage:a,WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent"}:void 0})(),children:t.username}),e.jsx(J,{role:t.role}),e.jsx(Q,{points:g}),r&&e.jsx("span",{className:"rounded-full bg-cyan-500/20 px-2 py-0.5 text-[11px] uppercase tracking-[0.3em] text-cyan-200",children:"Это вы"}),y&&!v&&e.jsx("span",{className:"ml-1 rounded-full bg-emerald-500/20 px-2 py-0.5 text-[10px] uppercase tracking-[0.28em] text-emerald-200",children:"Online"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-zinc-300/80",children:[e.jsxs("span",{children:["#",t.userNumber]}),e.jsx("span",{className:"hidden sm:inline",children:"•"}),e.jsxs("span",{children:["С нами с ",N]})]}),t.profile.bio&&e.jsx("p",{className:"line-clamp-2 text-sm text-zinc-200/85",children:t.profile.bio})]}),e.jsx(q,{size:16,className:"mt-1 opacity-0 transition-all duration-200 group-hover:translate-x-1 group-hover:opacity-100"})]}),e.jsx("div",{className:"grid gap-2 sm:grid-cols-3",children:[{label:"Темы",value:p},{label:"Посты",value:u},{label:"Лайки",value:m}].map(a=>e.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/[0.05] px-3 py-2 text-center backdrop-blur-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:a.value}),e.jsx("div",{className:"mt-1 text-[10px] uppercase tracking-[0.28em] text-zinc-300/75",children:a.label})]},a.label))})]})]})}function ne(){const[t,r]=j.useState(()=>D()),[i,u]=j.useState(""),[p,m]=j.useState(null);j.useEffect(()=>{const a=async()=>{try{const l=await O(),x=await I();if(l||x!=null&&x.length){const b=x.map(c=>{const s=c.profile||null,o=c.stats||null,L=(s==null?void 0:s.accentFrom)||"#22d3ee",$=(s==null?void 0:s.accentTo)||"#8b5cf6",_=(s==null?void 0:s.avatarData)||(s==null?void 0:s.avatar)||(s==null?void 0:s.avatarUrl)||(s==null?void 0:s.avatarURL)||(s==null?void 0:s.image)||(s==null?void 0:s.photo)||(s==null?void 0:s.picture)||void 0,T=(s==null?void 0:s.bannerData)||(s==null?void 0:s.banner)||(s==null?void 0:s.bannerUrl)||(s==null?void 0:s.bannerURL)||void 0,E=typeof(o==null?void 0:o.posts)=="number"?o.posts:0,R=typeof(o==null?void 0:o.likes)=="number"?o.likes:0,B=typeof(o==null?void 0:o.topics)=="number"?o.topics:0,C=c.lastActiveAt||c.lastSeenAt||c.lastOnlineAt||null,w={id:c.id,username:c.username,email:`${c.username}@hidden.local`,createdAt:c.createdAt,role:c.role,userNumber:c.userNumber,posts:E,likes:R,topics:B,profile:{bio:(s==null?void 0:s.bio)||"",signature:(s==null?void 0:s.signature)||"",links:(s==null?void 0:s.links)||{},accentFrom:L,accentTo:$,avatarData:_,bannerData:T,badges:(s==null?void 0:s.badges)||[],privacy:{showEmail:!1,showStats:!0,...(s==null?void 0:s.privacy)||{}}},bans:c.bannedUntil?{until:c.bannedUntil}:null,mutes:null};return s!=null&&s.labels&&(w.profile.labels=s.labels),o&&(w.stats=o,typeof o.score=="number"&&(w.score=o.score)),C&&(w.lastActiveAt=C),w});r(b),m(l?{id:l.id,username:l.username}:null);return}}catch{}r(D());const d=M();m(d?{id:d.id,username:d.username}:null)};a();const n=()=>a();return window.addEventListener("forum:session",n),window.addEventListener("storage",n),()=>{window.removeEventListener("forum:session",n),window.removeEventListener("storage",n)}},[]);const g=i.trim().toLowerCase(),f=t.filter(a=>g?a.username.toLowerCase().includes(g)||a.email.toLowerCase().includes(g)||a.role.toLowerCase().includes(g):!0).sort((a,n)=>{const d=z(n)-z(a);return d!==0?d:a.username.localeCompare(n.username)}),N=t.filter(a=>a.role==="developer"),v=t.filter(a=>a.role==="admin"),y=t.filter(a=>a.role==="moderator");return e.jsx("main",{className:"min-h-screen text-slate-100",style:{background:"radial-gradient(1200px 680px at 15% -10%, rgba(56,189,248,0.18), transparent 65%), radial-gradient(1100px 720px at 90% -6%, rgba(167,139,250,0.14), transparent 70%), linear-gradient(180deg, #04060d 0%, #090b16 100%)"},children:e.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8",children:[e.jsx(W,{}),e.jsxs("section",{className:"relative mb-6 overflow-hidden rounded-3xl border border-white/10 bg-[#101527]/85 p-6 shadow-[0_50px_120px_-60px_rgba(15,23,42,0.9)] backdrop-blur",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-br from-sky-500/20 via-transparent to-fuchsia-500/10"}),e.jsx("div",{className:"pointer-events-none absolute -right-12 top-10 h-44 w-44 rounded-full bg-sky-400/20 blur-3xl"}),e.jsxs("div",{className:"relative flex flex-wrap items-center gap-6",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-cyan-400/20 text-cyan-200 shadow-inner shadow-cyan-500/20",children:e.jsx(P,{size:22})}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[e.jsx("span",{className:"inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.36em] text-zinc-200/80",children:"Сообщество SKY"}),e.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-white sm:text-4xl",children:"Участники форума"}),e.jsx("p",{className:"max-w-2xl text-sm text-zinc-300/85 sm:text-base",children:"Найдите любого участника, изучите профиль и узнайте, чем живёт команда. Здесь собираются будущие напарники и эксперты, готовые к совместной работе."})]}),e.jsxs("div",{className:"grid gap-3 text-right text-xs uppercase tracking-[0.32em] text-zinc-300/70 sm:text-sm",children:[e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 px-4 py-3 shadow-inner shadow-black/40",children:[e.jsx("div",{className:"text-2xl font-bold tracking-tight text-white",children:t.length}),e.jsx("div",{children:"участников"})]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 px-4 py-3 shadow-inner shadow-black/40",children:[e.jsx("div",{className:"text-2xl font-bold tracking-tight text-white",children:f.length}),e.jsx("div",{children:"в подборке"})]})]})]})]}),(()=>{const a=Date.now(),n=5*60*1e3,d=t.filter(l=>{const x=l.lastActiveAt;if(!x)return!1;const b=new Date(x).getTime();return!Number.isNaN(b)&&b>a-n});return d.length?e.jsxs("section",{className:"mb-6 rounded-3xl border border-white/10 bg-white/[0.05] p-4 backdrop-blur",children:[e.jsx("div",{className:"mb-3 text-xs uppercase tracking-[0.32em] text-emerald-200/80",children:"Online now"}),e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:d.slice(0,12).map(l=>e.jsxs(k,{to:`/forum/profile/${l.username}`,className:"flex items-center gap-3 rounded-xl border border-white/10 bg-white/5 px-3 py-2 hover:border-emerald-400/50",children:[e.jsx(F,{member:l}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate font-semibold",style:{backgroundImage:h(l.role)||void 0||void 0,WebkitBackgroundClip:h(l.role)?"text":void 0,backgroundClip:h(l.role)?"text":void 0,WebkitTextFillColor:h(l.role)?"transparent":void 0,color:h(l.role)?void 0:"#fff"},children:l.username}),e.jsx("div",{className:"text-[11px] uppercase tracking-[0.28em] text-zinc-300/70",children:U(l.lastActiveAt)})]})]},l.id))})]}):null})(),e.jsx("section",{className:"mb-6 grid gap-4 lg:grid-cols-4",children:[{title:"Разработчики",color:"text-cyan-200/80",entries:N,empty:"Пока нет разработчиков"},{title:"Администраторы",color:"text-rose-200/80",entries:v,empty:"Пока нет администраторов"},{title:"Модераторы",color:"text-violet-200/80",entries:y,empty:"Пока нет модераторов"},{title:"VIP",color:"text-amber-200/80",entries:t.filter(a=>a.role==="vip"),empty:"Пока нет VIP"}].map(a=>e.jsxs("div",{className:"rounded-3xl border border-white/10 bg-white/[0.05] p-4 backdrop-blur shadow-[0_30px_90px_-60px_rgba(15,23,42,0.9)]",children:[e.jsx("div",{className:`mb-3 text-xs uppercase tracking-[0.32em] ${a.color}`,children:a.title}),e.jsxs("div",{className:"grid gap-2 text-sm text-zinc-200/85",children:[a.entries.slice(0,8).map(n=>{const d=n.profile.accentFrom||"#22d3ee",l=n.profile.accentTo||"#8b5cf6",x=S(n.bans);return e.jsxs(k,{to:`/forum/profile/${n.username}`,className:"flex items-center gap-3 rounded-2xl border border-white/10 bg-white/5 px-3 py-2 transition hover:border-cyan-400/50",children:[e.jsxs("div",{className:"relative h-8 w-8 overflow-hidden rounded-xl border border-white/10",children:[n.profile.avatarData?e.jsx("img",{src:n.profile.avatarData,alt:n.username,className:"h-full w-full object-cover",loading:"lazy"}):e.jsx("div",{className:"h-full w-full",style:{background:`linear-gradient(135deg, ${d}, ${l})`}}),e.jsx("span",{className:`absolute -right-0.5 -bottom-0.5 h-2.5 w-2.5 rounded-full border ${A(n)?"border-emerald-900/60 bg-emerald-400":"border-zinc-900/70 bg-zinc-400/70"}`})]}),e.jsx("span",{className:`font-semibold ${x?"line-through text-black":"text-white"}`,style:x?void 0:(()=>{const b=h(n.role);return b?{backgroundImage:b,WebkitBackgroundClip:"text",backgroundClip:"text",WebkitTextFillColor:"transparent"}:void 0})(),children:n.username})]},n.id)}),!a.entries.length&&e.jsx("div",{className:"text-xs text-zinc-400/70",children:a.empty})]})]},a.title))}),e.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"relative min-w-[220px] flex-1",children:[e.jsx(V,{className:"pointer-events-none absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-zinc-400"}),e.jsx("input",{className:"input w-full rounded-2xl border-white/10 bg-white/[0.03] pl-11 text-sm text-white placeholder:text-zinc-400",placeholder:"Поиск по нику, почте или роли",value:i,onChange:a=>u(a.target.value)})]}),e.jsxs("div",{className:"text-xs uppercase tracking-[0.32em] text-zinc-400",children:["Показано ",f.length," / ",t.length]})]}),e.jsx("div",{className:"grid gap-5 md:grid-cols-2 xl:grid-cols-3",children:f.map(a=>e.jsx(X,{member:a,highlight:(p==null?void 0:p.id)===a.id},a.id))}),!f.length&&e.jsx("div",{className:"mt-6 rounded-3xl border border-white/10 bg-white/[0.05] p-5 text-sm text-zinc-300/80",children:"Нет участников по этому запросу."})]})})}export{ne as default};
