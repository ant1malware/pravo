import{j as m}from"./index-SvquseAp.js";import{R as v}from"./react-vendor-DTkXckhQ.js";import{c as y}from"./icons-wEjUy8Cq.js";const D="fav:",F="fav:item:";function i(){try{return typeof window<"u"&&!!window.localStorage}catch{return!1}}function h(t,u){return`${D}${t}:${u}`}function S(t,u){return`${F}${t}:${u}`}function g(){try{window.dispatchEvent(new CustomEvent("favorites:change"))}catch{}}function l(t,u){if(!i())return!1;try{return!!localStorage.getItem(h(t,u))}catch{return!1}}function p(t,u,e){if(!i())return!1;const r=h(t,u),n=S(t,u);try{return localStorage.getItem(r)?(localStorage.removeItem(r),localStorage.removeItem(n),g(),!1):(localStorage.setItem(r,"1"),e&&(e.title||e.url)&&localStorage.setItem(n,JSON.stringify(e)),g(),!0)}catch{return!1}}function $(t){const u=[];if(!i())return u;try{for(let e=0;e<localStorage.length;e++){const r=localStorage.key(e)||"",n=/^fav:(role|law|vu|lawsec|topic):(.+)$/.exec(r);if(!n)continue;const a=n[1],c=n[2];let o=null;try{const s=localStorage.getItem(S(a,c));o=s?JSON.parse(s):null}catch{o=null}u.push({kind:a,id:c,title:o==null?void 0:o.title,url:o==null?void 0:o.url})}}catch{}return u.sort((e,r)=>e.kind!==r.kind?e.kind.localeCompare(r.kind):(e.title||e.id).localeCompare(r.title||r.id))}function x(t){return $(t)}function R(t,u){l(t,u)&&p(t,u)}function j({kind:t,id:u,title:e,url:r,size:n="md"}){const[a,c]=v.useState(()=>l(t,u));v.useEffect(()=>{c(l(t,u))},[t,u]);function o(f){f.preventDefault(),f.stopPropagation();const w=p(t,u,{title:e,url:r});c(w)}const s=n==="sm"?"h-7 w-7":"h-8 w-8",E=n==="sm"?"h-4 w-4":"h-5 w-5";return m.jsx("button",{onClick:o,title:a?"\u0423\u0431\u0440\u0430\u0442\u044C \u0438\u0437 \u0438\u0437\u0431\u0440\u0430\u043D\u043D\u043E\u0433\u043E":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0438\u0437\u0431\u0440\u0430\u043D\u043D\u043E\u0435","aria-label":a?"\u0423\u0431\u0440\u0430\u0442\u044C \u0438\u0437 \u0438\u0437\u0431\u0440\u0430\u043D\u043D\u043E\u0433\u043E":"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0438\u0437\u0431\u0440\u0430\u043D\u043D\u043E\u0435",className:`fav-star-btn ${s} ${a?"is-active":""}`,children:m.jsx(y,{className:`fav-star-icon ${E}`})})}export{j as F,l as i,x as l,R as r,p as t};
