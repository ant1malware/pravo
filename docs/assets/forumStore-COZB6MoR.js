import{c as I,e as U}from"./index-Cqd5Tr40.js";function c(){if(!(typeof window>"u"))return window}function d(t,o){const e=c();if(!e)return o;try{const i=e.localStorage.getItem(t);return i?JSON.parse(i):o}catch{return o}}function r(t,o){const e=c();if(e)try{e.localStorage.setItem(t,JSON.stringify(o))}catch{}}function u(t){const o=c();if(o)try{o.localStorage.removeItem(t)}catch{}}function f(){return new Date().toISOString()}function S(t){return t?t.until?new Date(t.until).getTime()>Date.now():!0:!1}let a=!1;function l(){if(a)return;a=!0,d("forum:initialized",!1)||(h(),r("forum:initialized",!0))}function h(){const t=f(),o={id:crypto.randomUUID(),username:"Pavel",email:"pavel@forum.local",createdAt:t,role:"developer",userNumber:1,posts:3,likes:6,topics:2,profile:{bio:"Создатель SKY форума. Слежу за порядком и вдохновляю команду.",links:{website:"https://sky.local"},accentFrom:"#a855f7",accentTo:"#22d3ee",badges:["Founder","Core"],privacy:{showEmail:!0,showStats:!0}},bans:null,mutes:null},e={id:crypto.randomUUID(),username:"elysia",email:"elysia@forum.local",createdAt:t,role:"moderator",userNumber:2,posts:5,likes:8,topics:1,profile:{bio:"Фанат ретро-интерфейсов, модерирую раздел дизайна.",signature:"Stay liquid",links:{discord:"elysia#2048"},accentFrom:"#f472b6",accentTo:"#c084fc",badges:["Moderator"],privacy:{showEmail:!1,showStats:!0}},bans:null,mutes:null},i={id:crypto.randomUUID(),username:"raptor",email:"raptor@forum.local",createdAt:t,role:"vip",userNumber:3,posts:2,likes:3,topics:1,profile:{bio:"Тестирую новые версии SKY. Люблю длинные треды.",links:{telegram:"@raptor"},accentFrom:"#38bdf8",accentTo:"#a855f7",badges:["Early"],privacy:{showEmail:!1,showStats:!0}},bans:null,mutes:null};r("forum:accounts",[o,e,i]);const s=[{id:crypto.randomUUID(),title:"SKY Update Log",description:"Анонсы обновлений, бета-релизы, планы.",icon:"🛠",createdAt:t,order:1,moderatorIds:[o.id],topicCount:1,postCount:4},{id:crypto.randomUUID(),title:"Design Lab",description:"UI/UX, экспериментальные концепты, ретрофутуризм.",icon:"🎨",createdAt:t,order:2,moderatorIds:[e.id],topicCount:1,postCount:3},{id:crypto.randomUUID(),title:"Community Lounge",description:"Знакомства, свободные разговоры, сбор фидбэка.",icon:"🪐",createdAt:t,order:3,moderatorIds:[e.id,i.id],topicCount:1,postCount:3}];r("forum:sections",s);const n=[{id:crypto.randomUUID(),sectionId:s[0].id,title:"SKY 0.9 Roadmap",authorId:o.id,createdAt:t,updatedAt:t,pinned:!0,locked:!1,movedTo:null,viewCount:124,replyCount:2,lastPostAt:t,lastPostBy:e.id},{id:crypto.randomUUID(),sectionId:s[1].id,title:"Liquid glass паттерны",authorId:e.id,createdAt:t,updatedAt:t,pinned:!1,locked:!1,movedTo:null,viewCount:86,replyCount:1,lastPostAt:t,lastPostBy:o.id},{id:crypto.randomUUID(),sectionId:s[2].id,title:"Добро пожаловать в форум SKY",authorId:i.id,createdAt:t,updatedAt:t,pinned:!0,locked:!1,movedTo:null,viewCount:96,replyCount:2,lastPostAt:t,lastPostBy:o.id}];r("forum:topics",n);const p=[{id:crypto.randomUUID(),topicId:n[0].id,authorId:o.id,content:"Друзья, собираем планы на 0.9: новый редактор, режим SKY Home, система достижений.",createdAt:t,likes:[e.id,i.id]},{id:crypto.randomUUID(),topicId:n[0].id,authorId:e.id,content:"Прототипы готовы. Нужны тестеры для редизайна панели модерации.",createdAt:t,likes:[o.id]},{id:crypto.randomUUID(),topicId:n[1].id,authorId:e.id,content:"Собираю коллекцию эффектов для стекла. Делитесь скринами и CSS.",createdAt:t,likes:[i.id]},{id:crypto.randomUUID(),topicId:n[1].id,authorId:o.id,content:"Добавил токены для акцентных градиентов. Проверяйте в index.css.",createdAt:t,likes:[e.id]},{id:crypto.randomUUID(),topicId:n[2].id,authorId:i.id,content:"Расскажите о себе! Я занимаюсь QA и люблю тёмные темы.",createdAt:t,likes:[e.id]},{id:crypto.randomUUID(),topicId:n[2].id,authorId:e.id,content:"Привет всем! Готов помогать с оформлением и модерировать Lounge.",createdAt:t,likes:[i.id]},{id:crypto.randomUUID(),topicId:n[2].id,authorId:o.id,content:"Будем держать космический вайб и уважение друг к другу.",createdAt:t,likes:[i.id,e.id]}];r("forum:posts",p),r("forum:settings",{heroTitle:"SKY Forum",heroSubtitle:"Эксклюзивное сообщество для разработчиков и исследователей SKY.",heroMessage:"Обсуждаем обновления, делимся концептами и тестируем будущее интерфейсов.",registrationOpen:!0,requireEnglishNick:!0,allowGuestRead:!1}),r("forum:counters",{nextUserNumber:4});const g=[{code:"SKYACCESSCODE000",createdAt:t,createdBy:o.id,note:"Демо приглашение",usedBy:e.id,usedAt:t},{code:"SKYACCESSCODE001",createdAt:t,createdBy:o.id,note:"Запас для теста",usedBy:null,usedAt:null}];r("forum:invites",g);const y={id:crypto.randomUUID(),createdAt:t,actorId:o.id,action:"seed",targetType:"settings",notes:"Инициализация демо-данных форума"};r("forum:logs",[y])}function m(){return l(),d("forum:accounts",[])}function w(t){r("forum:accounts",t)}function v(){return l(),d("forum:settings",{heroTitle:"SKY Forum",heroSubtitle:"",heroMessage:"",registrationOpen:!1,requireEnglishNick:!0,allowGuestRead:!1})}function D(){return l(),d("forum:logs",[])}function C(t){r("forum:logs",t)}function A(t){const o=D(),e={id:crypto.randomUUID(),createdAt:f(),...t};o.unshift(e),C(o.slice(0,200))}function T(){const t=I();return t?b(t.userId):null}function b(t){return m().find(o=>o.id===t)||null}function Y(t){return m().find(o=>o.username.toLowerCase()===t.toLowerCase())||null}function F(t,o){const e=m(),i=e.findIndex(s=>s.id===t);i!==-1&&(e[i]={...e[i],...o},w(e))}function L(){return v()}function N(t){u("forum:accounts"),u("forum:sections"),u("forum:topics"),u("forum:posts"),u("forum:logs"),u("forum:invites"),r("forum:settings",{heroTitle:"SKY Forum",heroSubtitle:"",heroMessage:"",registrationOpen:!0,requireEnglishNick:!0,allowGuestRead:!1}),r("forum:counters",{nextUserNumber:1}),r("forum:sections",[]),r("forum:topics",[]),r("forum:posts",[]),r("forum:accounts",[]),r("forum:logs",[]),r("forum:invites",[]),r("forum:initialized",!0),a=!0,t&&A({actorId:t,action:"reset_empty",targetType:"settings"}),U()}function B(t){return t?S(t.mutes||void 0):!1}export{L as a,Y as f,T as g,B as i,N as r,F as u};
