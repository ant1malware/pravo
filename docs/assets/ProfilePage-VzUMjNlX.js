import{j as e}from"./index-DTcNca15.js";import{u as G,R as i}from"./react-vendor-DTkXckhQ.js";import{f as N,g as T,u as M}from"./forumStore-BzuuLjfA.js";import{a0 as V,a1 as A,a2 as J,a3 as P,a4 as W}from"./icons-DET5c9ig.js";const Y={developer:{label:"Developer",color:"#22d3ee"},admin:{label:"Admin",color:"#ef4444"},moderator:{label:"Moderator",color:"#8b5cf6"},vip:{label:"VIP",color:"#eab308"},user:{label:"User",color:"#94a3b8"},newbie:{label:"Newbie",color:"#22d3ee"}},q=["Founder","Early","Contributor","VIP","Designer"];function H({role:a}){const s=Y[a]||{label:a,color:"#94a3b8"};return e.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-[0.26em]",style:{color:s.color},children:s.label})}function k({value:a,label:s}){return e.jsxs("div",{className:"card p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-extrabold text-white",children:a}),e.jsx("div",{className:"mt-1 text-xs uppercase tracking-[0.3em] text-zinc-400/80",children:s})]})}function w({title:a,children:s}){return e.jsxs("div",{className:"card p-4",children:[e.jsx("div",{className:"mb-2 text-xs uppercase tracking-[0.28em] text-zinc-400/70",children:a}),s]})}function ae(){var f,c,h,p,v,u;const{username:a=""}=G(),[s,o]=i.useState(()=>N(a)||null),[l,g]=i.useState(()=>T());if(i.useEffect(()=>{o(N(a)||null)},[a]),i.useEffect(()=>{const x=()=>g(T());return window.addEventListener("forum:session",x),window.addEventListener("storage",x),()=>{window.removeEventListener("forum:session",x),window.removeEventListener("storage",x)}},[]),!s)return e.jsx("main",{className:"min-h-screen bg-slate-950 text-slate-200",children:e.jsx("div",{className:"mx-auto max-w-3xl px-4 py-12",children:e.jsx("div",{className:"card p-6 text-center text-sm text-zinc-300",children:"Profile not found."})})});const d=(l==null?void 0:l.id)===s.id,m=s.profile.accentFrom||"#22d3ee",r=s.profile.accentTo||"#8b5cf6";return e.jsx("main",{className:"min-h-screen",style:{background:"radial-gradient(900px 600px at 20% -10%, rgba(59,130,246,0.18), transparent 65%), radial-gradient(1100px 760px at 95% 8%, rgba(236,72,153,0.16), transparent 68%), #0d0d12",color:"#f8fafc"},children:e.jsxs("div",{className:"mx-auto max-w-5xl px-4 py-6",children:[e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx("div",{style:{height:180,background:s.profile.bannerData?`url(${s.profile.bannerData}) center/cover`:`linear-gradient(135deg, ${m}, ${r})`}}),e.jsxs("div",{className:"flex flex-wrap items-end gap-4 px-4 pb-4 -mt-16",children:[e.jsx("div",{className:"h-24 w-24 rounded-full ring-4 ring-[rgba(13,19,33,0.85)]",style:{background:s.profile.avatarData?`url(${s.profile.avatarData}) center/cover`:`linear-gradient(135deg, ${m}, ${r})`}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsx("h1",{className:"text-2xl font-extrabold text-white",children:s.username}),e.jsx(H,{role:s.role}),e.jsxs("span",{className:"text-xs text-zinc-400/80",children:["#",s.userNumber]})]}),e.jsxs("div",{className:"mt-1 text-xs text-zinc-500",children:["Joined ",new Date(s.createdAt).toLocaleDateString()]})]}),d&&e.jsx(K,{user:s,onUpdated:()=>o(N(a)||null)})]})]}),e.jsxs("div",{className:"mt-6 grid gap-4 sm:grid-cols-3",children:[e.jsx(k,{value:s.posts,label:"Posts"}),e.jsx(k,{value:s.topics,label:"Topics"}),e.jsx(k,{value:s.likes,label:"Likes"})]}),e.jsxs("div",{className:"mt-6 grid gap-4 lg:grid-cols-[1.35fr_.85fr]",children:[e.jsx(w,{title:"About",children:e.jsx("p",{className:"whitespace-pre-wrap text-sm text-zinc-200/80",children:s.profile.bio||"No bio yet."})}),e.jsx(w,{title:"Links",children:e.jsxs("div",{className:"grid gap-2 text-sm text-zinc-200/80",children:[(f=s.profile.links)!=null&&f.website?e.jsxs("a",{className:"flex items-center gap-2 text-sky-300 hover:text-sky-200",href:s.profile.links.website,target:"_blank",rel:"noreferrer",children:[e.jsx(V,{size:14}),s.profile.links.website]}):null,(c=s.profile.links)!=null&&c.discord?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{size:14})," Discord: ",s.profile.links.discord]}):null,(h=s.profile.links)!=null&&h.telegram?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{size:14})," Telegram: ",s.profile.links.telegram]}):null,!((p=s.profile.links)!=null&&p.website)&&!((v=s.profile.links)!=null&&v.discord)&&!((u=s.profile.links)!=null&&u.telegram)&&e.jsx("span",{children:"No links added."})]})})]}),e.jsx(w,{title:"Signature",children:e.jsx("div",{className:"whitespace-pre-wrap text-sm text-zinc-200/80",children:s.profile.signature||"No signature."})})]})})}function K({user:a,onUpdated:s}){const[o,l]=i.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn",onClick:()=>l(!0),children:[e.jsx(J,{size:16})," Customize"]}),o&&e.jsx(Q,{user:a,onClose:()=>l(!1),onSaved:()=>{s(),l(!1)}})]})}function Q({user:a,onClose:s,onSaved:o}){var $,B,E;const[l,g]=i.useState(a.profile.avatarData||""),[d,m]=i.useState(a.profile.bannerData||""),[r,f]=i.useState(a.profile.accentFrom||"#22d3ee"),[c,h]=i.useState(a.profile.accentTo||"#8b5cf6"),[p,v]=i.useState(a.profile.bio||""),[u,x]=i.useState(a.profile.signature||""),[y,R]=i.useState((($=a.profile.links)==null?void 0:$.website)||""),[z,F]=i.useState(((B=a.profile.links)==null?void 0:B.discord)||""),[S,U]=i.useState(((E=a.profile.links)==null?void 0:E.telegram)||""),[C,I]=i.useState(a.profile.badges||[]),O=t=>{I(n=>n.includes(t)?n.filter(j=>j!==t):n.length>=3?n:[...n,t])},D=t=>n=>{var L;const j=(L=n.target.files)==null?void 0:L[0];if(!j)return;const b=new FileReader;b.onload=()=>t(String(b.result||"")),b.readAsDataURL(j)},_=()=>{M(a.id,{avatarData:l||void 0,bannerData:d||void 0,accentFrom:r,accentTo:c,bio:p.trim()||void 0,signature:u.trim()||void 0,links:{website:y.trim()||void 0,discord:z.trim()||void 0,telegram:S.trim()||void 0},badges:C}),o()};return e.jsx("div",{className:"fixed inset-0 z-[120] grid place-items-center bg-black/70 px-4 py-6",children:e.jsxs("div",{className:"card w-[min(780px,96vw)] max-h-[90vh] overflow-y-auto p-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-lg font-semibold text-white",children:"Customize profile"}),e.jsx("button",{className:"btn",onClick:s,children:"Close"})]}),e.jsxs("div",{className:"mt-4 grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"card p-4",children:[e.jsx("div",{className:"text-xs uppercase tracking-[0.28em] text-zinc-400/80",children:"Avatar"}),e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsx("div",{className:"h-20 w-20 rounded-full",style:{background:l?`url(${l}) center/cover`:`linear-gradient(135deg, ${r}, ${c})`}}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"btn flex items-center gap-2",children:[e.jsx(P,{size:16}),"Upload",e.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:D(g)})]}),l&&e.jsx("button",{className:"btn",onClick:()=>g(""),children:"Remove"})]})]})]}),e.jsxs("div",{className:"card p-4",children:[e.jsx("div",{className:"text-xs uppercase tracking-[0.28em] text-zinc-400/80",children:"Banner"}),e.jsx("div",{className:"mt-3 h-20 w-full rounded-xl",style:{background:d?`url(${d}) center/cover`:`linear-gradient(135deg, ${r}, ${c})`}}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[e.jsxs("label",{className:"btn flex items-center gap-2",children:[e.jsx(P,{size:16}),"Upload",e.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:D(m)})]}),d&&e.jsx("button",{className:"btn",onClick:()=>m(""),children:"Remove"})]})]}),e.jsxs("div",{className:"card p-4",children:[e.jsx("div",{className:"text-xs uppercase tracking-[0.28em] text-zinc-400/80",children:"Accent"}),e.jsxs("div",{className:"mt-3 flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-zinc-400/80",children:"From"}),e.jsx("input",{type:"color",value:r,onChange:t=>f(t.target.value)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-zinc-400/80",children:"To"}),e.jsx("input",{type:"color",value:c,onChange:t=>h(t.target.value)})]})]})]}),e.jsxs("div",{className:"card p-4",children:[e.jsx("div",{className:"text-xs uppercase tracking-[0.28em] text-zinc-400/80",children:"Badges (max 3)"}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:q.map(t=>{const n=C.includes(t);return e.jsxs("button",{className:`btn flex items-center gap-2 ${n?"btn-primary":""}`,onClick:()=>O(t),type:"button",children:[e.jsx(W,{size:16})," ",t]},t)})})]}),e.jsxs("div",{className:"card p-4 sm:col-span-2",children:[e.jsx("div",{className:"text-xs uppercase tracking-[0.28em] text-zinc-400/80",children:"Bio"}),e.jsx("textarea",{className:"input mt-2 min-h-[120px]",value:p,onChange:t=>v(t.target.value),placeholder:"Tell the community a bit about yourself"})]}),e.jsxs("div",{className:"card p-4 sm:col-span-2",children:[e.jsx("div",{className:"text-xs uppercase tracking-[0.28em] text-zinc-400/80",children:"Signature"}),e.jsx("textarea",{className:"input mt-2 min-h-[90px]",value:u,onChange:t=>x(t.target.value),placeholder:"Signature displayed under your posts"})]}),e.jsxs("div",{className:"card p-4 sm:col-span-2",children:[e.jsx("div",{className:"text-xs uppercase tracking-[0.28em] text-zinc-400/80",children:"Links"}),e.jsxs("div",{className:"mt-3 grid gap-2 sm:grid-cols-3",children:[e.jsx("input",{className:"input",placeholder:"https://website",value:y,onChange:t=>R(t.target.value)}),e.jsx("input",{className:"input",placeholder:"discord username",value:z,onChange:t=>F(t.target.value)}),e.jsx("input",{className:"input",placeholder:"@telegram",value:S,onChange:t=>U(t.target.value)})]})]})]}),e.jsxs("div",{className:"mt-5 flex justify-end gap-2",children:[e.jsx("button",{className:"btn",onClick:s,children:"Cancel"}),e.jsx("button",{className:"btn btn-primary",onClick:_,children:"Save changes"})]})]})})}export{ae as default};
