import{l as h}from"./index-BW22xFmf.js";function m(t){return String(t).toLowerCase().replace(/[^\p{L}\p{N}\s-]/gu,"").trim().replace(/\s+/g,"-").slice(0,80)}function $(t){return String(t).replace(/[&<>]/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;"})[e])}function C(t){return String(t).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function A(t){let e=String(t).trim().toLowerCase();return e=e.replace(/\bст\.?\s*/g,"статья ").replace(/\bук\b/g,"уголовный кодекс").replace(/\bкоап\b/g,"коап").replace(/\s+/g," "),e}function I(t){return String(t).toLowerCase().replace(/ё/g,"е").trim().replace(/\s+/g," ").split(" ").filter(Boolean).filter(n=>n.length>=2||/\d/.test(n))}const d=new RegExp("^\\s*(?:\\u0441\\u0442\\.?|\\u0441\\u0442\\u0430\\u0442\\u044c\\u044f)\\s*(\\d+(?:\\.\\d+)*)","i"),x=new RegExp("^\\s*(?:\\u0433\\u043b\\u0430\\u0432\\u0430|\\u0440\\u0430\\0437\\0434\\0435\\043b)\\s*(\\d+(?:\\.\\d+)*)","i"),w=new RegExp("(?:\\u0447\\u0430\\u0441\\u0442\\u044c|\\u0447\\.?)\\s*(\\d+(?:\\.\\d+)?)","i"),S=new RegExp("(?:\\u043f\\u0443\\u043d\\u043a\\u0442|\\u043f\\.?)\\s*(\\d+(?:\\.\\d+)?)","i"),T=/[\\u0300-\\u036f]/g;function g(t){return(t||"").normalize("NFKD").replace(T,"").toLowerCase().trim()}function E(t){const e=(t||"").trim();if(!e)return"";const c=e.match(d);if(c){let u=`статья-${(c[1]||"").replace(/\./g,"-")}`;const l=e.match(w);l&&(u+=`-часть-${l[1].replace(/\./g,"-")}`);const i=e.match(S);return i&&(u+=`-пункт-${i[1].replace(/\./g,"-")}`),u}const r=e.match(x);return r?`${/\u0433\u043b\u0430\u0432\u0430/i.test(e)?"глава":"раздел"}-${(r[1]||"").replace(/\./g,"-")}`:m(e)}function R(t){const c=String(t.content||"").replace(/\r\n?/g,`
`).split(`
`),r=[];let n=null;for(const u of c){const l=u.trim(),i=/^(#{2,6})\s*(.+)$/.exec(l);if(i){n&&r.push(n);const s=i[2].trim();n={lawSlug:t.slug,lawTitle:t.title,head:s,anchor:E(s),fullText:""};continue}if(!n){if(!l)continue;n={lawSlug:t.slug,lawTitle:t.title,head:"",anchor:"",fullText:l};continue}l&&n.fullText.length<800&&(n.fullText+=(n.fullText?`
`:"")+l)}return n&&r.push(n),r.forEach(u=>{u.fullText=u.fullText.trim().replace(/\s+/g," ").slice(0,400)}),r}let o=null,a=null;function p(){if(o&&a)return;const t=h.flatMap(c=>R(c)),e=new Map;t.forEach(c=>{const r=e.get(c.lawSlug)||[];r.push(c),e.set(c.lawSlug,r)}),o=t,a=e}function M(){return p(),o?[...o]:[]}function b(t){return p(),a?[...a.get(t)||[]]:[]}function N(t,e,c="article",r=g){if(!t||!e)return"";const n=b(t);if(!n.length)return"";const u=r(e).replace(/^0+/,""),l=c==="chapter"?new RegExp(`\b(?:гл(?:ава)?|раздел)s*${u}\b`,"i"):new RegExp(`\bст(?:ать[яи]|.)?s*${u}\b`,"i"),i=n.find(f=>l.test(r(f.head)));if(i!=null&&i.anchor)return i.anchor;const s=n.find(f=>l.test(r(f.fullText)));return(s==null?void 0:s.anchor)||""}const _=g;export{C as a,A as b,$ as e,N as f,M as g,E as h,_ as n,I as t};
