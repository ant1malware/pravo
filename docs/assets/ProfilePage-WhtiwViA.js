import{j as e}from"./index-C_mJ4G-U.js";import{u as _,R as i}from"./react-vendor-DTkXckhQ.js";import{f as o,u as G}from"./forumStore-DyN_ZhbZ.js";import{a0 as M,a1 as z,a2 as O,a3 as F,a4 as V}from"./icons-DET5c9ig.js";function Y(){var t,n,x,c,p,m;const{username:l=""}=_(),[s,r]=i.useState(()=>o(l));return i.useEffect(()=>{r(o(l)||null)},[l]),s?e.jsxs("main",{className:"mx-auto max-w-5xl p-4",children:[e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx("div",{style:{height:160,background:s.profile.bannerData?`url(${s.profile.bannerData}) center/cover`:`linear-gradient(120deg, ${s.profile.accentFrom||"#22d3ee"}, ${s.profile.accentTo||"#8b5cf6"})`}}),e.jsxs("div",{className:"flex items-end gap-4 p-4",children:[e.jsx("div",{className:"h-24 w-24 -mt-16 rounded-full ring-2 ring-[color:var(--bg-1)]",style:{background:s.profile.avatarData?`url(${s.profile.avatarData}) center/cover`:`linear-gradient(135deg, ${s.profile.accentFrom||"#22d3ee"}, ${s.profile.accentTo||"#8b5cf6"})`}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-2xl font-extrabold",children:s.username}),e.jsxs("div",{className:"opacity-70 text-sm",children:["#",s.userNumber," • роль: ",s.role]})]}),e.jsx(W,{userId:s.id,onSaved:()=>r(o(l)||null)})]})]}),e.jsxs("div",{className:"mt-4 grid gap-4 sm:grid-cols-3",children:[e.jsx(v,{n:s.posts,label:"сообщений"}),e.jsx(v,{n:s.topics,label:"тем"}),e.jsx(v,{n:s.likes,label:"лайков"})]}),e.jsxs("div",{className:"mt-4 grid gap-4 sm:grid-cols-[1.2fr_.8fr]",children:[e.jsx(T,{title:"О себе",children:e.jsx("p",{style:{whiteSpace:"pre-wrap"},children:s.profile.bio||"—"})}),e.jsx(T,{title:"Ссылки",children:e.jsxs("div",{className:"grid gap-2 text-sm",children:[((t=s.profile.links)==null?void 0:t.website)&&e.jsxs("a",{className:"underline flex items-center gap-2",href:s.profile.links.website,target:"_blank",children:[e.jsx(M,{size:14})," ",s.profile.links.website]}),((n=s.profile.links)==null?void 0:n.discord)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{size:14})," Discord: ",s.profile.links.discord]}),((x=s.profile.links)==null?void 0:x.telegram)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{size:14})," Telegram: ",s.profile.links.telegram]}),!((c=s.profile.links)!=null&&c.website)&&!((p=s.profile.links)!=null&&p.discord)&&!((m=s.profile.links)!=null&&m.telegram)&&e.jsx("div",{children:"—"})]})})]}),e.jsxs("div",{className:"mt-4 card p-4",children:[e.jsx("div",{className:"mb-2 text-sm opacity-70",children:"Подпись"}),e.jsx("div",{style:{whiteSpace:"pre-wrap"},children:s.profile.signature||"—"})]})]}):e.jsx("main",{className:"mx-auto max-w-5xl p-4",children:e.jsx("div",{className:"card p-6",children:e.jsx("b",{children:"Профиль не найден."})})})}function T({title:l,children:s}){return e.jsxs("div",{className:"card p-4",children:[e.jsx("div",{className:"mb-2 text-sm opacity-70",children:l}),s]})}function v({n:l,label:s}){return e.jsxs("div",{className:"card p-4 text-center",children:[e.jsx("div",{className:"text-3xl font-extrabold",children:l}),e.jsx("div",{className:"opacity-70",children:s})]})}function W({userId:l,onSaved:s}){const[r,t]=i.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"btn",onClick:()=>t(!0),children:[e.jsx(O,{size:16}),"Customize"]}),r&&e.jsx(q,{userId:l,onClose:()=>t(!1),onSaved:s})]})}function q({userId:l,onClose:s,onSaved:r}){var C,S,D;o(o);const t=o((document.location.pathname.split("/").pop()||"").toString()),[n,x]=i.useState(t.profile.avatarData),[c,p]=i.useState(t.profile.bannerData),[m,B]=i.useState(t.profile.bio||""),[N,R]=i.useState(t.profile.signature||""),[b,P]=i.useState(((C=t.profile.links)==null?void 0:C.website)||""),[k,A]=i.useState(((S=t.profile.links)==null?void 0:S.discord)||""),[y,E]=i.useState(((D=t.profile.links)==null?void 0:D.telegram)||""),[u,U]=i.useState(t.profile.accentFrom||"#22d3ee"),[h,H]=i.useState(t.profile.accentTo||"#8b5cf6"),[d,I]=i.useState(t.profile.badges||[]),w=a=>j=>{var $;const g=($=j.target.files)==null?void 0:$[0];if(!g)return;const f=new FileReader;f.onload=()=>a(String(f.result)),f.readAsDataURL(g)},L=()=>{G(l,{profile:{avatarData:n,bannerData:c,bio:m,signature:N,links:{website:b,discord:k,telegram:y},accentFrom:u,accentTo:h,badges:d}}),r(),s()};return e.jsx("div",{className:"fixed inset-0 z-[100] grid place-items-center bg-black/70 p-4",children:e.jsxs("div",{className:"card w-[min(760px,96vw)] p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-lg font-semibold",children:"Customize profile"}),e.jsx("button",{className:"btn",onClick:s,children:"Закрыть"})]}),e.jsxs("div",{className:"mt-3 grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"card p-3",children:[e.jsx("div",{className:"text-sm opacity-70 mb-2",children:"Аватар"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-20 w-20 rounded-full",style:{background:n?`url(${n}) center/cover`:`linear-gradient(135deg, ${u}, ${h})`}}),e.jsxs("label",{className:"btn",children:[e.jsx(F,{size:16})," ",e.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:w(x)}),"Загрузить"]})]})]}),e.jsxs("div",{className:"card p-3",children:[e.jsx("div",{className:"text-sm opacity-70 mb-2",children:"Баннер"}),e.jsx("div",{className:"h-20 w-full rounded-lg",style:{background:c?`url(${c}) center/cover`:`linear-gradient(120deg, ${u}, ${h})`}}),e.jsx("div",{className:"mt-2",children:e.jsxs("label",{className:"btn",children:[e.jsx(F,{size:16})," ",e.jsx("input",{type:"file",accept:"image/*",hidden:!0,onChange:w(p)}),"Загрузить"]})})]}),e.jsxs("div",{className:"card p-3",children:[e.jsx("div",{className:"text-sm opacity-70 mb-2",children:"Акцент-цвета"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("input",{type:"color",value:u,onChange:a=>U(a.target.value)}),e.jsx("input",{type:"color",value:h,onChange:a=>H(a.target.value)})]})]}),e.jsxs("div",{className:"card p-3",children:[e.jsx("div",{className:"text-sm opacity-70 mb-2",children:"Бейджи (до 3)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Founder","Early","Contributor","VIP","Designer"].map(a=>{const j=d.includes(a);return e.jsxs("button",{className:"btn",onClick:()=>I(j?d.filter(g=>g!==a):d.length<3?[...d,a]:d),children:[e.jsx(V,{size:16})," ",j?"✓ ":"",a]},a)})})]}),e.jsxs("div",{className:"card p-3 sm:col-span-2",children:[e.jsx("div",{className:"text-sm opacity-70 mb-2",children:"О себе"}),e.jsx("textarea",{className:"input",style:{minHeight:90},value:m,onChange:a=>B(a.target.value),placeholder:"bio…"})]}),e.jsxs("div",{className:"card p-3 sm:col-span-2",children:[e.jsx("div",{className:"text-sm opacity-70 mb-2",children:"Подпись"}),e.jsx("textarea",{className:"input",style:{minHeight:70},value:N,onChange:a=>R(a.target.value),placeholder:"signature…"})]}),e.jsxs("div",{className:"card p-3 sm:col-span-2",children:[e.jsx("div",{className:"text-sm opacity-70 mb-2",children:"Ссылки"}),e.jsxs("div",{className:"grid gap-2 sm:grid-cols-3",children:[e.jsx("input",{className:"input",placeholder:"https://site",value:b,onChange:a=>P(a.target.value)}),e.jsx("input",{className:"input",placeholder:"discord username",value:k,onChange:a=>A(a.target.value)}),e.jsx("input",{className:"input",placeholder:"@telegram",value:y,onChange:a=>E(a.target.value)})]})]})]}),e.jsxs("div",{className:"mt-3 flex justify-end gap-2",children:[e.jsx("button",{className:"btn",onClick:s,children:"Отмена"}),e.jsx("button",{className:"btn btn-primary",onClick:L,children:"Сохранить"})]})]})})}export{Y as default};
