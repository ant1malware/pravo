import{j as e,k as $,b as R,e as T}from"./index-CAkmMo7n.js";import{R as w,L as N}from"./react-vendor-DTkXckhQ.js";import{F as M}from"./ForumSubnav-ayXUx761.js";import{c as U,B as P}from"./Badge-Dod91j0o.js";import{l as A,g as I}from"./forumStore-DVlLx33I.js";import{n as O,a as q,z as G}from"./icons-wEjUy8Cq.js";import"./forumRemote-D5s3MT8n.js";const J=new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"short",year:"numeric"});function K(u){if(!u)return"";try{return J.format(new Date(u)).replace(/[\u00A0\s]*Ð³\.$/,"")}catch{return""}}const Q={developer:{label:"\u0420\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A",color:"#22d3ee"},admin:{label:"\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440",color:"#ef4444"},moderator:{label:"\u041C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440",color:"#8b5cf6"},vip:{label:"VIP",color:"#eab308"},user:{label:"\u0423\u0447\u0430\u0441\u0442\u043D\u0438\u043A",color:"#94a3b8"},newbie:{label:"\u041D\u043E\u0432\u0438\u0447\u043E\u043A",color:"#22d3ee"}};function V({role:u}){const a=Q[u]||{label:u,color:"#94a3b8"};return e.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs font-semibold uppercase tracking-[0.26em]",style:{color:a.color},children:a.label})}function k({member:u}){const a=u.profile.accentFrom||"#22d3ee",l=u.profile.accentTo||"#8b5cf6",d=u.username.slice(0,2).toUpperCase();return e.jsx("div",{className:"relative h-16 w-16 overflow-hidden rounded-2xl border border-white/10 shadow-[0_20px_45px_-25px_rgba(15,23,42,0.9)]",children:u.profile.avatarData?e.jsx("img",{src:u.profile.avatarData,alt:u.username,className:"h-full w-full object-cover",loading:"lazy"}):e.jsx("div",{className:"flex h-full w-full items-center justify-center",style:{background:`linear-gradient(135deg, ${a}, ${l})`},children:e.jsx("span",{className:"text-lg font-semibold uppercase tracking-wide text-white/90",children:d})})})}function y(u){if(typeof u.score=="number")return u.score;const a=u.stats||{},l=typeof a.posts=="number"?a.posts:u.posts,d=typeof a.likes=="number"?a.likes:u.likes,x=typeof a.topics=="number"?a.topics:u.topics;return U({posts:l,likes:d,topics:x})}function Y({member:u,highlight:a}){const l=u.stats||{},d=typeof l.posts=="number"?l.posts:u.posts,x=typeof l.topics=="number"?l.topics:u.topics,b=typeof l.likes=="number"?l.likes:u.likes,p=y(u),h=u.profile.accentFrom||"#22d3ee";u.profile.accentTo;const j=K(u.createdAt);return e.jsxs(N,{to:`/forum/profile/${u.username}`,className:`group relative overflow-hidden rounded-3xl border border-white/10 bg-white/[0.04] p-5 transition-all duration-200 hover:-translate-y-0.5 hover:border-cyan-400/60 hover:bg-white/[0.06] ${a?"border-cyan-400/70 ring-2 ring-cyan-400/30":""}`,children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 opacity-80 transition duration-300 group-hover:opacity-100",style:{background:`linear-gradient(130deg, ${h}22, transparent 55%)`}}),e.jsx("div",{className:"pointer-events-none absolute inset-0 opacity-0 transition duration-300 group-hover:opacity-40",style:{background:"radial-gradient(160% 120% at 0% 0%, rgba(34,211,238,0.18), transparent 60%)"}}),e.jsxs("div",{className:"relative flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(k,{member:u}),e.jsxs("div",{className:"min-w-0 flex-1 space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("span",{className:"truncate text-lg font-semibold text-white",children:u.username}),e.jsx(V,{role:u.role}),e.jsx(P,{points:p}),a&&e.jsx("span",{className:"rounded-full bg-cyan-500/20 px-2 py-0.5 text-[11px] uppercase tracking-[0.3em] text-cyan-200",children:"\u042D\u0442\u043E \u0432\u044B"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 text-xs text-zinc-300/80",children:[e.jsxs("span",{children:["#",u.userNumber]}),e.jsx("span",{className:"hidden sm:inline",children:"\u2022"}),e.jsxs("span",{children:["\u0421 \u043D\u0430\u043C\u0438 \u0441 ",j]})]}),u.profile.bio&&e.jsx("p",{className:"line-clamp-2 text-sm text-zinc-200/85",children:u.profile.bio})]}),e.jsx(G,{size:16,className:"mt-1 opacity-0 transition-all duration-200 group-hover:translate-x-1 group-hover:opacity-100"})]}),e.jsx("div",{className:"grid gap-2 sm:grid-cols-3",children:[{label:"\u0422\u0435\u043C\u044B",value:x},{label:"\u041F\u043E\u0441\u0442\u044B",value:d},{label:"\u041B\u0430\u0439\u043A\u0438",value:b}].map(g=>e.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/[0.05] px-3 py-2 text-center backdrop-blur-sm",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:g.value}),e.jsx("div",{className:"mt-1 text-[10px] uppercase tracking-[0.28em] text-zinc-300/75",children:g.label})]},g.label))})]})]})}function se(){const[u,a]=w.useState(()=>A()),[l,d]=w.useState(""),[x,b]=w.useState(null);w.useEffect(()=>{const s=async()=>{try{const i=await R(),m=await T();if(i||m!=null&&m.length){const f=m.map(c=>{const t=c.profile||null,n=c.stats||null,F=(t==null?void 0:t.accentFrom)||"#22d3ee",C=(t==null?void 0:t.accentTo)||"#8b5cf6",z=(t==null?void 0:t.avatarData)||(t==null?void 0:t.avatar)||(t==null?void 0:t.avatarUrl)||(t==null?void 0:t.avatarURL)||(t==null?void 0:t.image)||(t==null?void 0:t.photo)||(t==null?void 0:t.picture)||void 0,B=(t==null?void 0:t.bannerData)||(t==null?void 0:t.banner)||(t==null?void 0:t.bannerUrl)||(t==null?void 0:t.bannerURL)||void 0,L=typeof(n==null?void 0:n.posts)=="number"?n.posts:0,S=typeof(n==null?void 0:n.likes)=="number"?n.likes:0,_=typeof(n==null?void 0:n.topics)=="number"?n.topics:0,E=c.lastActiveAt||c.lastSeenAt||c.lastOnlineAt||null,v={id:c.id,username:c.username,email:`${c.username}@hidden.local`,createdAt:c.createdAt,role:c.role,userNumber:c.userNumber,posts:L,likes:S,topics:_,profile:{bio:(t==null?void 0:t.bio)||"",signature:(t==null?void 0:t.signature)||"",links:(t==null?void 0:t.links)||{},accentFrom:F,accentTo:C,avatarData:z,bannerData:B,badges:(t==null?void 0:t.badges)||[],privacy:{showEmail:!1,showStats:!0,...(t==null?void 0:t.privacy)||{}}},bans:null,mutes:null};return t!=null&&t.labels&&(v.profile.labels=t.labels),n&&(v.stats=n,typeof n.score=="number"&&(v.score=n.score)),E&&(v.lastActiveAt=E),v});a(f),b(i?{id:i.id,username:i.username}:null);return}}catch{}a(A());const o=I();b(o?{id:o.id,username:o.username}:null)};s();const r=()=>s();return window.addEventListener("forum:session",r),window.addEventListener("storage",r),()=>{window.removeEventListener("forum:session",r),window.removeEventListener("storage",r)}},[]);const p=l.trim().toLowerCase(),h=u.filter(s=>p?s.username.toLowerCase().includes(p)||s.email.toLowerCase().includes(p)||s.role.toLowerCase().includes(p):!0).sort((s,r)=>{const o=y(r)-y(s);return o!==0?o:s.username.localeCompare(r.username)}),j=u.filter(s=>s.role==="developer"),g=u.filter(s=>s.role==="admin"),D=u.filter(s=>s.role==="moderator");return e.jsx("main",{className:"min-h-screen text-slate-100",style:{background:"radial-gradient(1200px 680px at 15% -10%, rgba(56,189,248,0.18), transparent 65%), radial-gradient(1100px 720px at 90% -6%, rgba(167,139,250,0.14), transparent 70%), linear-gradient(180deg, #04060d 0%, #090b16 100%)"},children:e.jsxs("div",{className:"mx-auto max-w-6xl px-4 py-8",children:[e.jsx(M,{}),e.jsxs("section",{className:"relative mb-6 overflow-hidden rounded-3xl border border-white/10 bg-[#101527]/85 p-6 shadow-[0_50px_120px_-60px_rgba(15,23,42,0.9)] backdrop-blur",children:[e.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-br from-sky-500/20 via-transparent to-fuchsia-500/10"}),e.jsx("div",{className:"pointer-events-none absolute -right-12 top-10 h-44 w-44 rounded-full bg-sky-400/20 blur-3xl"}),e.jsxs("div",{className:"relative flex flex-wrap items-center gap-6",children:[e.jsx("div",{className:"flex h-14 w-14 items-center justify-center rounded-2xl bg-cyan-400/20 text-cyan-200 shadow-inner shadow-cyan-500/20",children:e.jsx(O,{size:22})}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-3",children:[e.jsx("span",{className:"inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-[11px] font-semibold uppercase tracking-[0.36em] text-zinc-200/80",children:"\u0421\u043E\u043E\u0431\u0449\u0435\u0441\u0442\u0432\u043E SKY"}),e.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-white sm:text-4xl",children:"\u0423\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0438 \u0444\u043E\u0440\u0443\u043C\u0430"}),e.jsx("p",{className:"max-w-2xl text-sm text-zinc-300/85 sm:text-base",children:"\u041D\u0430\u0439\u0434\u0438\u0442\u0435 \u043B\u044E\u0431\u043E\u0433\u043E \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u0430, \u0438\u0437\u0443\u0447\u0438\u0442\u0435 \u043F\u0440\u043E\u0444\u0438\u043B\u044C \u0438 \u0443\u0437\u043D\u0430\u0439\u0442\u0435, \u0447\u0435\u043C \u0436\u0438\u0432\u0451\u0442 \u043A\u043E\u043C\u0430\u043D\u0434\u0430. \u0417\u0434\u0435\u0441\u044C \u0441\u043E\u0431\u0438\u0440\u0430\u044E\u0442\u0441\u044F \u0431\u0443\u0434\u0443\u0449\u0438\u0435 \u043D\u0430\u043F\u0430\u0440\u043D\u0438\u043A\u0438 \u0438 \u044D\u043A\u0441\u043F\u0435\u0440\u0442\u044B, \u0433\u043E\u0442\u043E\u0432\u044B\u0435 \u043A \u0441\u043E\u0432\u043C\u0435\u0441\u0442\u043D\u043E\u0439 \u0440\u0430\u0431\u043E\u0442\u0435."})]}),e.jsxs("div",{className:"grid gap-3 text-right text-xs uppercase tracking-[0.32em] text-zinc-300/70 sm:text-sm",children:[e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 px-4 py-3 shadow-inner shadow-black/40",children:[e.jsx("div",{className:"text-2xl font-bold tracking-tight text-white",children:u.length}),e.jsx("div",{children:"\u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u043E\u0432"})]}),e.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 px-4 py-3 shadow-inner shadow-black/40",children:[e.jsx("div",{className:"text-2xl font-bold tracking-tight text-white",children:h.length}),e.jsx("div",{children:"\u0432 \u043F\u043E\u0434\u0431\u043E\u0440\u043A\u0435"})]})]})]})]}),(()=>{const s=Date.now(),r=5*60*1e3,o=u.filter(i=>{const m=i.lastActiveAt;if(!m)return!1;const f=new Date(m).getTime();return!Number.isNaN(f)&&f>s-r});return o.length?e.jsxs("section",{className:"mb-6 rounded-3xl border border-white/10 bg-white/[0.05] p-4 backdrop-blur",children:[e.jsx("div",{className:"mb-3 text-xs uppercase tracking-[0.32em] text-emerald-200/80",children:"\u0421\u0435\u0439\u0447\u0430\u0441 \u043E\u043D\u043B\u0430\u0439\u043D"}),e.jsx("div",{className:"grid gap-3 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4",children:o.slice(0,12).map(i=>e.jsxs(N,{to:`/forum/profile/${i.username}`,className:"flex items-center gap-3 rounded-xl border border-white/10 bg-white/5 px-3 py-2 hover:border-emerald-400/50",children:[e.jsx(k,{member:i}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"truncate font-semibold text-white",children:i.username}),e.jsx("div",{className:"text-[11px] uppercase tracking-[0.28em] text-zinc-300/70",children:$(i.lastActiveAt)})]})]},i.id))})]}):null})(),e.jsx("section",{className:"mb-6 grid gap-4 lg:grid-cols-3",children:[{title:"\u0420\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u0438",color:"text-cyan-200/80",entries:j,empty:"\u041F\u043E\u043A\u0430 \u043D\u0435\u0442 \u0440\u0430\u0437\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u043E\u0432"},{title:"\u0410\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u044B",color:"text-rose-200/80",entries:g,empty:"\u041F\u043E\u043A\u0430 \u043D\u0435\u0442 \u0430\u0434\u043C\u0438\u043D\u0438\u0441\u0442\u0440\u0430\u0442\u043E\u0440\u043E\u0432"},{title:"\u041C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u044B",color:"text-violet-200/80",entries:D,empty:"\u041F\u043E\u043A\u0430 \u043D\u0435\u0442 \u043C\u043E\u0434\u0435\u0440\u0430\u0442\u043E\u0440\u043E\u0432"}].map(s=>e.jsxs("div",{className:"rounded-3xl border border-white/10 bg-white/[0.05] p-4 backdrop-blur shadow-[0_30px_90px_-60px_rgba(15,23,42,0.9)]",children:[e.jsx("div",{className:`mb-3 text-xs uppercase tracking-[0.32em] ${s.color}`,children:s.title}),e.jsxs("div",{className:"grid gap-2 text-sm text-zinc-200/85",children:[s.entries.slice(0,8).map(r=>{const o=r.profile.accentFrom||"#22d3ee",i=r.profile.accentTo||"#8b5cf6";return e.jsxs(N,{to:`/forum/profile/${r.username}`,className:"flex items-center gap-3 rounded-2xl border border-white/10 bg-white/5 px-3 py-2 transition hover:border-cyan-400/50",children:[e.jsx("div",{className:"h-8 w-8 rounded-xl border border-white/10",style:{background:r.profile.avatarData?`url(${r.profile.avatarData}) center/cover`:`linear-gradient(135deg, ${o}, ${i})`}}),e.jsx("span",{className:"font-semibold text-white",children:r.username})]},r.id)}),!s.entries.length&&e.jsx("div",{className:"text-xs text-zinc-400/70",children:s.empty})]})]},s.title))}),e.jsxs("div",{className:"mb-6 flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"relative min-w-[220px] flex-1",children:[e.jsx(q,{className:"pointer-events-none absolute left-4 top-1/2 h-4 w-4 -translate-y-1/2 text-zinc-400"}),e.jsx("input",{className:"input w-full rounded-2xl border-white/10 bg-white/[0.03] pl-11 text-sm text-white placeholder:text-zinc-400",placeholder:"\u041F\u043E\u0438\u0441\u043A \u043F\u043E \u043D\u0438\u043A\u0443, \u043F\u043E\u0447\u0442\u0435 \u0438\u043B\u0438 \u0440\u043E\u043B\u0438",value:l,onChange:s=>d(s.target.value)})]}),e.jsxs("div",{className:"text-xs uppercase tracking-[0.32em] text-zinc-400",children:["\u041F\u043E\u043A\u0430\u0437\u0430\u043D\u043E ",h.length," / ",u.length]})]}),e.jsx("div",{className:"grid gap-5 md:grid-cols-2 xl:grid-cols-3",children:h.map(s=>e.jsx(Y,{member:s,highlight:(x==null?void 0:x.id)===s.id},s.id))}),!h.length&&e.jsx("div",{className:"mt-6 rounded-3xl border border-white/10 bg-white/[0.05] p-5 text-sm text-zinc-300/80",children:"\u041D\u0435\u0442 \u0443\u0447\u0430\u0441\u0442\u043D\u0438\u043A\u043E\u0432 \u043F\u043E \u044D\u0442\u043E\u043C\u0443 \u0437\u0430\u043F\u0440\u043E\u0441\u0443."})]})})}export{se as default};
