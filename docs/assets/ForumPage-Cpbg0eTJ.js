import{b as we,c as Ye,j as e,e as qe,f as Ve,h as Xe}from"./index-CAURlCar.js";import{R as n,L as O}from"./react-vendor-DTkXckhQ.js";import{g as Ge}from"./forumStore-BmAAT3KU.js";import{listSections as Ze,listLatestPosts as Qe,listTopics as et}from"./forumRemote-D5s3MT8n.js";import{F as tt}from"./ForumSubnav-Brr4iN2v.js";import{F as rt}from"./ForumSearch-DxL5oXcH.js";import{S as Ne,z as at,L as st}from"./icons-vKdVo13Z.js";const ce=800,$e=["–°–∫–∞–π-–°—Ç—Ä–∞–∂","–ü—Ä–∞–≤–æ-–°–∞–º—É—Ä–∞–π","–ü—É–ª—å—Å-–†–µ–π–¥–µ—Ä","–ö–∏–±–µ—Ä-–ú–µ–¥–∏–∫","–ù–µ–æ–Ω-–¢–∞–∫—Ç–∏–∫","–ê—Å—Ç—Ä–∞–ª-–û—Ñ–∏—Ü–µ—Ä","–§–∞–Ω—Ç–æ–º-–õ–µ—á–∞—â–∏–π","–®–∏—Ñ—Ä-–ò–Ω—Å–ø–µ–∫—Ç–æ—Ä","–ö–≤–∞–Ω—Ç-–ë–æ–µ—Ü","–ü–∏–∫—Å–µ–ª—å-–í–æ–ª–∫","–¢—É–º–∞–Ω-–ö–æ–º–∞–Ω–¥–æ—Ä","–ò—Å–∫—Ä–∞-–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å","–ù—É–ª—å-–ì—Ä–∞–≤–∏—Ç–∞—Ü–∏—è","–ü–æ–ª—è—Ä–Ω—ã–π –ü–∏–ª–æ—Ç","–ì–æ—Ä–æ–¥—Å–∫–æ–π –•–∏—Ä—É—Ä–≥","–°—ã–≤–æ—Ä–æ—Ç–∫–∞-Vibe","–°—Ç–µ—Ä–∏–ª—å–Ω—ã–π –ù–∏–Ω–¥–∑—è","–°–∫–∞–ª—å–ø–µ–ª—å-–û–±–ª–∞–∫–æ","–†–µ–Ω—Ç–≥–µ–Ω-–ü–∞–Ω–∫","–í–∞—Ç–∫–∞-Supreme"];function Ie(){const i=$e[Math.floor(Math.random()*$e.length)],c=Math.floor(Math.random()*900+100);return`${i} ${c}`}function nt(i){try{return typeof i=="string"?JSON.parse(i):(typeof Blob<"u"&&i instanceof Blob,null)}catch{return null}}function Re(i){return new Date(i).toLocaleTimeString(void 0,{hour12:!1})}function ot(i){const c=Math.max(0,Date.now()-i),m=Math.floor(c/6e4),h=Math.floor(c/36e5);if(m<1)return"just now";if(m<60)return`${m} minute${m===1?"":"s"} ago`;if(h<24)return`${h} hour${h===1?"":"s"} ago`;const g=Math.floor(h/24);return`${g} day${g===1?"":"s"} ago`}function it(i){return i.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function ct(i){if(!i)return null;const c=i.trim();return c?`@${it(c).replace(/\s+/g,"\\s+")}(?=\\b|$)`:null}function ve(i,c){if(!c)return!1;try{return new RegExp(c,"iu").test(i)}catch{return!1}}function ye(i,c){if(!c)return i;try{const m=new RegExp(c,"giu"),h=[];let g=0,x=0,M;for(;(M=m.exec(i))!==null;)M.index>g&&h.push(e.jsx(n.Fragment,{children:i.slice(g,M.index)},`t-${x++}`)),h.push(e.jsx("span",{className:"rc-ping",children:M[0]},`m-${x++}`)),g=m.lastIndex;return g<i.length&&h.push(e.jsx(n.Fragment,{children:i.slice(g)},`t-${x++}`)),h.length?h:i}catch{return i}}const le=["üòÄ","üòÅ","üòÇ","ü§£","üòÖ","üòé","üòç","üòò","üòá","ü§ù","üëå","üëç","üî•","üíØ","‚ú®","‚ö°","üéØ","üöÄ","üõ°Ô∏è","üèÜ","üí¨","üìù","üìå","üì£","üóÇÔ∏è","üß†","üìà","üïí","üõ†Ô∏è","üîí","‚úÖ","‚ùó","‚ö†Ô∏è","‚ùì","üéâ","ü•≥","üôå","ü§ò","ü§ñ","üëÄ","üí°","üß≠","üì¶","üõéÔ∏è","üì°","üõ∞Ô∏è","üß™","üìï","üß∑","ü™™","üß∞","üß±","üõ∞","üóÉÔ∏è"],lt=String.raw`
:root{
  --accent:#8b5cf6; --accent-600:#7c3aed;
  --text-1:#e8ecf3; --text-2:#98a2b3; --text-3:#667085;
  --surface:#0f1117; --surface-2:#0b0d14; --bg-2:#0b0d14; --border:rgba(255,255,255,.08);
  --card-shadow:0 20px 50px -35px rgba(0,0,0,.6);
  --radius-lg:12px; --radius-xl:14px; --radius-2xl:18px;
}
/* === –û–±—â–∏–µ —Å—Ç–∏–ª–∏ (classic/forum) ‚Äî –∫–∞–∫ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏ === */
.rc-wrap{border:1px solid var(--border);background:var(--surface);border-radius:12px;overflow:hidden;font:13px/1.4 Inter, -apple-system, BlinkMacSystemFont,'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans','Helvetica Neue', sans-serif;box-shadow:var(--card-shadow);color:var(--text-1);} 
.rc-head{padding:12px 16px;background:var(--bg-2);border-bottom:1px solid var(--border);display:flex;justify-content:space-between;align-items:center;gap:16px;position:relative;}
.rc-head-title{font-weight:600;font-size:14px;letter-spacing:.08em;text-transform:uppercase;}
.rc-head-meta{display:flex;align-items:center;gap:12px;}
.rc-presence,.rc-presence-btn{display:flex;align-items:center;gap:8px;font-size:12px;letter-spacing:.04em;} 
.rc-presence{color:var(--text-2);} 
.rc-presence-dot{width:10px;height:10px;border-radius:999px;background:#ef4444;box-shadow:0 0 8px rgba(239,68,68,.3);transition:all .25s ease;} 
.rc-presence-dot.on{background:#22c55e;box-shadow:0 0 8px rgba(34,197,94,.35);} 
.rc-presence-count{display:flex;align-items:baseline;gap:4px;font-weight:600;color:var(--text-1);} 
.rc-presence-count span{font-size:11px;font-weight:500;color:var(--text-2);text-transform:uppercase;} 
.rc-presence-btn{border:1px solid var(--border);border-radius:999px;padding:6px 12px;background:var(--surface-2);color:var(--text-1);cursor:pointer;transition:background .2s ease,border-color .2s ease,box-shadow .2s ease,color .2s ease;} 
.rc-presence-btn:hover,.rc-presence-btn:focus-visible{background:var(--surface);border-color:var(--accent);color:var(--accent);box-shadow:0 0 0 2px rgba(59,130,246,.2);outline:none;} 
.rc-presence-btn.open{background:var(--surface);border-color:var(--accent);color:var(--accent);box-shadow:0 0 0 2px rgba(59,130,246,.2);} 
.rc-role-pill{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:999px;font-size:11px;font-weight:600;letter-spacing:.08em;text-transform:uppercase;background:var(--surface-2);color:var(--accent);border:1px solid var(--accent);} 
.rc-presence-panel{position:absolute;top:calc(100% + 12px);right:0;width:min(260px,80vw);background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-2xl);padding:14px 16px;box-shadow:var(--card-shadow);z-index:40;} 
.rc-presence-title{font-size:12px;font-weight:600;letter-spacing:.12em;text-transform:uppercase;color:var(--text-2);} 
.rc-presence-panel ul{margin:10px 0 0 0;padding:0;list-style:none;max-height:220px;overflow:auto;} 
.rc-presence-panel li{display:flex;align-items:center;gap:8px;padding:6px 0;font-size:12px;border-top:1px solid var(--border);} 
.rc-presence-panel li:first-child{border-top:none;padding-top:0;} 
.rc-presence-panel li:last-child{padding-bottom:0;} 
.rc-presence-panel li.self{color:var(--accent);font-weight:600;} 
.rc-presence-dot-sm{width:7px;height:7px;border-radius:999px;background:#22c55e;box-shadow:0 0 6px rgba(34,197,94,.35);} 
.rc-presence-you{margin-left:auto;font-size:10px;text-transform:uppercase;letter-spacing:.08em;color:var(--text-2);} 
.rc-presence-empty{font-size:12px;color:var(--text-2);margin-top:8px;} 
.rc-list{height:280px;overflow:auto;background:var(--surface);border-top:1px solid var(--border);border-bottom:1px solid var(--border);} 
.rc-list ul{list-style:none;margin:0;padding:0;} 
.rc-list li{padding:6px 12px;white-space:pre-wrap;word-break:break-word;display:flex;flex-wrap:wrap;align-items:flex-start;gap:4px;} 
.rc-list li+li{border-top:1px solid var(--border);} 
.rc-list li.rc-mention{background:var(--surface-2);box-shadow:inset 0 0 0 1px var(--accent);border-left:3px solid var(--accent);} 
.rc-ping{display:inline-block;background:var(--accent);color:#fff;border-radius:6px;padding:0 4px;margin:0 1px;font-weight:700;letter-spacing:.02em;} 
.rc-ts{color:var(--text-2);margin-right:6px;} 
.rc-me{color:#16a34a;font-weight:600;} 
.rc-other{color:var(--text-1);font-weight:600;} 
.rc-admin{color:var(--accent);font-weight:700;} 
.rc-actions{display:flex;gap:4px;margin-left:auto;} 
.rc-ax{font-size:11px;background:var(--surface-2);border:1px solid var(--border);color:var(--text-1);border-radius:6px;padding:2px 6px;cursor:pointer;} 
.rc-ax:hover{background:var(--surface);} 
.rc-empty{opacity:.7;padding:12px;color:var(--text-2);} 
.rc-form{display:flex;gap:8px;padding:10px 12px;background:var(--bg-2);position:relative;align-items:center;} 
.rc-input{flex:1;background:var(--surface);border:1px solid var(--border);color:var(--text-1);border-radius:var(--radius-lg);padding:8px 10px;} 
.rc-input:focus-visible{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(59,130,246,.25);} 
.rc-emoji-btn{width:38px;height:38px;border-radius:var(--radius-lg);border:1px solid var(--border);background:var(--surface);color:var(--text-1);display:grid;place-items:center;font-size:18px;cursor:pointer;transition:background .2s ease,border-color .2s ease,transform .2s ease,color .2s ease;} 
.rc-emoji-btn:hover{background:var(--surface-2);} 
.rc-emoji-btn:disabled{opacity:.6;cursor:not-allowed;} 
.rc-emoji-btn.open{border-color:var(--accent);color:var(--accent);box-shadow:0 0 0 2px rgba(59,130,246,.2);} 
.rc-btn{background:var(--accent);border:none;color:#fff;border-radius:var(--radius-lg);padding:0 18px;font-weight:600;cursor:pointer;transition:opacity .2s ease,transform .2s ease;} 
.rc-btn:hover{opacity:.92;} 
.rc-btn:active{transform:scale(.98);} 
.rc-btn:disabled{opacity:.6;cursor:not-allowed;} 
.rc-emoji-panel{position:absolute;bottom:56px;right:12px;width:min(320px,90vw);background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-xl);box-shadow:var(--card-shadow);padding:12px;display:flex;flex-direction:column;gap:10px;z-index:60;} 
.rc-emoji-title{font-size:11px;letter-spacing:.08em;text-transform:uppercase;color:var(--text-2);font-weight:600;} 
.rc-emoji-grid{display:grid;grid-template-columns:repeat(8,minmax(0,1fr));gap:6px;} 
.rc-emoji-item{height:36px;border-radius:10px;border:1px solid transparent;background:var(--surface-2);display:flex;align-items:center;justify-content:center;font-size:18px;cursor:pointer;transition:background .2s ease,border-color .2s ease,transform .15s ease;} 
.rc-emoji-item:hover{background:var(--surface);border-color:var(--accent);transform:translateY(-1px);} 
.rc-emoji-item:focus-visible{outline:none;border-color:var(--accent);box-shadow:0 0 0 2px rgba(59,130,246,.2);} 
.rc-emoji-empty{font-size:12px;color:var(--text-2);text-align:center;padding:10px 0;} 
.nick-back{position:fixed;inset:0;background:rgba(15,15,18,.55);backdrop-filter:blur(6px);display:flex;align-items:center;justify-content:center;z-index:1000;padding:16px;} 
.nick-card{width:min(92vw,520px);background:var(--surface);border:1px solid var(--border);border-radius:var(--radius-2xl);padding:18px;color:var(--text-1);box-shadow:var(--card-shadow);} 
.nick-row{display:flex;gap:8px;margin-top:12px;} 
.nick-input{flex:1;background:var(--surface);border:1px solid var(--border);color:var(--text-1);border-radius:var(--radius-lg);padding:8px 10px;} 
.nick-btn{background:var(--accent);border:1px solid var(--accent-600,var(--accent));color:#fff;border-radius:var(--radius-lg);padding:8px 12px;cursor:pointer;font-weight:600;} 
.nick-btn:hover{background:var(--accent-600,var(--accent));} 
.nick-pill{display:inline-flex;align-items:center;gap:6px;margin-top:10px;margin-right:8px;background:var(--surface-2);border:1px solid var(--border);border-radius:999px;padding:4px 10px;cursor:pointer;font-size:12px;color:var(--text-2);} 
.nick-pill:hover{color:var(--accent);border-color:var(--accent);} 
.nick-warn{font-size:12px;color:var(--text-2);margin-top:6px;} 
/* === Forum skin (–æ—Å—Ç–∞–≤–ª—è–µ–º –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π) === */
.forum-chat{border:1px solid rgba(255,255,255,.08);background:rgba(15,16,22,.95);border-radius:12px;padding:16px;box-shadow:0 20px 50px -35px rgba(0,0,0,.6);backdrop-filter:blur(10px);color:var(--text-1);} 
.forum-chat-grid{display:grid;grid-template-columns:minmax(0,240px) minmax(0,1fr);gap:28px;align-items:start;} 
.forum-chat-roster{display:flex;flex-direction:column;gap:16px;} 
.forum-chat-roster h3{font-size:13px;letter-spacing:.24em;text-transform:uppercase;color:rgba(204,208,255,.7);margin:0;} 
.fc-roster-list{display:flex;flex-direction:column;gap:12px;} 
.fc-roster-item{display:flex;align-items:center;gap:12px;padding:12px 14px;border-radius:18px;background:rgba(18,20,32,.75);border:1px solid rgba(139,92,246,.25);box-shadow:0 12px 30px -24px rgba(83,42,166,.5);} 
.fc-avatar{width:44px;height:44px;border-radius:14px;display:grid;place-items:center;font-weight:700;letter-spacing:.08em;background:rgba(139,92,246,.25);color:#ede9fe;text-transform:uppercase;} 
.fc-roster-body{display:flex;flex-direction:column;gap:4px;} 
.fc-roster-name{font-size:14px;font-weight:600;color:#f4f5ff;} 
.fc-roster-role{font-size:11px;letter-spacing:.16em;text-transform:uppercase;color:rgba(204,208,255,.65);} 
.fc-status{margin-left:auto;display:flex;flex-direction:column;align-items:flex-end;gap:4px;font-size:11px;letter-spacing:.18em;text-transform:uppercase;color:rgba(204,208,255,.6);} 
.fc-status-dot{width:10px;height:10px;border-radius:999px;background:#22c55e;box-shadow:0 0 10px rgba(34,197,94,.35);} 
.fc-roster-empty{padding:16px;border-radius:16px;border:1px dashed rgba(139,92,246,.35);text-align:center;font-size:12px;color:rgba(204,208,255,.55);} 
.fc-skeleton{position:relative;overflow:hidden;border-radius:18px;background:rgba(18,20,32,.65);height:64px;} 
.fc-skeleton::after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(139,92,246,.28),transparent);animation:fcShine 1.25s infinite;} 
@keyframes fcShine{0%{transform:translateX(-100%);}100%{transform:translateX(100%);}} 
.forum-chat-main{display:flex;flex-direction:column;gap:18px;min-width:0;} 
.forum-chat-head{display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;gap:16px;} 
.forum-chat-head-title{font-size:13px;letter-spacing:.32em;text-transform:uppercase;color:rgba(204,208,255,.7);} 
.forum-chat-presence{display:flex;align-items:center;gap:12px;font-size:12px;color:rgba(204,208,255,.7);} 
.forum-chat-presence strong{font-size:22px;letter-spacing:.12em;font-weight:700;color:#fdfcff;display:block;} 
.forum-chat-presence span{display:block;font-size:11px;letter-spacing:.18em;text-transform:uppercase;} 
.forum-chat-presence-dot{width:12px;height:12px;border-radius:999px;background:#ef4444;box-shadow:0 0 10px rgba(239,68,68,.35);transition:all .25s ease;} 
.forum-chat-presence-dot.on{background:#22c55e;box-shadow:0 0 10px rgba(34,197,94,.45);} 
.forum-chat-list{max-height:420px;overflow-y:auto;border-radius:10px;border:1px solid rgba(255,255,255,.08);background:rgba(12,13,18,.9);padding:14px;display:flex;flex-direction:column;gap:14px;} 
.fc-item{display:flex;align-items:flex-start;gap:12px;} 
.fc-item.self .fc-avatar{background:rgba(34,197,94,.25);color:#f4fdf8;} 
.fc-body{flex:1;display:flex;flex-direction:column;gap:6px;min-width:0;} 
.fc-meta{display:flex;flex-wrap:wrap;align-items:center;gap:10px;} 
.fc-name{font-weight:600;font-size:14px;color:#f4f5ff;display:flex;align-items:center;gap:8px;} 
.fc-role{display:inline-flex;align-items:center;gap:6px;padding:2px 8px;border-radius:999px;font-size:10px;letter-spacing:.18em;text-transform:uppercase;background:rgba(139,92,246,.18);color:#ede9fe;border:1px solid rgba(139,92,246,.35);} 
.fc-time{font-size:12px;letter-spacing:.08em;color:rgba(204,208,255,.55);} 
.fc-bubble{position:relative;border-radius:10px;padding:10px 12px;background:rgba(20,22,28,.9);border:1px solid rgba(255,255,255,.08);color:#e9e9ff;line-height:1.55;} 
.fc-item.self .fc-bubble{background:rgba(17,32,24,.9);border-color:rgba(34,197,94,.45);} 
.fc-item.mention .fc-bubble{box-shadow:0 0 0 2px rgba(139,92,246,.45);} 
.fc-actions{display:flex;gap:8px;margin-left:auto;} 
.fc-action-btn{font-size:11px;padding:4px 10px;border-radius:12px;border:1px solid rgba(139,92,246,.25);background:rgba(17,19,30,.8);color:rgba(204,208,255,.75);cursor:pointer;transition:background .18s ease,border-color .18s ease,color .18s ease;} 
.fc-action-btn:hover{background:rgba(28,31,46,.85);border-color:rgba(139,92,246,.5);color:#fefeff;} 
.fc-empty{padding:18px;border-radius:18px;background:rgba(17,19,28,.65);color:rgba(204,208,255,.65);text-align:center;font-size:13px;} 
.forum-chat-form{display:grid;grid-template-columns:auto 1fr auto auto;gap:12px;align-items:flex-end;padding:12px 14px;border-radius:10px;border:1px solid rgba(255,255,255,.08);background:rgba(12,13,18,.85);} 
.forum-chat-form textarea{background:rgba(17,19,28,.85);border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:10px 12px;color:#f4f5ff;resize:none;min-height:48px;max-height:220px;line-height:1.55;} 
.forum-chat-textarea{position:relative;display:flex;flex-direction:column;} 
.forum-chat-form textarea:focus-visible{outline:none;border-color:rgba(139,92,246,.55);box-shadow:0 0 0 2px rgba(139,92,246,.25);} 
.forum-chat-btn{width:44px;height:44px;border-radius:10px;border:1px solid rgba(255,255,255,.10);background:rgba(16,18,28,.9);color:#f4f5ff;font-size:18px;display:grid;place-items:center;cursor:pointer;transition:transform .18s ease,border-color .18s ease,background-color .18s ease;} 
.forum-chat-btn:hover{transform:translateY(-1px);border-color:rgba(255,255,255,.18);background:rgba(23,25,36,.95);} 
.forum-chat-btn:disabled{opacity:.55;cursor:not-allowed;transform:none;} 
.forum-chat-send{background:#ff2d87;color:#0b0618;font-weight:700;letter-spacing:.12em;border:none;} 
.forum-chat-send:hover{background:#ff4a98;} 
.forum-chat-attachments{font-size:18px;color:#ff2d87;} 
.forum-chat-emoji{font-size:18px;color:#ff2d87;} 
.forum-chat-skeleton{display:grid;gap:18px;} 
.forum-chat-list-placeholder{height:320px;border-radius:10px;background:rgba(15,17,28,.65);position:relative;overflow:hidden;} 
.forum-chat-list-placeholder::after{content:"";position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(139,92,246,.28),transparent);animation:fcShine 1.25s infinite;} 
.forum-chat-form .forum-chat-btn{height:44px;} 
.forum-chat-roster .fc-skeleton{height:60px;} 
@media (max-width:1024px){.forum-chat-grid{grid-template-columns:minmax(0,1fr);gap:22px;}} 
@media (max-width:768px){.forum-chat-form{grid-template-columns:repeat(2,minmax(0,1fr));}.forum-chat-btn{width:100%;}.forum-chat-textarea{grid-column:span 2;}} 

/* === SHOUTBOX skin (–∫–∞–∫ –Ω–∞ —Å–∫—Ä–∏–Ω–µ) === */
.sb-box{border:1px solid rgba(255,255,255,.08);background:#0c0e15;border-radius:12px;box-shadow:0 16px 36px -28px rgba(0,0,0,.6);color:#e6e9f2;overflow:hidden;font:14px/1.5 Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;}
.sb-head{display:flex;align-items:center;justify-content:space-between;padding:10px 12px;background:#0a0c12;border-bottom:1px solid rgba(255,255,255,.08);} 
.sb-title{font-weight:800;letter-spacing:.1em;text-transform:uppercase;opacity:.92;} 
.sb-head-icons{display:flex;gap:10px;opacity:.8;} 
.sb-icon{width:18px;height:18px;filter:drop-shadow(0 0 6px rgba(255,255,255,.02));}

.sb-list{height:360px;overflow-y:auto;background:#0c0e15;}
.sb-ul{list-style:none;margin:0;padding:0 0 0 0;}
.sb-li{display:flex;align-items:flex-start;gap:8px;padding:8px 12px;border-top:1px solid rgba(255,255,255,.06);} 
.sb-li:first-child{border-top:none;}
.sb-bullet{width:10px;height:10px;border-radius:999px;background:#ff2d87;box-shadow:0 0 10px rgba(255,45,135,.45);margin-top:6px;flex:0 0 auto;}
.sb-row{display:flex;gap:6px;flex-wrap:wrap;align-items:baseline;min-width:0;}
.sb-name{font-weight:700;color:#f5f7ff;white-space:nowrap;}
.sb-role{color:#a7b0c3;opacity:.9;}
.sb-text{color:#d5dbef;word-break:break-word;}
.sb-time{margin-left:auto;color:#8a93a8;font-size:12px;white-space:nowrap;}
.sb-system .sb-name{color:#a78bfa;}
.sb-mention{background:rgba(139,92,246,.2);box-shadow:inset 0 0 0 1px rgba(139,92,246,.55);border-left:3px solid rgba(139,92,246,.8);} 

.sb-form{display:flex;align-items:center;gap:10px;padding:12px;border-top:1px solid rgba(255,255,255,.08);background:#0a0c12;}
.sb-input{flex:1;border:1px solid rgba(255,255,255,.1);background:#101320;border-radius:10px;color:#eef1ff;padding:10px 12px;}
.sb-input::placeholder{color:#8a93a8;letter-spacing:.02em;}
.sb-input:focus-visible{outline:none;border-color:#ff2d87;box-shadow:0 0 0 2px rgba(255,45,135,.25);} 
.sb-btn{width:40px;height:40px;border-radius:10px;border:1px solid rgba(255,255,255,.1);background:#121625;color:#f4f5ff;font-size:18px;display:grid;place-items:center;cursor:pointer;transition:transform .15s ease,border-color .15s ease,background-color .15s ease;} 
.sb-btn:hover{transform:translateY(-1px);border-color:rgba(255,255,255,.18);background:#171a2b;} 
.sb-btn.send{background:#ff2d87;color:#0b0618;border:none;font-weight:800;letter-spacing:.08em;} 
.sb-btn.send:hover{background:#ff3f93;} 
.sb-btn:disabled{opacity:.55;cursor:not-allowed;transform:none;}
/* add-on: avatar + name link styling to match beautiful shoutbox */
.sb-name a{color:#a7c5ff;text-decoration:none;}
.sb-name a:hover{color:#c2d7ff;text-decoration:underline;}
.sb-avatar{width:28px;height:28px;border-radius:999px;display:grid;place-items:center;font-weight:800;font-size:12px;text-transform:uppercase;color:#0b0d14;background:linear-gradient(135deg,#ffd166,#ff2d87);border:1px solid rgba(255,255,255,.12);box-shadow:0 6px 16px -10px rgba(0,0,0,.5), inset 0 0 0 2px rgba(0,0,0,.15);} 
.sb-li.sb-has-avatar .sb-bullet{display:none;} 
.sb-li .rc-ax{border-radius:10px;padding:0 8px;} 
.sb-actions{display:none;gap:6px;margin-left:8px;}
.sb-li:hover .sb-actions{display:inline-flex;}

`;function dt(i){try{const c=new URL(i);return c.protocol=c.protocol==="wss:"?"https:":c.protocol==="ws:"?"http:":c.protocol,c.pathname="/",c.search="",c.hash="",c.toString().replace(/\/+$/,"")}catch{return""}}function pt(i){const c=`@e${i}`;return{NAME_KEY:`chat:nick${c}`,NAME_LOCK:`chat:nick:lock${c}`}}function ut({room:i="global",className:c,variant:m="shoutbox",onRosterChange:h,resolveRole:g}){const x="wss://notifications-worker.wizardiowhy.workers.dev/chat",M=n.useMemo(()=>dt(x),[x]),[U,I]=n.useState(1),[d,G]=n.useState(!1),k=n.useMemo(()=>pt(U),[U]),[R,D]=n.useState(!1),[_,S]=n.useState(0),[T,B]=n.useState([]),[H,K]=n.useState(!1),[o,y]=n.useState(!1);n.useEffect(()=>{if(o)try{te(!1)}catch{}},[o]);const[p,v]=n.useState(""),[C,E]=n.useState([]),A=n.useRef(null),W=n.useRef(null),u=n.useRef(null),z=n.useRef(null),P=n.useRef(null),[Q,ae]=n.useState(!1),se=n.useRef({}),[$,ee]=n.useState(null),[J,te]=n.useState(!0),[ke,Y]=n.useState(""),[re,Fe]=n.useState({}),Se=n.useRef({epochReady:d,needNick:J,nick:$}),Ce=n.useRef(k),V=n.useRef(null),Ee=n.useMemo(()=>$??"",[$]),L=n.useMemo(()=>Ee.trim(),[Ee]),X=n.useMemo(()=>ct(L||null),[L]),pe={developer:{label:"Developer",color:"#22d3ee"},admin:{label:"Admin",color:"#ef4444",textColor:"#fee2e2"},moderator:{label:"Moderator",color:"#8b5cf6"},vip:{label:"VIP",color:"#eab308"},user:{label:"User",color:"#94a3b8"},newbie:{label:"Newbie",color:"#22d3ee"}},ue=n.useCallback(t=>{var s;const a=g==null?void 0:g(t);if(a)return a;const r=(s=re[t])==null?void 0:s.role;return r&&pe[r]?pe[r]:o&&t.trim()===L?pe.admin:null},[g,re,o,L]),ne=n.useCallback(t=>{const a=t.trim();if(!a)return{background:"linear-gradient(135deg,#312e81,#7c3aed)",color:"#ede9fe"};let r=0;for(let j=0;j<a.length;j+=1)r=(r+a.charCodeAt(j)*17)%360;const s=r,b=(r+42)%360;return{background:`linear-gradient(135deg, hsla(${s},80%,56%,0.85), hsla(${b},78%,48%,0.85))`,color:"#fdfcff"}},[]),_e=n.useCallback(t=>{const a=re[t],r=a==null?void 0:a.avatar;return r?{backgroundImage:`url(${r})`,backgroundSize:"cover",backgroundPosition:"center",color:"transparent"}:ne(t)},[re,ne]),Me=n.useCallback(t=>{const a=t.trim();if(!a)return"#cbd5e1";let r=0;for(let s=0;s<a.length;s+=1)r=(r*31+a.charCodeAt(s))%360;return`hsl(${r}, 80%, 70%)`},[]),Ue=n.useCallback((t,a)=>a!=null&&a.color?{color:a.color}:{color:Me(t)},[Me]);n.useEffect(()=>{if(d)try{const t=localStorage.getItem(k.NAME_KEY),a=localStorage.getItem(k.NAME_LOCK)==="1";t&&a?(ee(t),te(!1),Y(t)):t&&!a?(ee(t),Y(t),te(!0)):(ee(null),Y(""),te(!0))}catch{ee(null),Y(""),te(!0)}},[d,k.NAME_KEY,k.NAME_LOCK]),n.useEffect(()=>{Se.current={epochReady:d,needNick:J,nick:$}},[d,J,$]),n.useEffect(()=>{d&&(async()=>{let t=null;try{const a=Ge();a!=null&&a.username&&(t=a.username)}catch{}try{const a=await we();a!=null&&a.username&&(t=a.username)}catch{}if(!t)try{const a=localStorage.getItem("forum:session")||sessionStorage.getItem("forum:session"),r=a?JSON.parse(a):null;r!=null&&r.username&&(t=r.username)}catch{}if(t){ee(t),Y(t),te(!1);try{localStorage.setItem(k.NAME_KEY,t),localStorage.setItem(k.NAME_LOCK,"1")}catch{}const a=A.current;if(a&&a.readyState===WebSocket.OPEN&&V.current!==t)try{a.send(JSON.stringify({type:"hello",name:t})),V.current=t}catch{}}})()},[d,k.NAME_KEY,k.NAME_LOCK]),n.useEffect(()=>{Ce.current=k},[k]),n.useEffect(()=>{o||K(!1)},[o]),n.useEffect(()=>{typeof h=="function"&&h(T,_)},[h,T,_]),n.useEffect(()=>{if(!(typeof window>"u")){window.__simplechatAdminState=o;try{window.dispatchEvent(new CustomEvent("simplechat:admin-state",{detail:{isAdmin:o}}))}catch{}}},[o]),n.useEffect(()=>{R||(K(!1),B([]))},[R]),n.useEffect(()=>{if(!H)return;const t=r=>{const s=u.current;s&&!s.contains(r.target)&&K(!1)},a=r=>{r.key==="Escape"&&K(!1)};return window.addEventListener("mousedown",t),window.addEventListener("keydown",a),()=>{window.removeEventListener("mousedown",t),window.removeEventListener("keydown",a)}},[H]),n.useEffect(()=>{if(!Q)return;const t=r=>{const s=z.current;s&&!s.contains(r.target)&&ae(!1)},a=r=>{r.key==="Escape"&&ae(!1)};return window.addEventListener("mousedown",t),window.addEventListener("keydown",a),()=>{window.removeEventListener("mousedown",t),window.removeEventListener("keydown",a)}},[Q]),n.useEffect(()=>{J&&(V.current=null)},[J]),n.useEffect(()=>{const t=new Set;for(const s of C)s!=null&&s.author&&t.add(s.author);for(const s of T)s&&t.add(s);const a=Array.from(t).filter(s=>!re[s]);if(!a.length)return;let r=!1;return(async()=>{var s;for(const b of a.slice(0,40)){if(r)break;try{const j=await Ye(b);if(j&&j.user){const N=(s=j.user)==null?void 0:s.role,l=j.profile||{},f=l.avatarData||l.avatar||l.avatarUrl||void 0;Fe(w=>w[b]?w:{...w,[b]:{role:N,avatar:f}})}}catch{}}})(),()=>{r=!0}},[C,T,re]),n.useEffect(()=>{let t=!1,a=null;const r=Date.now(),s=b=>{if(t)return;I(b);const j=Date.now()-r,l=Math.max(0,Math.min(900,520-j)),f=()=>{t||G(!0)};l<=0?f():a=setTimeout(f,l)};return M?((async()=>{try{const b=await fetch(`${M}/nick-epoch`,{credentials:"include"}),j=b.ok?await b.json().catch(()=>({})):{},N=Number(j.epoch)||1;s(N)}catch{s(1)}})(),()=>{t=!0,a&&clearTimeout(a)}):(s(1),()=>{t=!0,a&&clearTimeout(a)})},[M]),n.useEffect(()=>{const t=W.current;t&&(t.scrollTop=t.scrollHeight)},[C.length]),n.useEffect(()=>{let t=!1,a=0,r=null;const s=()=>{if(t)return;D(!1);const b=new URL(x);b.searchParams.set("room",i),r=new WebSocket(b),A.current=r,r.addEventListener("open",()=>{D(!0),se.current={},a=0,S(0);const{epochReady:N,needNick:l,nick:f}=Se.current;if(N&&f&&!l)try{r.send(JSON.stringify({type:"hello",name:f})),V.current=f}catch{}}),r.addEventListener("message",async N=>{try{let l=nt(N.data);if(!l&&typeof Blob<"u"&&N.data instanceof Blob&&(l=JSON.parse(await N.data.text())),!l)return;if(l.type==="history")E(l.messages);else if(l.type==="message"){const f=l.cid;if(f&&se.current[f]){const w=se.current[f];delete se.current[f],E(q=>{const ie=q.filter(ge=>ge.id!==w);return ie.some(ge=>ge.id===l.message.id)?ie:[...ie,l.message]})}else E(w=>w.some(q=>q.id===l.message.id)?w:[...w,l.message])}else if(l.type==="delete")E(f=>f.filter(w=>w.id!==l.id));else if(l.type==="edit")E(f=>f.map(w=>w.id===l.id?{...w,text:l.text}:w));else if(l.type==="system"){if(l.text==="admin-ok"?y(!0):l.text==="hello-ok"&&!l.name&&y(!1),l.text==="presence"){const f=Number(l.count);if(S(Number.isFinite(f)&&f>0?Math.round(f):0),Array.isArray(l.names)){const w=l.names.map(q=>typeof q=="string"?q.trim():"").filter(q=>q.length>0);B(w)}else B([])}if(l.name&&(l.text==="hello-ok"||l.text==="admin-ok")){ee(l.name),Y(l.name),V.current=l.name;try{const{NAME_KEY:f,NAME_LOCK:w}=Ce.current;localStorage.setItem(f,l.name),localStorage.setItem(w,"1")}catch{}te(!1)}}}catch{}});const j=()=>{t||(D(!1),S(0),B([]),K(!1),a=Math.min(a+1,6),setTimeout(s,400*a))};r.addEventListener("close",j),r.addEventListener("error",()=>r==null?void 0:r.close())};return s(),()=>{t=!0;try{r==null||r.close()}catch{}A.current=null,V.current=null}},[x,i]),n.useEffect(()=>{const t=A.current;if(!(!t||t.readyState!==WebSocket.OPEN)&&!(!d||J||!$)&&V.current!==$)try{t.send(JSON.stringify({type:"hello",name:$})),V.current=$}catch{}},[d,J,$]);function Ke(){const a=(ke||"").trim().slice(0,80).replace(/[^\p{L}\p{N}_ -]+/gu,"");ee(a||null),Y(a);try{localStorage.setItem(k.NAME_KEY,a)}catch{}const r=A.current;if(r&&r.readyState===WebSocket.OPEN)try{r.send(JSON.stringify({type:"hello",name:a})),V.current=a}catch{}}const[Z,Ae]=n.useState(null);n.useEffect(()=>{(async()=>{try{Ae(await we())}catch{Ae(null)}})()},[]);const ze=n.useMemo(()=>{const t=Z!=null&&Z.mutedUntil?Date.parse(Z.mutedUntil):0;return!["developer","admin","moderator"].includes(String((Z==null?void 0:Z.role)||""))&&!!t&&t>Date.now()},[Z]);function de(){const a=p.replace(/\r/g,"").trim(),r=A.current;if(!d||!$||J||!a||!r||r.readyState!==WebSocket.OPEN||ze)return;const s=`${Date.now()}_${Math.random().toString(36).slice(2)}`,b=`loc_${s}`;se.current[s]=b,E(j=>[...j,{id:b,author:o?"Admin":$,text:a,ts:Date.now()}]),r.send(JSON.stringify({type:"message",text:a.slice(0,ce),cid:s})),v(""),oe()}const F=d&&R&&(!!$||o)&&!J&&!ze,We=t=>{t.key==="Enter"&&(t.ctrlKey||t.metaKey)&&(t.preventDefault(),de())};n.useEffect(()=>{F||ae(!1)},[F]);function xe(t){const a=`@${t} `;v(s=>s?s.replace(/\s+$/," ")+a:a);const r=P.current;setTimeout(()=>{try{if(r){r.focus();const s=r.value.length;r.selectionStart=r.selectionEnd=s}}catch{}},0)}const me=()=>{F&&ae(t=>!t)},oe=n.useCallback(()=>{if(m!=="forum")return;const t=P.current;if(!t||t.tagName!=="TEXTAREA")return;const a=t;a.style.height="auto";const r=Math.min(a.scrollHeight,220);a.style.height=`${r}px`},[m]);n.useEffect(()=>{oe()},[p,oe]);const fe=t=>{v(r=>`${r}${t}`),ae(!1);const a=()=>{const r=P.current;if(r){const s=r.value.length;r.focus();try{r.setSelectionRange(s,s)}catch{}oe()}};typeof window<"u"&&typeof window.requestAnimationFrame=="function"?window.requestAnimationFrame(a):setTimeout(a,0)},he=t=>{const a=A.current;!o||!a||a.readyState!==WebSocket.OPEN||a.send(JSON.stringify({type:"delete",id:t}))},be=(t,a)=>{var b;const r=A.current;if(!o||!r||r.readyState!==WebSocket.OPEN)return;const s=(b=prompt("–ò–∑–º–µ–Ω–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ:",a))==null?void 0:b.trim();s&&r.send(JSON.stringify({type:"edit",id:t,text:s.slice(0,ce)}))},Le=t=>t==="Admin"?"rc-admin":t===$?"rc-me":"rc-other",Be=()=>e.jsxs("div",{className:"rc-wrap","aria-busy":!d,children:[e.jsxs("div",{ref:u,className:"rc-head",children:[e.jsx("div",{className:"rc-head-title",children:"–ö–æ–º–∞–Ω–¥–Ω—ã–π —á–∞—Ç"}),e.jsxs("div",{className:"rc-head-meta",children:[o?e.jsxs("button",{type:"button",className:`rc-presence rc-presence-btn${H?" open":""}`,onClick:()=>K(t=>!t),"aria-expanded":H,"aria-controls":"rc-presence-panel","aria-label":"–ö—Ç–æ —Å–µ–π—á–∞—Å –≤ —Å–µ—Ç–∏",children:[e.jsx("span",{className:`rc-presence-dot ${R?"on":""}`,"aria-hidden":!0}),e.jsxs("span",{className:"rc-presence-count",children:[R?Math.max(_,0):0,e.jsx("span",{children:"–≤ —Å–µ—Ç–∏"})]})]}):e.jsxs("div",{className:"rc-presence",role:"status","aria-live":"polite",children:[e.jsx("span",{className:`rc-presence-dot ${R?"on":""}`,"aria-hidden":!0}),e.jsxs("span",{className:"rc-presence-count",children:[R?Math.max(_,0):0,e.jsx("span",{children:"–≤ —Å–µ—Ç–∏"})]})]}),o&&e.jsx("span",{className:"rc-role-pill",children:"ADMIN"})]}),o&&H&&e.jsxs("div",{id:"rc-presence-panel",className:"rc-presence-panel",role:"dialog","aria-label":"–°–ø–∏—Å–æ–∫ –∫—Ç–æ –≤ —Å–µ—Ç–∏",children:[e.jsx("div",{className:"rc-presence-title",children:"–°–µ–π—á–∞—Å –≤ —Å–µ—Ç–∏"}),T.length?e.jsx("ul",{children:T.map(t=>e.jsxs("li",{className:t===L?"self":void 0,children:[e.jsx("span",{className:"rc-presence-dot-sm","aria-hidden":!0}),e.jsx("span",{children:t}),t===L&&e.jsx("span",{className:"rc-presence-you",children:"–≤—ã"})]},t))}):e.jsx("div",{className:"rc-presence-empty",children:"–ù–∏–∫–æ–≥–æ –Ω–µ—Ç"})]})]}),e.jsx("div",{ref:W,className:"rc-list",children:d?C.length===0?e.jsx("div",{className:"rc-empty",children:"‚Ä¶"}):e.jsx("ul",{children:C.map(t=>{const a=L?t.author.trim()===L:!1,r=!!(X&&L&&!a&&ve(t.text,X)),s=r?ye(t.text,X):t.text;return e.jsxs("li",{className:r?"rc-mention":void 0,children:[e.jsxs("span",{className:"rc-ts",children:["[",Re(t.ts),"]"]}),e.jsx(O,{to:`/forum/profile/${encodeURIComponent(t.author)}`,className:Le(t.author),children:t.author}),e.jsx("button",{className:"rc-ax",type:"button",onClick:()=>xe(t.author),title:`@${t.author}`,children:"@"}),e.jsx("span",{children:": "}),e.jsx("span",{className:"rc-msg",children:s}),o&&e.jsxs("span",{className:"rc-actions",children:[e.jsx("button",{className:"rc-ax",onClick:()=>be(t.id,t.text),children:"–†–µ–¥."}),e.jsx("button",{className:"rc-ax",onClick:()=>he(t.id),children:"–£–¥–∞–ª."})]})]},t.id)})}):e.jsx("div",{className:"rc-empty",children:"–ó–∞–≥—Ä—É–∑–∫–∞‚Ä¶"})}),e.jsxs("form",{ref:z,className:"rc-form",onSubmit:t=>{t.preventDefault(),de()},children:[e.jsx("button",{type:"button",className:`rc-emoji-btn${Q?" open":""}`,onClick:me,disabled:!F,"aria-label":"–í—Å—Ç–∞–≤–∏—Ç—å —Å–º–∞–π–ª–∏–∫",children:"üòä"}),e.jsx("input",{ref:P,className:"rc-input",placeholder:"–Ω–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ‚Ä¶",value:p,onChange:t=>v(t.target.value),maxLength:ce,disabled:!F}),e.jsx("button",{type:"submit",className:"rc-btn",disabled:!F,children:"‚ñ∂"}),Q&&e.jsxs("div",{className:"rc-emoji-panel",role:"menu","aria-label":"–ü–∞–ª–∏—Ç—Ä–∞ —Å–º–∞–π–ª–∏–∫–æ–≤",children:[e.jsx("div",{className:"rc-emoji-title",children:"–°–º–∞–π–ª–∏–∫–∏"}),le.length?e.jsx("div",{className:"rc-emoji-grid",children:le.map(t=>e.jsx("button",{type:"button",className:"rc-emoji-item",onClick:()=>fe(t),"aria-label":`–í—Å—Ç–∞–≤–∏—Ç—å ${t}`,children:t},t))}):e.jsx("div",{className:"rc-emoji-empty",children:"–ù–∏—á–µ–≥–æ –Ω–µ—Ç"})]})]})]}),He=()=>{const t=T,a=R?Math.max(_,t.length):0;return e.jsx("div",{className:"forum-chat","aria-busy":!d,children:e.jsxs("div",{className:"forum-chat-grid",children:[e.jsxs("aside",{className:"forum-chat-roster",children:[e.jsx("h3",{children:"–û–Ω–ª–∞–π–Ω"}),d?e.jsx("div",{className:"fc-roster-list",children:t.length?t.map(r=>{const s=ue(r),b=r.trim(),j=b?b.slice(0,2).toUpperCase():"??",N=ne(r);return e.jsxs("div",{className:"fc-roster-item",children:[e.jsx("div",{className:"fc-avatar",style:N,children:j}),e.jsxs("div",{className:"fc-roster-body",children:[e.jsx("div",{className:"fc-roster-name",children:r}),e.jsx("div",{className:"fc-roster-role",style:s?{color:s.textColor??"#ede9fe"}:void 0,children:s?s.label:"–£—á–∞—Å—Ç–Ω–∏–∫"})]}),e.jsxs("div",{className:"fc-status",children:[e.jsx("span",{className:"fc-status-dot","aria-hidden":!0}),e.jsx("span",{children:"online"})]})]},r)}):e.jsx("div",{className:"fc-roster-empty",children:"–ü–æ–∫–∞ –Ω–∏–∫–æ–≥–æ"})}):e.jsx("div",{className:"fc-roster-list",children:Array.from({length:4}).map((r,s)=>e.jsx("div",{className:"fc-skeleton","aria-hidden":!0},s))})]}),e.jsxs("div",{className:"forum-chat-main",children:[e.jsxs("div",{className:"forum-chat-head",children:[e.jsx("div",{className:"forum-chat-head-title",children:"–ö–æ–º–∞–Ω–¥–Ω—ã–π —á–∞—Ç"}),e.jsxs("div",{className:"forum-chat-presence",children:[e.jsx("span",{className:`forum-chat-presence-dot ${R?"on":""}`,"aria-hidden":!0}),e.jsxs("div",{children:[e.jsx("strong",{children:a}),e.jsx("span",{children:"–≤ —Å–µ—Ç–∏"})]})]})]}),d?e.jsxs(e.Fragment,{children:[e.jsx("div",{ref:W,className:"forum-chat-list",children:C.length===0?e.jsx("div",{className:"fc-empty",children:"–°–æ–æ–±—â–µ–Ω–∏–π –ø–æ–∫–∞ –Ω–µ—Ç"}):C.map(r=>{const s=L?r.author.trim()===L:!1,b=!!(X&&L&&!s&&ve(r.text,X)),j=b?ye(r.text,X):r.text,N=ue(r.author),l=r.author.trim(),f=l?l.slice(0,2).toUpperCase():"??",w=ne(r.author);return e.jsxs("div",{className:`fc-item${s?" self":""}${b?" mention":""}`,children:[e.jsx("div",{className:"fc-avatar",style:w,children:f}),e.jsxs("div",{className:"fc-body",children:[e.jsxs("div",{className:"fc-meta",children:[e.jsxs("div",{className:"fc-name",children:[e.jsx(O,{to:`/forum/profile/${encodeURIComponent(r.author)}`,children:r.author}),e.jsx("button",{type:"button",className:"fc-action-btn",onClick:()=>xe(r.author),title:`@${r.author}`,children:"@"}),N&&e.jsx("span",{className:"fc-role",style:{background:`${N.color}33`,color:N.textColor??"#ede9fe",borderColor:`${N.color}55`},children:N.label})]}),e.jsx("span",{className:"fc-time",children:Re(r.ts)})]}),e.jsx("div",{className:"fc-bubble",children:j}),o&&e.jsxs("div",{className:"fc-actions",children:[e.jsx("button",{type:"button",className:"fc-action-btn",onClick:()=>be(r.id,r.text),children:"–†–µ–¥."}),e.jsx("button",{type:"button",className:"fc-action-btn",onClick:()=>he(r.id),children:"–£–¥–∞–ª."})]})]})]},r.id)})}),e.jsxs("form",{ref:z,className:"forum-chat-form",onSubmit:r=>{r.preventDefault(),de()},children:[e.jsx("button",{type:"button",className:"forum-chat-btn forum-chat-attachments",onClick:()=>alert("–ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –ø–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –≤ –¥–µ–º–æ."),disabled:!F,"aria-label":"–ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–∞–π–ª",children:"üìé"}),e.jsxs("div",{className:"forum-chat-textarea",children:[e.jsx("textarea",{ref:r=>{P.current=r,r&&oe()},value:p,onChange:r=>v(r.target.value),onKeyDown:We,placeholder:"–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ‚Ä¶",disabled:!F,maxLength:ce}),Q&&e.jsxs("div",{className:"rc-emoji-panel",role:"menu","aria-label":"–ü–∞–ª–∏—Ç—Ä–∞ —Å–º–∞–π–ª–∏–∫–æ–≤",children:[e.jsx("div",{className:"rc-emoji-title",children:"–°–º–∞–π–ª–∏–∫–∏"}),le.length?e.jsx("div",{className:"rc-emoji-grid",children:le.map(r=>e.jsx("button",{type:"button",className:"rc-emoji-item",onClick:()=>fe(r),"aria-label":`–í—Å—Ç–∞–≤–∏—Ç—å ${r}`,children:r},r))}):e.jsx("div",{className:"rc-emoji-empty",children:"–ù–∏—á–µ–≥–æ –Ω–µ—Ç"})]})]}),e.jsx("button",{type:"button",className:`forum-chat-btn forum-chat-emoji${Q?" open":""}`,onClick:me,disabled:!F,"aria-label":"–í—Å—Ç–∞–≤–∏—Ç—å —Å–º–∞–π–ª–∏–∫",children:"üôÇ"}),e.jsx("button",{type:"submit",className:"forum-chat-btn forum-chat-send",disabled:!F,"aria-label":"–û—Ç–ø—Ä–∞–≤–∏—Ç—å",children:"‚û§"})]})]}):e.jsx("div",{className:"forum-chat-skeleton",children:e.jsx("div",{className:"forum-chat-list-placeholder"})})]})]})})},Je=()=>{const t=L||"SB",a=t.slice(0,2).toUpperCase(),r=ne(t);return e.jsxs("div",{className:"sb-box","aria-busy":!d,children:[e.jsxs("div",{className:"sb-head",children:[e.jsxs("div",{className:"sb-title",style:{display:"flex",alignItems:"center",gap:8},children:[e.jsx("svg",{className:"sb-icon",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M3 11h3l4-7v18l-4-7H3V11zm13 9c2.76 0 5-3.13 5-7s-2.24-7-5-7v14z"})}),"SHOUTBOX"]}),e.jsx("div",{className:"sb-head-icons","aria-hidden":!0,children:e.jsx("svg",{className:"sb-icon",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 3l7 5v8l-7 5-7-5V8l7-5zm0 2.2L7 8v8l5 3.6L17 16V8l-5-2.8z"})})})]}),e.jsx("div",{ref:W,className:"sb-list",children:d?C.length===0?e.jsx("ul",{className:"sb-ul",children:e.jsxs("li",{className:"sb-li",children:[e.jsx("div",{className:"sb-avatar",style:r,children:a}),e.jsxs("div",{className:"sb-row",children:[e.jsx("span",{className:"sb-name sb-system",children:"shoutbox"}),e.jsx("span",{className:"sb-text",children:"No messages yet"})]}),e.jsx("span",{className:"sb-time",children:"just now"})]})}):e.jsx("ul",{className:"sb-ul",children:C.map(s=>{const b=L?s.author.trim()===L:!1,j=!!(X&&L&&!b&&ve(s.text,X)),N=j?ye(s.text,X):s.text,l=ue(s.author),f=s.author.trim(),w=f?f.slice(0,2).toUpperCase():"??",q=_e(s.author),ie=s.author.toLowerCase()==="shoutbox"||s.author.toLowerCase()==="system";return e.jsxs("li",{className:`sb-li sb-has-avatar${j?" sb-mention":""}${ie?" sb-system":""}`,children:[e.jsx("div",{className:"sb-avatar",style:q,children:w}),e.jsxs("div",{className:"sb-row",children:[e.jsxs("span",{className:`sb-name ${Le(s.author)}`,children:[e.jsx(O,{to:`/forum/profile/${encodeURIComponent(s.author)}`,style:Ue(s.author,l),children:s.author}),l?e.jsxs("span",{className:"sb-role",children:[" (",l.label,")"]}):null]}),e.jsx("button",{type:"button",className:"rc-ax",style:{padding:"0 6px"},onClick:()=>xe(s.author),title:`@${s.author}`,children:"@"}),e.jsx("span",{className:"sb-text",children:typeof N=="string"?N:e.jsx("span",{children:N})})]}),e.jsx("span",{className:"sb-time",children:ot(s.ts)}),o&&e.jsxs("span",{className:"sb-actions",children:[e.jsx("button",{type:"button",className:"rc-ax",onClick:()=>be(s.id,s.text),title:"–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å",children:"‚úé"}),e.jsx("button",{type:"button",className:"rc-ax",onClick:()=>he(s.id),title:"–£–¥–∞–ª–∏—Ç—å",children:"üóë"})]})]},s.id)})}):e.jsx("ul",{className:"sb-ul",children:e.jsxs("li",{className:"sb-li",children:[e.jsx("div",{className:"sb-avatar",style:r,children:a}),e.jsxs("div",{className:"sb-row",children:[e.jsx("span",{className:"sb-name",children:"System"}),e.jsx("span",{className:"sb-text",children:"Loading‚Ä¶"})]}),e.jsx("span",{className:"sb-time",children:"just now"})]})})}),e.jsxs("form",{ref:z,className:"sb-form",onSubmit:s=>{s.preventDefault(),de()},children:[e.jsx("input",{ref:P,className:"sb-input",placeholder:"What's on your mind?",value:p,onChange:s=>v(s.target.value),maxLength:ce,disabled:!F}),e.jsx("button",{type:"button",className:"sb-btn",onClick:me,disabled:!F,"aria-label":"Emoji",children:"üôÇ"}),e.jsx("button",{type:"submit",className:"sb-btn send",disabled:!F,children:"üì£"}),Q&&e.jsxs("div",{className:"rc-emoji-panel",role:"menu","aria-label":"Emoji picker",style:{right:12,bottom:60},children:[e.jsx("div",{className:"rc-emoji-title",children:"Emoji"}),e.jsx("div",{className:"rc-emoji-grid",children:le.map(s=>e.jsx("button",{type:"button",className:"rc-emoji-item",onClick:()=>fe(s),"aria-label":`Insert ${s}`,children:s},s))})]})]})]})};return e.jsxs("div",{className:c??"",children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:lt}}),m==="forum"?He():m==="classic"?Be():Je(),d&&J&&$&&e.jsx("div",{className:"nick-back",role:"dialog","aria-modal":"true",children:e.jsxs("div",{className:"nick-card",children:[e.jsx("div",{style:{fontWeight:700,fontSize:16},children:"–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∏–∫"}),e.jsx("div",{className:"nick-warn",children:"–ù–∏–∫ –∑–∞–¥–∞—ë—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑. –°–º–µ–Ω–∏—Ç—å –µ–≥–æ –ø–æ—Ç–æ–º –Ω–µ–ª—å–∑—è."}),e.jsxs("div",{className:"nick-row",children:[e.jsx("input",{className:"nick-input",value:ke,onChange:t=>Y(t.target.value),maxLength:80,placeholder:"–í–∞—à –Ω–∏–∫‚Ä¶",autoFocus:!0}),e.jsx("button",{type:"button",className:"nick-btn",onClick:()=>Y(Ie()),children:"üé≤"}),e.jsx("button",{type:"button",className:"nick-btn",onClick:Ke,children:"–û–∫"})]}),e.jsx("div",{children:Array.from({length:5}).map((t,a)=>e.jsx("span",{className:"nick-pill",onClick:()=>Y(Ie()),children:"üé≤ –°–ª—É—á–∞–π–Ω—ã–π"},a))})]})})]})}const je={};function xt({onToken:i,className:c}){const m=(je==null?void 0:je.VITE_RECAPTCHA_SITE_KEY)||"",[h,g]=n.useState(!1),[x,M]=n.useState(null);n.useEffect(()=>{if(!m){const G=1+Math.floor(Math.random()*9),k=1+Math.floor(Math.random()*9);M({a:G,b:k,answer:""}),g(!0);return}const I="recaptcha-v3";if(document.getElementById(I)){g(!0);return}const d=document.createElement("script");d.id=I,d.src=`https://www.google.com/recaptcha/api.js?render=${encodeURIComponent(m)}`,d.async=!0,d.defer=!0,d.onload=()=>g(!0),d.onerror=()=>{g(!0)},document.head.appendChild(d)},[m]);async function U(){try{const I=window.grecaptcha;if(!I||!m)return i(null);const d=await I.execute(m,{action:"submit"});i(d||null)}catch{i(null)}}if(!h)return e.jsx("div",{className:c||""});if(x){const I=String(Number(x.answer))===String(x.a+x.b);return e.jsx("div",{className:c||"",children:e.jsxs("label",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{children:"–ê–Ω—Ç–∏—Å–ø–∞–º:"}),e.jsxs("span",{className:"rounded bg-white/10 px-2 py-1",children:[x.a," + ",x.b," ="]}),e.jsx("input",{className:"input w-16",value:x.answer||"",onChange:d=>M({...x,answer:d.target.value})}),e.jsx("button",{type:"button",className:"btn",onClick:()=>i(I?"math_ok":null),children:"–ü—Ä–æ–≤–µ—Ä–∏—Ç—å"})]})})}return e.jsx("div",{className:c||"",children:e.jsx("button",{type:"button",className:"btn",onClick:U,children:"–ü—Ä–æ–≤–µ—Ä–∫–∞ reCAPTCHA"})})}const Pe="forum:email_verify:";function Oe(i){const c=String(Math.floor(1e5+Math.random()*9e5)),m={code:c,issuedAt:Date.now()};try{localStorage.setItem(Pe+i.toLowerCase(),JSON.stringify(m))}catch{}return c}function mt(i,c,m=15*60*1e3){try{const h=localStorage.getItem(Pe+i.toLowerCase());if(!h)return!1;const g=JSON.parse(h);if(Date.now()-(g.issuedAt||0)>m)return!1;const x=String(g.code)===String(c).trim();if(x)try{localStorage.setItem("forum:email_verified:"+i.toLowerCase(),"1")}catch{}return x}catch{return!1}}function ft({role:i}){const c={developer:{color:"#22d3ee",text:"Developer"},admin:{color:"#ef4444",text:"Admin"},moderator:{color:"#8b5cf6",text:"Moderator"},vip:{color:"#eab308",text:"VIP"},user:{color:"#94a3b8",text:"User"},newbie:{color:"#22d3ee",text:"Newbie"}};return e.jsx("span",{style:{border:"1px solid rgba(255,255,255,.1)",background:"rgba(255,255,255,.05)",color:c[i].color,padding:"2px 8px",borderRadius:999,fontSize:12,fontWeight:700},children:c[i].text})}function De(i){const c=String(i||"").toLowerCase();return c.startsWith("[wip]")?"wip":c.startsWith("[review]")?"review":c.startsWith("[done]")?"done":"none"}function Te({onDone:i}){const[c,m]=n.useState("login"),[h,g]=n.useState(""),[x,M]=n.useState(""),[U,I]=n.useState(""),[d,G]=n.useState(""),[k,R]=n.useState(!0),[D,_]=n.useState(null),[S,T]=n.useState(!1),[B,H]=n.useState(null),[K,o]=n.useState(""),[y,p]=n.useState(!1),[v,C]=n.useState(""),E=/^[A-Za-z0-9_]{3,16}$/,A=!0,W=async u=>{u.preventDefault(),_(null),T(!0);try{if(c==="login")await Ve({usernameOrEmail:h.trim()||x.trim(),password:U,remember:k,otp:K.trim()||void 0,captchaToken:B}),i();else{if(!E.test(h.trim()))throw new Error("Username: 3‚Äì16 chars (A‚ÄìZ a‚Äìz 0‚Äì9 _)");await Xe({username:h.trim(),email:x.trim(),password:U||void 0,inviteCode:A?d.trim():"",remember:k,captchaToken:B});try{Oe(x.trim())}catch{}p("email")}}catch(z){_((z==null?void 0:z.message)||"–ß—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫")}finally{T(!1)}};return e.jsx("div",{className:"fixed inset-0 z-[90] grid place-items-center bg-black/70 p-4",children:e.jsxs("form",{onSubmit:W,className:"w-[min(560px,92vw)] card p-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(st,{size:18}),e.jsx("b",{children:c==="login"?"–í—Ö–æ–¥":"–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"})]}),!y&&e.jsxs("div",{className:"grid gap-3 mt-3",children:[e.jsx("input",{className:"input",placeholder:c==="login"?"–õ–æ–≥–∏–Ω –∏–ª–∏ e-mail":"–õ–æ–≥–∏–Ω (–ª–∞—Ç–∏–Ω–∏—Ü–∞/—Ü–∏—Ñ—Ä—ã/_ )",value:h,onChange:u=>g(u.target.value),disabled:S,required:!0}),c==="signup"&&e.jsx("input",{className:"input",placeholder:"E-mail",value:x,onChange:u=>M(u.target.value),disabled:S,required:!0}),c==="signup"&&A&&e.jsx("input",{className:"input",placeholder:"Invite code",value:d,onChange:u=>G(u.target.value),disabled:S,required:!0}),e.jsx("input",{className:"input",type:"password",placeholder:"–ü–∞—Ä–æ–ª—å",value:U,onChange:u=>I(u.target.value),disabled:S,required:!0}),c==="login"&&e.jsx("input",{className:"input",placeholder:"2FA –∫–æ–¥ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)",value:K,onChange:u=>o(u.target.value),disabled:S}),e.jsx(xt,{onToken:H}),D&&e.jsx("div",{style:{color:"#ef4444",fontSize:13},children:D}),e.jsx("div",{className:"flex items-center gap-2 text-xs opacity-80",children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:k,onChange:u=>R(u.target.checked),disabled:S}),"–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è"]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"btn btn-primary",type:"submit",disabled:S,children:c==="login"?"–í–æ–π—Ç–∏":"–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è"}),e.jsx("button",{className:"btn",type:"button",onClick:()=>m(c==="login"?"signup":"login"),disabled:S,children:c==="login"?"–ù–µ—Ç –∞–∫–∫–∞—É–Ω—Ç–∞? –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è":"–£–∂–µ –µ—Å—Ç—å? –í–æ–π—Ç–∏"})]})]}),y==="email"&&e.jsxs("div",{className:"grid gap-3 mt-3",children:[e.jsxs("div",{className:"text-sm text-zinc-300",children:["–ú—ã –æ—Ç–ø—Ä–∞–≤–∏–ª–∏ –∫–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –Ω–∞ ",x,". –í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –Ω–∏–∂–µ."]}),e.jsx("input",{className:"input",placeholder:"–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è",value:v,onChange:u=>C(u.target.value)}),!!D&&e.jsx("div",{style:{color:"#ef4444",fontSize:13},children:D}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{mt(x,v)?(p(!1),i()):_("–ù–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥")},children:"–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å"}),e.jsx("button",{type:"button",className:"btn",onClick:()=>{Oe(x)},children:"–û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ –µ—â—ë —Ä–∞–∑"})]})]})]})})}function ht({me:i,onLogout:c}){return e.jsx("header",{className:"sticky top-0 z-50 border-b backdrop-blur",style:{background:"rgba(10,10,14,.6)",borderColor:"var(--border)"},children:e.jsxs("div",{className:"mx-auto flex max-w-6xl items-center gap-3 px-4 py-3",children:[e.jsxs(O,{to:"/forum",className:"flex items-center gap-3",children:[e.jsx("div",{className:"grid h-11 w-11 place-items-center rounded-2xl bg-[color:var(--accent)]/20 text-[color:var(--accent)] shadow",children:e.jsx(Ne,{size:18})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] uppercase tracking-[0.32em]",style:{color:"var(--text-2)"},children:"Forum // FORUM"}),e.jsx("div",{className:"text-sm font-semibold",children:"–ü—Ä–∞–≤–∏—Ç–µ–ª—å—Å—Ç–≤–æ"})]})]}),i&&(i.role==="admin"||i.role==="developer"||i.role==="moderator")&&e.jsx(O,{to:"/forum/admin",className:"ml-2 btn",children:"Admin"}),e.jsxs(O,{to:`/forum/profile/${i.username}`,className:"ml-2 flex items-center gap-2 rounded-xl border px-3 py-2 card",children:[e.jsx(ft,{role:i.role}),e.jsx("div",{className:"text-sm font-semibold",children:i.username}),e.jsxs("div",{className:"border-l pl-2 text-xs opacity-70",children:["#",i.userNumber]})]}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{type:"button",className:"btn",onClick:c,children:"–í—ã–π—Ç–∏"})]})})}function kt(){const[,i]=n.useReducer(o=>o+1,0),[c,m]=n.useState(void 0),[h,g]=n.useState(!1),[x,M]=n.useState([]),[U,I]=n.useState([]),[d,G]=n.useState(null),[k,R]=n.useState([]),[D,_]=n.useState({total:0,wip:0,review:0,done:0}),S=n.useMemo(()=>{try{return new Intl.RelativeTimeFormat("ru",{numeric:"auto"})}catch{try{return new Intl.RelativeTimeFormat("en",{numeric:"auto"})}catch{return null}}},[]),T=n.useCallback(o=>{if(!o)return"";const y=new Date(o);if(Number.isNaN(y.getTime()))return"";if(!S)return y.toLocaleString();const p=y.getTime()-Date.now(),v=60*1e3,C=60*v,E=24*C,A=30*E,W=365*E;return Math.abs(p)<v?S.format(Math.round(p/1e3),"second"):Math.abs(p)<C?S.format(Math.round(p/v),"minute"):Math.abs(p)<E?S.format(Math.round(p/C),"hour"):Math.abs(p)<A?S.format(Math.round(p/E),"day"):Math.abs(p)<W?S.format(Math.round(p/A),"month"):S.format(Math.round(p/W),"year")},[S]);if(n.useEffect(()=>{let o=!0;const y=async()=>{try{const v=await we();o&&m(v)}catch{o&&m(null)}};y();const p=()=>y();return window.addEventListener("forum:session",p),window.addEventListener("storage",p),()=>{o=!1,window.removeEventListener("forum:session",p),window.removeEventListener("storage",p)}},[]),n.useEffect(()=>{let o=!0;return(async()=>{try{const y=await Ze(),p=Array.isArray(y)?[...y].sort((u,z)=>{const P=(u.order??0)-(z.order??0);return P!==0?P:new Date(z.createdAt||0).getTime()-new Date(u.createdAt||0).getTime()}):[],v=p.find(u=>String(u.title||"").toLowerCase()==="workshop")||null,[C,E]=await Promise.all([Qe(8).catch(()=>[]),v!=null&&v.id?et(v.id).catch(()=>[]):Promise.resolve([])]);if(!o)return;M(p),I(Array.isArray(C)?C:[]),G(v);const A=Array.isArray(E)?E.reduce((u,z)=>{const P=De(z.title);return P==="wip"?u.wip+=1:P==="review"?u.review+=1:P==="done"&&(u.done+=1),u.total+=1,u},{total:0,wip:0,review:0,done:0}):{total:0,wip:0,review:0,done:0},W=Array.isArray(E)?[...E].sort((u,z)=>new Date(z.updatedAt||z.createdAt||0).getTime()-new Date(u.updatedAt||u.createdAt||0).getTime()).slice(0,4):[];R(W),_(A)}catch{if(!o)return;M([]),I([]),G(null),R([]),_({total:0,wip:0,review:0,done:0})}})(),()=>{o=!1}},[c]),n.useEffect(()=>{let o=!1;function y(p){if(p.key==="/"){const v=document.getElementById("forum-search-input");v&&(p.preventDefault(),v.focus());return}if(p.key.toLowerCase()==="g"){o=!0,setTimeout(()=>{o=!1},800);return}if(o){if(p.key.toLowerCase()==="h"){p.preventDefault();try{window.location.href="/forum"}catch{location.assign("/forum")}}if(p.key.toLowerCase()==="q"){p.preventDefault();try{window.location.href="/forum/questions"}catch{location.assign("/forum/questions")}}}}return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[]),c===void 0)return e.jsx("div",{style:{minHeight:"100vh",background:"#0c0d12"}});if(!c)return e.jsxs("main",{className:"min-h-screen",style:{background:"#0d0d12",color:"#f8fafc"},children:[e.jsx("header",{className:"sticky top-0 z-50 border-b backdrop-blur",style:{background:"rgba(10,10,14,.6)",borderColor:"var(--border)"},children:e.jsx("div",{className:"mx-auto flex max-w-6xl items-center gap-3 px-4 py-3",children:e.jsxs(O,{to:"/forum",className:"flex items-center gap-3",children:[e.jsx("div",{className:"grid h-11 w-11 place-items-center rounded-2xl bg-[color:var(--accent)]/20 text-[color:var(--accent)] shadow",children:e.jsx(Ne,{size:18})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] uppercase tracking-[0.32em]",style:{color:"var(--text-2)"},children:"Forum // FORUM"}),e.jsx("div",{className:"text-sm font-semibold",children:"Sky Forum"})]})]})})}),e.jsx(Te,{onDone:()=>i()})]});const B=Array.isArray(x)?x:[],H=Array.isArray(U)?U:[],K={wip:{label:"WIP",className:"bg-amber-400/10 text-amber-300"},review:{label:"Review",className:"bg-sky-400/10 text-sky-300"},done:{label:"Done",className:"bg-emerald-400/10 text-emerald-300"},none:{label:"Idea",className:"bg-zinc-200/10 text-zinc-200"}};return e.jsxs("main",{className:"min-h-screen",style:{background:"radial-gradient(900px 600px at 15% -8%, rgba(99,102,241,.18), transparent 65%), radial-gradient(1100px 700px at 88% 10%, rgba(168,85,247,.16), transparent 65%), #0d0d12"},children:[c?e.jsx(ht,{me:c,onLogout:()=>{qe(),i()}}):e.jsx("header",{className:"sticky top-0 z-50 border-b backdrop-blur",style:{background:"rgba(10,10,14,.6)",borderColor:"var(--border)"},children:e.jsxs("div",{className:"mx-auto flex max-w-6xl items-center gap-3 px-4 py-3",children:[e.jsxs(O,{to:"/forum",className:"flex items-center gap-3",children:[e.jsx("div",{className:"grid h-11 w-11 place-items-center rounded-2xl bg-[color:var(--accent)]/20 text-[color:var(--accent)] shadow",children:e.jsx(Ne,{size:18})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[11px] uppercase tracking-[0.32em]",style:{color:"var(--text-2)"},children:"Forum // FORUM"}),e.jsx("div",{className:"text-sm font-semibold",children:"Sky Forum"})]})]}),e.jsx("div",{className:"flex-1"}),e.jsx("button",{type:"button",className:"btn",onClick:()=>g(!0),children:"Login"})]})}),e.jsxs("div",{className:"mx-auto w-full max-w-6xl px-4 py-6",children:[e.jsx(tt,{}),e.jsx(rt,{}),e.jsx("div",{className:"relative mb-6 overflow-hidden card",children:e.jsx(O,{to:"/forum",className:"block focus:outline-none focus:ring-2 focus:ring-cyan-400/60 rounded-md",children:e.jsx("h1",{className:"select-none py-10 text-center font-black tracking-[0.16em] text-transparent bg-clip-text shimmer-text",style:{fontSize:"clamp(64px,12vw,140px)",lineHeight:1},title:"Go to forum home",children:"SKY"})})}),e.jsxs("div",{className:"mt-6 grid gap-6 lg:grid-cols-[1.45fr_.85fr]",children:[e.jsxs("div",{className:"grid gap-4",children:[e.jsx("div",{className:"card p-0",children:e.jsx("div",{className:"p-3",children:e.jsx(ut,{variant:"shoutbox"})})}),e.jsx("div",{className:"text-[11px] uppercase tracking-[0.32em]",style:{color:"var(--text-2)"},children:"–†–∞–∑–¥–µ–ª—ã"}),B.map(o=>{const y=o.id===(d==null?void 0:d.id)||String(o.title||"").toLowerCase()==="workshop";return e.jsx(O,{to:`/forum/section/${o.id}`,className:"card p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 text-lg font-semibold",children:[o.icon?e.jsx("span",{className:"text-xl",children:o.icon}):e.jsx(at,{size:16}),e.jsx("span",{className:"truncate",children:o.title}),y&&e.jsx("span",{className:"rounded-full bg-emerald-400/10 px-2 py-0.5 text-[11px] uppercase tracking-[0.3em] text-emerald-300",children:"Workshop"})]}),o.description&&e.jsx("p",{className:"mt-1 text-sm text-zinc-300/80",children:o.description})]}),e.jsxs("div",{className:"text-right text-xs uppercase tracking-[0.28em] text-zinc-500",children:[e.jsxs("div",{children:["Topics ",o.topicCount??0]}),e.jsxs("div",{children:["Posts ",o.postCount??0]})]})]})},o.id)}),!B.length&&e.jsx("div",{className:"card p-4 text-sm opacity-70",children:"–†–∞–∑–¥–µ–ª–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å, —á—Ç–æ–±—ã —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π —Ä–∞–∑–¥–µ–ª."})]}),e.jsxs("aside",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-[11px] uppercase tracking-[0.28em] text-zinc-400",children:"Latest activity"}),e.jsx(O,{to:"/forum?feed=latest",className:"text-xs text-cyan-300 hover:underline",children:"Feed"})]}),H.map(o=>e.jsx(O,{to:`/forum/topic/${o.topicId||o.id}`,className:"block card px-3 py-3 transition hover:border-cyan-400/40",children:e.jsxs("div",{className:"relative pl-4",children:[e.jsx("span",{className:"absolute left-0 top-1.5 h-2 w-2 rounded-full",style:{background:"#22d3ee"}}),e.jsx("div",{className:"truncate font-semibold",children:o.title||o.topicTitle||"–ü–æ—Å—Ç"}),e.jsx("div",{className:"mt-1 text-xs",style:{color:"var(--text-2)"},children:T(o.createdAt||o.updatedAt)||(o.createdAt?new Date(o.createdAt).toLocaleString():"")})]})},o.id)),!H.length&&e.jsx("div",{className:"card p-3 text-sm opacity-70",children:"–ü–æ—Å—Ç–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç"}),d?e.jsxs("div",{className:"mt-4 card p-5",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"text-xs uppercase tracking-[0.3em] text-emerald-300/80",children:"Workshop"}),e.jsx("h2",{className:"text-2xl font-semibold text-white",children:d.title||"Workshop"}),e.jsx("p",{className:"mt-1 text-sm text-zinc-300/80",children:"–ú–∞—Å—Ç–µ—Ä—Å–∫–∞—è –¥–ª—è –ø—Ä–æ–µ–∫—Ç–Ω—ã—Ö —Ç–µ–º: —Å—Ç–∞—Ç—É—Å, —Å—Ç–µ–∫, –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ —Ä–µ–≤—å—é —Å–æ–æ–±—â–µ—Å—Ç–≤–∞."})]}),e.jsx(O,{to:`/forum/section/${d.id}`,className:"btn btn-primary",children:"–û—Ç–∫—Ä—ã—Ç—å –º–∞—Å—Ç–µ—Ä—Å–∫—É—é"})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-3 text-[11px] uppercase tracking-[0.32em] text-zinc-400/80",children:[e.jsxs("span",{children:["–ü—Ä–æ–µ–∫—Ç–æ–≤ ",D.total]}),e.jsxs("span",{children:["[WIP] ",D.wip]}),e.jsxs("span",{children:["[Review] ",D.review]}),e.jsxs("span",{children:["[Done] ",D.done]})]}),e.jsxs("div",{className:"mt-4 grid gap-3 md:grid-cols-2",children:[k.map(o=>{const y=De(o.title),p=K[y];return e.jsxs(O,{to:`/forum/topic/${o.id}`,className:"card p-4 transition hover:border-emerald-400/40",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:`rounded-full px-2 py-0.5 text-[11px] uppercase tracking-[0.3em] ${p.className}`,children:p.label}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("div",{className:"truncate font-semibold text-white",children:o.title}),e.jsx("div",{className:"mt-1 text-xs text-zinc-400/80",children:T(o.updatedAt||o.createdAt)||(o.updatedAt?new Date(o.updatedAt).toLocaleString():"")})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-4 text-[11px] uppercase tracking-[0.3em] text-zinc-500",children:[e.jsxs("span",{children:["Replies ",o.replyCount??0]}),e.jsxs("span",{children:["Views ",o.viewCount??0]})]})]},o.id)}),!k.length&&e.jsx("div",{className:"card p-4 text-sm text-zinc-300/80",children:"–í –º–∞—Å—Ç–µ—Ä—Å–∫–æ–π –ø–æ–∫–∞ –Ω–µ—Ç –ø—Ä–æ–µ–∫—Ç–æ–≤. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–≤—ã–π, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–≤—å—é."})]})]}):e.jsx("div",{className:"mt-4 card border border-dashed border-white/10 p-5 text-sm text-zinc-300/70",children:"Workshop-—Ä–∞–∑–¥–µ–ª –µ—â—ë –Ω–µ —Å–æ–∑–¥–∞–Ω. –°–æ–∑–¥–∞–π—Ç–µ –µ–≥–æ –≤ –ø–∞–Ω–µ–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞, —á—Ç–æ–±—ã –¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏."})]})]})]}),h&&e.jsx(Te,{onDone:()=>{g(!1),i()}})]})}export{kt as default};
