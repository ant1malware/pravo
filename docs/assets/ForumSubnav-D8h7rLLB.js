import{j as e}from"./index-N9yhZYnV.js";import{b,R as i,L as c}from"./react-vendor-DTkXckhQ.js";import{l as j}from"./forumRemote-BYvX5m8l.js";import{ah as k,ai as g,U as v,af as w}from"./icons-pv2MHu2Z.js";function S(){const l=b(),[o,m]=i.useState(null);i.useEffect(()=>{let s=!0;return(async()=>{try{const t=(await j()||[]).find(r=>String(r.title||"").toLowerCase()==="workshop");s&&m((t==null?void 0:t.id)||null)}catch{s&&m(null)}})(),()=>{s=!1}},[]);const u=l.pathname.includes("/forum/members"),d=o?l.pathname.startsWith(`/forum/section/${o}`):!1,f=!u&&!d,p=({to:s,active:a,icon:t,children:r,disabled:x})=>x?e.jsxs("span",{className:`btn inline-flex items-center gap-2 ${a?"btn-primary":""}`,title:"Workshop section is not created yet","aria-disabled":!0,children:[t," ",r]}):e.jsxs(c,{to:s,className:`btn inline-flex items-center gap-2 ${a?"btn-primary":""}`,children:[t," ",r]}),[h,n]=i.useState(!1);return i.useEffect(()=>{const s=()=>n(!1);return document.addEventListener("click",s),()=>document.removeEventListener("click",s)},[]),e.jsxs("div",{className:"mb-4 flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"relative",onClick:s=>s.stopPropagation(),children:[e.jsxs("button",{className:`btn inline-flex items-center gap-2 ${f?"btn-primary":""}`,onClick:()=>n(s=>!s),children:[e.jsx(k,{size:16})," Forums ",e.jsx(g,{size:14})]}),h&&e.jsxs("div",{className:"absolute left-0 z-20 mt-1 w-56 rounded-xl border border-white/10 bg-[color:var(--surface)] p-1 shadow-lg",children:[e.jsx(c,{className:"block rounded-lg px-3 py-2 hover:bg-white/5",to:"/forum",onClick:()=>n(!1),children:"Главная"}),e.jsx(c,{className:"block rounded-lg px-3 py-2 hover:bg-white/5",to:"/forum/questions",onClick:()=>n(!1),children:"Вопросы"})]})]}),e.jsx(p,{to:"/forum/members",active:u,icon:e.jsx(v,{size:16}),children:"Members"}),e.jsx(p,{to:o?`/forum/section/${o}`:"/forum",active:d,icon:e.jsx(w,{size:16}),disabled:!o,children:"Workshop"})]})}export{S as F};
