import{j as m}from"./index-XhMoTvXz.js";import{R as v}from"./react-vendor-DStf8yZ1.js";import{c as F}from"./icons-plczHfNq.js";const $="fav:",d="fav:item:";function u(){try{return typeof window<"u"&&!!window.localStorage}catch{return!1}}function h(t,e){return`${$}${t}:${e}`}function S(t,e){return`${d}${t}:${e}`}function g(){try{window.dispatchEvent(new CustomEvent("favorites:change"))}catch{}}function i(t,e){if(!u())return!1;try{return!!localStorage.getItem(h(t,e))}catch{return!1}}function p(t,e,r){if(!u())return!1;const o=h(t,e),a=S(t,e);try{return localStorage.getItem(o)?(localStorage.removeItem(o),localStorage.removeItem(a),g(),!1):(localStorage.setItem(o,"1"),r&&(r.title||r.url)&&localStorage.setItem(a,JSON.stringify(r)),g(),!0)}catch{return!1}}function I(t){const e=[];if(!u())return e;try{for(let r=0;r<localStorage.length;r++){const o=localStorage.key(r)||"",a=/^fav:(role|law|vu|lawsec):(.+)$/.exec(o);if(!a)continue;const c=a[1],s=a[2];let n=null;try{const l=localStorage.getItem(S(c,s));n=l?JSON.parse(l):null}catch{n=null}e.push({kind:c,id:s,title:n==null?void 0:n.title,url:n==null?void 0:n.url})}}catch{}return e.sort((r,o)=>r.kind!==o.kind?r.kind.localeCompare(o.kind):(r.title||r.id).localeCompare(o.title||o.id))}function R(t){return I(t)}function j(t,e){i(t,e)&&p(t,e)}function k({kind:t,id:e,title:r,url:o,size:a="md"}){const[c,s]=v.useState(()=>i(t,e));v.useEffect(()=>{s(i(t,e))},[t,e]);function n(f){f.preventDefault(),f.stopPropagation();const y=p(t,e,{title:r,url:o});s(y)}const l=a==="sm"?"h-7 w-7":"h-8 w-8",w=a==="sm"?"h-4 w-4":"h-5 w-5";return m.jsx("button",{onClick:n,title:c?"Убрать из избранного":"Добавить в избранное","aria-label":c?"Убрать из избранного":"Добавить в избранное",className:`fav-star-btn ${l} ${c?"is-active":""}`,children:m.jsx(F,{className:`fav-star-icon ${w}`})})}export{k as F,i,R as l,j as r,p as t};
