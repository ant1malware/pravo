import{H as C,I as D}from"./index-B5m3a0G1.js";function h(){if(!(typeof window>"u"))return window}function y(t,o){const e=h();if(!e)return o;try{const r=e.localStorage.getItem(t);return r?JSON.parse(r):o}catch{return o}}function i(t,o){const e=h();if(e)try{e.localStorage.setItem(t,JSON.stringify(o))}catch{}}function a(t){const o=h();if(o)try{o.localStorage.removeItem(t)}catch{}}function v(){return new Date().toISOString()}let f=!1;function b(){if(f)return;f=!0,y("forum:initialized",!1)||(A(),i("forum:initialized",!0))}function A(){const t=v(),o={id:crypto.randomUUID(),username:"Pavel",email:"pavel@forum.local",createdAt:t,role:"developer",userNumber:1,posts:3,likes:6,topics:2,profile:{bio:"Создатель SKY форума. Слежу за порядком и вдохновляю команду.",links:{website:"https://sky.local"},accentFrom:"#a855f7",accentTo:"#22d3ee",badges:["Founder","Core"],privacy:{showEmail:!0,showStats:!0}},owner:!0,hidden:!0,bans:null,mutes:null},e={id:crypto.randomUUID(),username:"elysia",email:"elysia@forum.local",createdAt:t,role:"moderator",userNumber:2,posts:5,likes:8,topics:1,profile:{bio:"Фанат ретро-интерфейсов, модерирую раздел дизайна.",signature:"Stay liquid",accentFrom:"#f472b6",accentTo:"#c084fc",badges:["Moderator"],privacy:{showEmail:!1,showStats:!0,showLinks:!0,allowComments:!0,showFollowers:!0}},bans:null,mutes:null},r={id:crypto.randomUUID(),username:"raptor",email:"raptor@forum.local",createdAt:t,role:"vip",userNumber:3,posts:2,likes:3,topics:1,profile:{bio:"Тестирую новые версии SKY. Люблю длинные треды.",accentFrom:"#38bdf8",accentTo:"#a855f7",badges:["Early"],privacy:{showEmail:!1,showStats:!0,showLinks:!0,allowComments:!0,showFollowers:!0}},bans:null,mutes:null};i("forum:accounts",[o,e,r]);const s=[{id:crypto.randomUUID(),title:"SKY Update Log",description:"Release notes, hotfixes, infrastructure work, and roadmap teasers.",icon:"??",createdAt:t,order:1,moderatorIds:[o.id],topicCount:1,postCount:4},{id:crypto.randomUUID(),title:"Design Lab",description:"Visual experiments, UI reviews, and branding explorations from the crew.",icon:"??",createdAt:t,order:2,moderatorIds:[e.id],topicCount:1,postCount:3},{id:crypto.randomUUID(),title:"Community Lounge",description:"Introductions, collaborations, and day-to-day chatter with the SKY family.",icon:"??",createdAt:t,order:3,moderatorIds:[e.id,r.id],topicCount:1,postCount:3},{id:crypto.randomUUID(),title:"Workshop",description:"Marketplace for merch drops, digital kits, and bespoke commission offers.",icon:"???",createdAt:t,order:4,moderatorIds:[o.id],topicCount:1,postCount:2}];i("forum:sections",s);const n=[{id:crypto.randomUUID(),sectionId:s[0].id,title:"SKY 0.9 Roadmap",authorId:o.id,createdAt:t,updatedAt:t,pinned:!0,locked:!1,movedTo:null,viewCount:124,replyCount:2,lastPostAt:t,lastPostBy:e.id},{id:crypto.randomUUID(),sectionId:s[1].id,title:"Liquid glass interface lookbook",authorId:e.id,createdAt:t,updatedAt:t,pinned:!1,locked:!1,movedTo:null,viewCount:86,replyCount:1,lastPostAt:t,lastPostBy:o.id},{id:crypto.randomUUID(),sectionId:s[2].id,title:"Community launch party recap",authorId:r.id,createdAt:t,updatedAt:t,pinned:!0,locked:!1,movedTo:null,viewCount:96,replyCount:2,lastPostAt:t,lastPostBy:o.id},{id:crypto.randomUUID(),sectionId:s[3].id,title:"Hand-crafted drops and commission board",authorId:o.id,createdAt:t,updatedAt:t,pinned:!0,locked:!1,movedTo:null,viewCount:72,replyCount:1,lastPostAt:t,lastPostBy:e.id}];i("forum:topics",n);const d=[{id:crypto.randomUUID(),topicId:n[0].id,authorId:o.id,content:"Milestones for 0.9 include the permissions overhaul, a refreshed landing page, and the new notification worker.",createdAt:t,likes:[e.id,r.id]},{id:crypto.randomUUID(),topicId:n[0].id,authorId:e.id,content:"Pinned the roadmap so testers can follow along. Let us know which items you want prioritized first!",createdAt:t,likes:[r.id]},{id:crypto.randomUUID(),topicId:n[0].id,authorId:r.id,content:"Loving the quality-of-life focus. The new invite flow already feels smoother on mobile.",createdAt:t,likes:[o.id]},{id:crypto.randomUUID(),topicId:n[1].id,authorId:e.id,content:"Uploaded a batch of liquid glass mockups with dynamic lighting. Feedback welcome before we freeze colors.",createdAt:t,likes:[o.id]},{id:crypto.randomUUID(),topicId:n[1].id,authorId:o.id,content:"That neon violet variant is perfect for the beta shell. Let's try it inside the command palette too.",createdAt:t,likes:[r.id]},{id:crypto.randomUUID(),topicId:n[2].id,authorId:r.id,content:"Recap thread is live! Share your favourite photos from the launch party and tag who you met.",createdAt:t,likes:[o.id,e.id]},{id:crypto.randomUUID(),topicId:n[2].id,authorId:e.id,content:"Added the aftermovie link and playlists from the DJ set�enjoy the nostalgia.",createdAt:t,likes:[o.id]},{id:crypto.randomUUID(),topicId:n[2].id,authorId:o.id,content:"Thanks everyone who joined and helped moderate. This energy is why SKY exists.",createdAt:t,likes:[r.id]},{id:crypto.randomUUID(),topicId:n[3].id,authorId:o.id,content:"Opening the Workshop board with curated artisan drops and safe trading guidelines.",createdAt:t,likes:[r.id]},{id:crypto.randomUUID(),topicId:n[3].id,authorId:e.id,content:"First batch features screen-printed posters, keycaps, and a limited synthwave sticker set.",createdAt:t,likes:[o.id]}];i("forum:posts",d),i("forum:settings",{heroTitle:"SKY Forum",heroSubtitle:"Эксклюзивное сообщество для разработчиков и исследователей SKY.",heroMessage:"Обсуждаем обновления, делимся концептами и тестируем будущее интерфейсов.",registrationOpen:!0,requireEnglishNick:!0,allowGuestRead:!1}),i("forum:counters",{nextUserNumber:4});const u=[{code:"SKYACCESSCODE000",createdAt:t,createdBy:o.id,note:"Демо приглашение",usedBy:e.id,usedAt:t},{code:"SKYACCESSCODE001",createdAt:t,createdBy:o.id,note:"Запас для теста",usedBy:null,usedAt:null}];i("forum:invites",u);const c={id:crypto.randomUUID(),createdAt:t,actorId:o.id,action:"seed",targetType:"settings",notes:"Инициализация демо-данных форума"};i("forum:logs",[c])}function l(){return b(),y("forum:accounts",[])}function E(t){i("forum:accounts",t)}function F(){return b(),y("forum:logs",[])}function L(t){i("forum:logs",t)}function S(t){const o=F(),e={id:crypto.randomUUID(),createdAt:v(),...t};o.unshift(e),L(o.slice(0,200))}function Y(){const t=C();return t?N(t.userId):null}function O(){return l()}function N(t){return l().find(o=>o.id===t)||null}function x(t){return l().find(o=>o.username.toLowerCase()===t.toLowerCase())||null}function R(t,o){var n,d,p,m,u,c,w,g,I,U;const e=l(),r=e.findIndex(k=>k.id===t);if(r===-1)return;const s=o.badges?o.badges.slice(0,3):void 0;e[r]={...e[r],profile:{...e[r].profile,...o,badges:s,privacy:{showEmail:((n=o.privacy)==null?void 0:n.showEmail)??((d=e[r].profile.privacy)==null?void 0:d.showEmail)??!1,showStats:((p=o.privacy)==null?void 0:p.showStats)??((m=e[r].profile.privacy)==null?void 0:m.showStats)??!0,showLinks:((u=o.privacy)==null?void 0:u.showLinks)??((c=e[r].profile.privacy)==null?void 0:c.showLinks)??!0,allowComments:((w=o.privacy)==null?void 0:w.allowComments)??((g=e[r].profile.privacy)==null?void 0:g.allowComments)??!0,showFollowers:((I=o.privacy)==null?void 0:I.showFollowers)??((U=e[r].profile.privacy)==null?void 0:U.showFollowers)??!0}}},E(e),S({actorId:t,action:"profile_update",targetType:"account",targetId:t,notes:"Обновление профиля"})}function z(t){a("forum:accounts"),a("forum:sections"),a("forum:topics"),a("forum:posts"),a("forum:logs"),a("forum:invites"),i("forum:settings",{heroTitle:"SKY Forum",heroSubtitle:"",heroMessage:"",registrationOpen:!0,requireEnglishNick:!0,allowGuestRead:!1}),i("forum:counters",{nextUserNumber:1}),i("forum:sections",[]),i("forum:topics",[]),i("forum:posts",[]),i("forum:accounts",[]),i("forum:logs",[]),i("forum:invites",[]),i("forum:initialized",!0),f=!0,t&&S({actorId:t,action:"reset_empty",targetType:"settings"}),D()}const T=1;function B(t){if(!t)return!1;if(typeof t.hidden=="boolean")return t.hidden;if(t.owner)return!0;const o=typeof t.userNumber=="string"?Number(t.userNumber):t.userNumber;return typeof o=="number"&&Number.isFinite(o)&&o===T}function K(t,o){return B(t)?t!=null&&t.id?!!o&&o===t.id:!1:!0}function q(t,o){return t.filter(e=>K(e,o))}export{T as O,N as a,q as b,K as c,x as f,Y as g,B as i,O as l,z as r,R as u};
