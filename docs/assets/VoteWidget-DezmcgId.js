import{j as r,a as I}from"./index-DG-b-6oy.js";import{S as j,J as T,N as B,O as A,V as R,W as $}from"./icons-DET5c9ig.js";import{R as f}from"./react-vendor-DTkXckhQ.js";const D=[{id:"lawyer",role:"Адвокат",tips:["Всегда выходи через рацию департамента: представление по форме «Адвокат Фамилия».","Перед визитом в ИК — запросить допуск и сопровождение КПП: «/d [ПР/УФСИН] Адвокат *Фамилия*. Разрешите прибыть для оказания юридической помощи заключенным ИК?»","Вход и передвижение на территории ИК — только с удостоверением и под сопровождением сотрудника ИК.","Работай в установленные окна посещений ИК","Запрещена передача денежных средств заключенным без согласования с сотрудником ФСИН"],source:"Учебные материалы: порядок работы адвоката в ИК, формы общения и запреты в рации."},{id:"inspector",role:"Инспектор",tips:["Проверки/ревизии — только с разрешения руководства и составом ≥ 2 чел.","На объекте представиться старшему, запросить режимный допуск (архив, склад, КПП).","Старт/продолжение/завершение — докладывай в /d: «/d [ПР/Орг] Инспектор Петров. Прибыл на проверку, приступаю».","Нарушения фиксируй фактами; решения — через руководителя департамента.","Плановые/внеплановые проверки — по основаниям и регламенту; итог — оценка (1–5) и доклад в /d."],source:"Порядок плановых/внеплановых проверок; инфо-раздел Правительства."},{id:"advisor",role:"Советник",tips:["Координируй собеседования и методическую помощь отделам; план согласовывай с руководством.","На совместных выездах — будь точкой коммуникации: «/d [ПР/Орг] Советник Сидоров. Координирую проверку, состав N».","В рации — только по делу, кратко, без оффтопа; спорные вопросы поднимай руководителю.","Собирай сводку и передавай руководителю департамента."]},{id:"deputy-minister",role:"Заместитель министра",tips:["Организует и принимает отчётность подразделений; назначает ответственных за связь.","Снятие судимостей — строго в здании Правительства и по регламенту, доклад в /d о факте оказания услуги.","Для гос-волны /gov: предварительно уточни в /d свободный слот и забронируй (пример ниже).","Шаблон брони гос-волны: «/d [ПР/Орг] Волна гос. новостей свободна на 18:10?», затем «Занимаю волну на 18:10»."],source:"Правила бронирования гос-волны; учебные материалы Правительства."},{id:"minister",role:"Министр",tips:["Утверждает плановые проверки/маршруты; формирует состав комиссии.","Связь: единый стандарт докладов, короткие формулы, дисциплина рации.","Совместные мероприятия с МВД/ВЧ/ЕСС согласовывает с руководителями организаций.","Итоги проверок — сводный доклад Губернатору/Вице-губернатору."]},{id:"admin-chief",role:"Глава администрации",tips:["Операционное управление аппаратом: расписания, приоритеты, контроль исполнения.","Объединяет коммуникацию департаментов при сложных кейсах.","Принимает сводные отчёты по проверкам/ревизиям и направляет резолюции.","Требует строгого соблюдения субординации и форм радиодокладов."]},{id:"vice-governor",role:"Вице-губернатор",tips:["Межведомственное взаимодействие на уровне руководителей: ФСБ/ВЧ/ЕСС/МВД.","Утверждает внеплановые проверки по установленным основаниям.","Назначает кураторов и сроки устранения нарушений; в экстренных случаях формирует единый штаб связи.","Итоги докладывает Губернатору и доводит решения до департаментов."],source:"Основания внеплановых проверок; общие регламенты взаимодействия."},{id:"governor",role:"Губернатор",tips:["Общее руководство, постановления, указы; стратегические решения.","Утверждает графики проверок и составы комиссий (не менее 3 членов для аттестаций).","Решает межведомственные споры и принимает финальные отчёты.","Награждения и меры воздействия — по итогам проверок/ревизий."],source:"Областной закон о Правительстве: порядок проверок и аттестаций."},{id:"templates-regimes",role:"Шаблоны: режимные объекты (ИК, ВЧ)",tips:["ИК (въезд/допуск): «/d [УФСИН] Должность Фамилия. Прибыл к КПП-1 ИК для [цель]. Просьба о допуске/сопровождении».","ВЧ (проезд через КПП при отсутствии дежурного): короткий доклад авто и цель въезда; дождись подтверждения и следуй указаниям КПП.","Всегда имей при себе служебное удостоверение; на территории действуй только по законным требованиям дежурного персонала."],source:"Правила КПП ВЧ, федеральный закон о режимных территориях; лекционные материалы."}];function u(e,t){return t.some(o=>e.includes(o))}function G(e){const t=e.toLowerCase();return u(t,["охран","пост","security"])?r.jsx(j,{className:"h-4 w-4"}):u(t,["адвокат","юрист","прав"])?r.jsx(T,{className:"h-4 w-4"}):u(t,["инспектор","советник","секрет","контрол"])?r.jsx(B,{className:"h-4 w-4"}):u(t,["министр","губернатор","админ","руковод"])?r.jsx(A,{className:"h-4 w-4"}):r.jsx(j,{className:"h-4 w-4"})}const m=[];var b,v,S;for(const e of I){const t=Array.isArray(e.dept)?e.dept.includes("ЮД")?"юридический":e.dept.includes("ДВД")||e.dept.includes("охрана")?"охрана":e.dept.includes("АДМ")?"админ":void 0:void 0;m.push({id:`role:${e.id}`,type:"role",title:e.role,tags:[e.role.split(" ")[0].toLowerCase(),...(((b=e.duties)==null?void 0:b.slice(0,3))||[]).map(o=>o.split(" ")[0].toLowerCase())],dept:t||"неизвестно",level:parseInt(((v=String(e.role).match(/\((\d+)\)/))==null?void 0:v[1])||"0",10),description:((S=e.duties)==null?void 0:S[0])||void 0})}var N,C;for(const e of D)m.push({id:`procedure:${e.id}`,type:"procedure",title:e.role,tags:[e.role.split(" ")[0].toLowerCase(),...(((N=e.tips)==null?void 0:N.slice(0,3))||[]).map(t=>t.split(" ")[0].toLowerCase())],dept:"админ",description:((C=e.tips)==null?void 0:C[0])||void 0});function V(e){return m.find(t=>t.id===e)}function z(e,t){if(e=e.toLowerCase(),t=t.toLowerCase(),e.includes(t))return 2;const o=new Set(e.split(/[^\p{L}\p{N}]+/u).filter(Boolean)),i=new Set(t.split(/[^\p{L}\p{N}]+/u).filter(Boolean));let n=0;for(const c of i)o.has(c)&&n++;return n>0?1:0}function E(e,t=6){const o=s=>e.dept&&s?e.dept===s:!0,i=new Set((e.tags||[]).map(s=>s.toLowerCase()));function n(s){if(s.id===e.id)return-1;let l=0;o(s.dept)&&(l+=2);const d=(s.tags||[]).reduce((p,L)=>p+(i.has(String(L).toLowerCase())?1:0),0);return l+=Math.min(d,3),l+=z(s.title,e.title),l}const c=m.filter(s=>s.type!==e.type).map(s=>({m:s,s:n(s)})).filter(s=>s.s>0).sort((s,l)=>l.s-s.s).slice(0,t*2).map(s=>s.m),a={procedures:[],templates:[],roles:[]};for(const s of c)s.type==="procedure"&&a.procedures.length<t?a.procedures.push(s):s.type==="template"&&a.templates.length<t?a.templates.push(s):s.type==="role"&&a.roles.length<t&&a.roles.push(s);return a}function h({title:e,items:t}){return t.length?r.jsxs("div",{className:"mt-2 text-xs",children:[r.jsx("div",{className:"mb-1 font-semibold opacity-70",children:e}),r.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.slice(0,6).map(o=>r.jsx("span",{title:o.description||o.title,className:"inline-flex max-w-[14rem] items-center gap-1 truncate rounded-full border px-2 py-0.5 hover:bg-zinc-100 dark:hover:bg-zinc-800",children:r.jsx("span",{className:"truncate",children:o.title})},o.id))})]}):null}function q({itemId:e,itemType:t}){const o=V(e);if(!o)return r.jsx("div",{className:"mt-2 text-xs italic opacity-60",children:"Пока без связей"});const i=E(o),n=i.procedures.length+i.templates.length+i.roles.length;return r.jsxs("div",{className:"mt-3 rounded-xl border border-zinc-200 p-2 dark:border-zinc-800",children:[r.jsxs("div",{className:"mb-1 text-xs font-semibold",children:["Связано с этим: ",n]}),r.jsx(h,{title:"Процедуры",items:i.procedures}),r.jsx(h,{title:"Шаблоны",items:i.templates}),r.jsx(h,{title:"Роли",items:i.roles}),!n&&r.jsx("div",{className:"text-xs opacity-60",children:"Пока без связей"})]})}const g={},k=(g==null?void 0:g.VITE_VOTE_API_BASE)||"https://notifications-worker.wizardiowhy.workers.dev/skyapi",x=new Set;let w=null;const y=new Map;function O(e,t){y.set(e,t)}function U(e){y.delete(e)}function P(e){x.add(e),!w&&(w=setTimeout(async()=>{var t;try{const o=[...x];x.clear(),w=null;const n=await(await fetch(`${k}/api/stats?ids=${encodeURIComponent(o.join(","))}`)).json(),c=(n==null?void 0:n.stats)||{};for(const[a,s]of Object.entries(c))(t=y.get(a))==null||t(s)}catch{}},120))}function F(){const e="anon_uid";let t=localStorage.getItem(e);return t||(t=crypto.randomUUID(),localStorage.setItem(e,t)),t}async function J(e,t){if(localStorage.getItem("telemetry_disabled")==="1")return null;const o=`voted:${e}`;if(localStorage.getItem(o))return null;localStorage.setItem(o,"1");try{const n=await(await fetch(`${k}/api/vote`,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({card_id:e,vote:t,anon_uid:F()})})).json();if(n!=null&&n.ok&&n.totals)return n.totals}catch{}return null}function H({cardId:e}){const[t,o]=f.useState({up:0,down:0}),[i,n]=f.useState(!1),c=typeof window<"u"&&!!localStorage.getItem(`voted:${e}`),a=i||c||localStorage.getItem("telemetry_disabled")==="1";f.useEffect(()=>(P(e),O(e,o),()=>U(e)),[e]);async function s(l){if(a)return;n(!0),o(p=>({up:p.up+(l===1?1:0),down:p.down+(l===-1?1:0)}));const d=await J(e,l);d&&o(d),n(!1)}return localStorage.getItem("telemetry_disabled")==="1"?null:r.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs",children:[r.jsxs("button",{className:"btn",onClick:()=>s(1),disabled:a,children:[r.jsx(R,{className:"h-4 w-4"})," ",t.up]}),r.jsxs("button",{className:"btn",onClick:()=>s(-1),disabled:a,children:[r.jsx($,{className:"h-4 w-4"})," ",t.down]})]})}export{q as R,H as V,D as a,G as i};
